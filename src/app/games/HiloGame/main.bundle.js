(()=>{var t={1673:function(t,e,n){var i,o,r;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}r=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!=s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return t instanceof p}var d={setEventEmitter:function(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter:function(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},p=Phaser.Scene,f=Phaser.Utils.Objects.GetValue,g=function(){function n(i,o){var r;e(this,n),this.parent=i,this.scene=null==(r=i)||"object"!==t(r)?null:u(r)?r:r.scene&&u(r.scene)?r.scene:r.parent&&r.parent.scene&&u(r.parent.scene)?r.parent.scene:void 0,this.isShutdown=!1,this.setEventEmitter(f(o,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}return i(n,[{key:"shutdown",value:function(){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}},{key:"destroy",value:function(t){this.shutdown(t)}},{key:"onSceneDestroy",value:function(){this.destroy(!0)}},{key:"onParentDestroy",value:function(t,e){this.destroy(e)}}]),n}();Object.assign(g.prototype,d);var y=Phaser.Utils.Objects.GetValue,v=function(){o(n,g);var t=h(n);function n(i,o){var r;return e(this,n),(r=t.call(this,i,o))._enable=void 0,i.setInteractive(y(o,"inputConfig",void 0)),r.resetFromJSON(o),r.boot(),r}return i(n,[{key:"resetFromJSON",value:function(t){return this.pointer=void 0,this.lastClickTime=void 0,this.setEnable(y(t,"enable",!0)),this.setMode(y(t,"mode",1)),this.setClickInterval(y(t,"clickInterval",100)),this.setDragThreshold(y(t,"threshold",void 0)),this}},{key:"boot",value:function(){var t=this.parent;t.on("pointerdown",this.onPress,this),t.on("pointerup",this.onRelease,this),t.on("pointerout",this.onPointOut,this),t.on("pointermove",this.onMove,this)}},{key:"shutdown",value:function(t){this.isShutdown||(this.pointer=null,l(r(n.prototype),"shutdown",this).call(this,t))}},{key:"enable",get:function(){return this._enable},set:function(t){if(this._enable!==t){t||this.cancel();var e=(this._enable=t)?"enable":"disable";this.emit(e,this,this.parent)}}},{key:"setEnable",value:function(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function(){return this.setEnable(!this.enable),this}},{key:"setMode",value:function(t){return"string"==typeof t&&(t=m[t]),this.mode=t,this}},{key:"setClickInterval",value:function(t){return this.clickInterval=t,this}},{key:"setDragThreshold",value:function(t){return this.dragThreshold=t,this}},{key:"onPress",value:function(t,e,n,i){void 0===this.pointer&&(this.pointer=t,0===this.mode&&this.click(t.downTime,t,i))}},{key:"onRelease",value:function(t,e,n,i){this.pointer===t&&(1===this.mode&&this.click(t.upTime,t,i),this.pointer=void 0)}},{key:"onPointOut",value:function(t){this.pointer===t&&this.cancel()}},{key:"onMove",value:function(t){this.pointer===t&&void 0!==this.dragThreshold&&t.getDistance()>=this.dragThreshold&&this.cancel()}},{key:"click",value:function(t,e,n){if(!this.enable)return this;if(void 0===t)return this.emit("click",this,this.parent,e,n),this;this.pointer=void 0;var i=this.lastClickTime;return void 0!==i&&t-i<=this.clickInterval||(this.lastClickTime=t,this.emit("click",this,this.parent,e,n)),this}},{key:"cancel",value:function(){return this.pointer=void 0,this}}]),n}(),m={press:0,pointerdown:0,release:1,pointerup:1};return function(){o(n,Phaser.Plugins.BasePlugin);var t=h(n);function n(i){return e(this,n),t.call(this,i)}return i(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t,e){return new v(t,e)}}]),n}()},"object"==s(e)?t.exports=r():void 0===(o="function"==typeof(i=r)?i.call(e,n,e,t):i)||(t.exports=o)},2440:function(t,e,n){var i,o,r;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}r=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i,o,a=r(t);if(e){var h=r(this).constructor;n=Reflect.construct(a,arguments,h)}else n=a.apply(this,arguments);return i=this,!(o=n)||"object"!=s(o)&&"function"!=typeof o?c(i):o}}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=l(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function d(t,e,n,i){return(d="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,i){var o,r,s,a,c=l(t,e);if(c){if((o=Object.getOwnPropertyDescriptor(c,e)).set)return o.set.call(i,n),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(i,e)){if(!o.writable)return!1;o.value=n,Object.defineProperty(i,e,o)}else a=n,(s=e)in(r=i)?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a;return!0})(t,e,n,i)}function p(t,e,n,i,o){if(!d(t,e,n,i||t)&&o)throw new Error("failed to set property");return n}function f(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var y=Phaser.Math.Vector3,v=Phaser.Math.Matrix4,m=new y,b=new y,_=new v,C=Phaser.GameObjects.Mesh,w=Phaser.Utils.Objects.IsPlainObject,k=Phaser.Utils.Objects.GetValue,S=Phaser.Geom.Mesh.GenerateGridVerts,E=Phaser.Math.RadToDeg,O=Phaser.Math.DegToRad,P=1+1/Math.sin(O(45)),T=function(){o(n,C);var t=h(n);function n(i,o,r,s,a,c){var h;e(this,n),w(o)&&(o=k(c=o,"x",0),r=k(c,"y",0),s=k(c,"key",null),a=k(c,"frame",null)),(h=t.call(this,i,o,r,s,a)).type="rexPerspectiveImage",h.setSizeToFrame(),h.resetPerspective(),h.panZ(P),h.hideCCW=k(c,"hideCCW",!0);var l=k(c,"gridWidth",32),u=k(c,"girdHeight",l);return h.resetVerts(l,u),h}return i(n,[{key:"resetPerspective",value:function(){return this.setPerspective(this.width,this.height,45),this}},{key:"resetVerts",value:function(t,e){if(void 0!==t&&(this.girdWidth=t),void 0!==e&&(this.girdHeight=e),this.clear(),this.dirtyCache[9]=-1,0===this.width||0===this.height)return this;var n=this.frame.cutWidth,i=this.frame.cutHeight;return S({mesh:this,texture:this.texture.key,frame:this.frame.name,width:n/this.height,height:i/this.height,widthSegments:Math.ceil(n/this.girdWidth),heightSegments:Math.ceil(i/this.girdHeight),flipY:this.frame.source.isRenderTexture}),this}},{key:"syncSize",value:function(){return this.setSizeToFrame(),this.resetPerspective(),this.resetVerts(),this}},{key:"rotationX",get:function(){return this.modelRotation.x},set:function(t){this.modelRotation.x=t}},{key:"angleX",get:function(){return E(this.rotationX)},set:function(t){this.rotationX=O(t)}},{key:"rotationY",get:function(){return this.modelRotation.y},set:function(t){this.modelRotation.y=t}},{key:"angleY",get:function(){return E(this.rotationY)},set:function(t){this.rotationY=O(t)}},{key:"rotationZ",get:function(){return this.modelRotation.z},set:function(t){this.modelRotation.z=t}},{key:"angleZ",get:function(){return E(this.rotationZ)},set:function(t){this.rotationZ=O(t)}},{key:"transformVerts",value:function(t,e,n,i,o,r){return function(t,e,n,i,o,r,s){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=0),m.set(e,n,i),b.set(o,r,s),_.fromRotationXYTranslation(b,m,!0);for(var a=0,c=t.vertices.length;a<c;a++)t.vertices[a].transformMat4(_)}(this,t,e,n,i,o,r),this}},{key:"forceUpdate",value:function(){return this.dirtyCache[10]=1,this}}]),n}();function A(t,e,n,i,o){var r=new T(this.scene,t,e,n,i,o);return this.scene.add.existing(r),r}var x=Phaser.Utils.Objects.GetAdvancedValue,R=Phaser.GameObjects.BuildGameObject;function M(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=x(t,"key",null),i=x(t,"frame",null),o=new T(this.scene,0,0,n,i,t);return R(this.scene,o,t),o}var D=Phaser.GameObjects.RenderTexture,I=Phaser.Utils.Objects.IsPlainObject,L=Phaser.Utils.Objects.GetValue,N=function(){o(n,T);var t=h(n);function n(i,o,r,s,a,c){var h;e(this,n),I(o)&&(o=L(c=o,"x",0),r=L(c,"y",0),s=L(c,"width",32),a=L(c,"height",32));var l=new D(i,o,r,s,a).setOrigin(.5);return(h=t.call(this,i,o,r,l.texture.key,null,c)).type="rexPerspectiveRenderTexture",h.rt=l,h}return i(n,[{key:"destroy",value:function(t){u(r(n.prototype),"destroy",this).call(this,t),this.rt.destroy(t),this.rt=null}}]),n}();function B(t,e,n,i,o){var r=new N(this.scene,t,e,n,i,o);return this.scene.add.existing(r),r}var j=Phaser.Utils.Objects.GetAdvancedValue,G=Phaser.GameObjects.BuildGameObject;function H(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=j(t,"x",0),i=j(t,"y",0),o=j(t,"width",32),r=j(t,"height",32),s=new N(this.scene,n,i,o,r,t);return G(this.scene,s,t),s}var F=Phaser.GameObjects.Zone,V=Phaser.Utils.Array.Add,z=Phaser.Utils.Array.Remove,U=function(){o(n,F);var t=h(n);function n(i,o,r,s,a){var c;return e(this,n),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=1),void 0===a&&(a=1),(c=t.call(this,i,o,r,s,a)).children=[],c}return i(n,[{key:"destroy",value:function(t){if(this.scene){if(t)for(var e,i=this.children.length-1;0<=i;i--)(e=this.children[i]).parentContainer||e.displayList||e.destroy(t);this.clear(!t),u(r(n.prototype),"destroy",this).call(this,t)}}},{key:"contains",value:function(t){return-1!==this.children.indexOf(t)}},{key:"add",value:function(t){var e=this;return V(this.children,t,0,(function(t){t.once("destroy",e.onChildDestroy,e)}),this),this}},{key:"remove",value:function(t,e){var n=this;return z(this.children,t,(function(t){t.off("destroy",n.onChildDestroy,n),e&&t.destroy()})),this}},{key:"onChildDestroy",value:function(t){this.remove(t,!1)}},{key:"clear",value:function(t){for(var e,n=0,i=this.children.length;n<i;n++)(e=this.children[n]).off("destroy",this.onChildDestroy,this),t&&e.destroy();return this.children.length=0,this}}]),n}(),W=Phaser.GameObjects.Components;function Y(t){var e;return t.hasOwnProperty("rexContainer")&&(e=t.rexContainer.parent),e}function X(t){return t.hasOwnProperty("rexContainer")||(t.rexContainer={}),t.rexContainer}function q(t){return this.setParent(t),this.resetChildState(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),et.call(this,t),this}function K(t){this.setParent(t);var e=X(t);return e.x=t.x,e.y=t.y,e.rotation=t.rotation,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.flipX=t.flipX,e.flipY=t.flipY,e.alpha=t.alpha,e.visible=t.visible,e.active=t.active,this.updateChildPosition(t).updateChildAlpha(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),et.call(this,t),this}function Z(t,e){return t===e?1:t/e}function J(t){return"[object Array]"===Object.prototype.toString.call(t)}function $(t,e){if(0===t.length)return t;void 0===e&&(e=!1);var n=t[0].scene.sys.displayList;return n.depthSort(),e?t.sort((function(t,e){return n.getIndex(e)-n.getIndex(t)})):t.sort((function(t,e){return n.getIndex(t)-n.getIndex(e)})),t}function Q(t){var e=this.getAllChildren([this]);return $(e),t.add(e),this}Phaser.Class.mixin(U,[W.Alpha,W.Flip]);var tt={setParent:function(t,e){void 0===e&&(e=this);var n=X(t);return e?(n.parent=e,n.self=t):(n.parent=null,n.self=null),this},getParent:function(t){return void 0===t&&(t=this),Y(t)},getTopmostParent:function(t){return void 0===t&&(t=this),function(t){for(var e=Y(t);e;)e=Y(t=e);return t}(t)}},et=U.prototype.add,nt={add:function(t){return Array.isArray(t)?this.addMultiple(t):q.call(this,t),this},addMultiple:function(t){for(var e=0,n=t.length;e<n;e++)q.call(this,t[e]);return this},addLocal:function(t){return Array.isArray(t)?this.addMultiple(t):K.call(this,t),this},addLocalMultiple:function(t){for(var e=0,n=t.length;e<n;e++)K.call(this,t[e]);return this}},it=U.prototype.remove,ot=U.prototype.clear,rt={remove:function(t,e){return Y(t)!==this||(this.setParent(t,null),it.call(this,t,e)),this},clear:function(t){for(var e=0,n=this.children.length;e<n;e++)this.setParent(this.children[e],null);return ot.call(this,t),this}},st={getLocalState:function(t){return X(t)},resetChildState:function(t){return this.resetChildPositionState(t).resetChildVisibleState(t).resetChildAlphaState(t).resetChildActiveState(t),this},resetChildrenState:function(t){for(var e=0,n=t.length;e<n;e++)this.resetChildState(t[e]);return this},syncProperties:function(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},at=Phaser.Math.RotateAround,ct={worldToLocal:function(t){return t.x-=this.x,t.y-=this.y,at(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t},localToWorld:function(t){return t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t.x*=this.scaleX,t.y*=this.scaleY,at(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}},ht={updateChildPosition:function(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var e=X(t),n=e.parent;return t.x=e.x,t.y=e.y,n.localToWorld(t),t.scaleX=e.scaleX*n.scaleX,t.scaleY=e.scaleY*n.scaleY,void 0!==t.flipX&&(t.flipX=n.flipX?!e.flipX:e.flipX,t.flipY=n.flipY?!e.flipY:e.flipY),t.rotation=e.rotation+n.rotation,t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this},syncPosition:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState:function(t){var e=X(t),n=e.parent;return e.x=t.x,e.y=t.y,n.worldToLocal(e),e.scaleX=Z(t.scaleX,n.scaleX),e.scaleY=Z(t.scaleY,n.scaleY),void 0!==t.flipX&&(e.flipX=t.flipX,e.flipY=t.flipY),e.rotation=t.rotation-n.rotation,this},setChildPosition:function(t,e,n){return t.x=e,t.y=n,this.resetChildPositionState(t),this},setChildLocalPosition:function(t,e,n){var i=X(t);return i.x=e,i.y=n,this.updateChildPosition(t),this},resetLocalPositionState:function(){var t=X(this).parent;return t&&t.resetChildPositionState(this),this}},lt={updateChildRotation:function(t){var e=X(t),n=e.parent;return t.rotation=n.rotation+e.rotation,this},syncRotation:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState:function(t){var e=X(t),n=e.parent;return e.rotation=t.rotation-n.rotation,this},setChildRotation:function(t,e){return t.rotation=e,this.resetChildRotationState(t),this},setChildLocalRotation:function(t,e){return X(t).rotation=e,this.updateChildRotation(t),this},resetLocalRotationState:function(){var t=X(this).parent;return t&&t.resetChildRotationState(this),this}},ut={updateChildScale:function(t){var e=X(t),n=e.parent;return t.scaleX=n.scaleX*e.scaleX,t.scaleY=n.scaleY*e.scaleY,this},syncScale:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState:function(t){var e=X(t),n=e.parent;return e.scaleX=Z(t.scaleX,n.scaleX),e.scaleY=Z(t.scaleY,n.scaleY),this},setChildScale:function(t,e,n){return void 0===n&&(n=e),t.scaleX=e,t.scaleY=n,this.resetChildScaleState(t),this},setChildLocalScale:function(t,e,n){void 0===n&&(n=e);var i=X(t);return i.scaleX=e,i.scaleY=n,this.updateChildScale(t),this},setChildDisplaySize:function(t,e,n){return t.setDisplaySize(e,n),this.resetChildScaleState(t),this},resetLocalScaleState:function(){var t=X(this).parent;return t&&t.resetChildScaleState(this),this}},dt={updateChildVisible:function(t){var e=X(t),n=e.parent,i=!e.hasOwnProperty("maskVisible")||e.maskVisible;return t.visible=n.visible&&e.visible&&i,this},syncVisible:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState:function(t){var e=X(t);return e.hasOwnProperty("maskVisible")&&delete e.maskVisible,e.visible=t.visible,this},setChildVisible:function(t,e){return this.setChildLocalVisible(t,e),this},setChildLocalVisible:function(t,e){return void 0===e&&(e=!0),X(t).visible=e,this.updateChildVisible(t),this},setChildMaskVisible:function(t,e){return void 0===e&&(e=!0),X(t).maskVisible=e,this.updateChildVisible(t),this},resetLocalVisibleState:function(){var t=X(this).parent;return t&&t.resetChildVisibleState(this),this}},pt={updateChildAlpha:function(t){var e=X(t),n=e.parent;return t.alpha=n.alpha*e.alpha,this},syncAlpha:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState:function(t){var e=X(t),n=e.parent;return e.alpha=Z(t.alpha,n.alpha),this},setChildAlpha:function(t,e){return t.alpha=e,this.resetChildAlphaState(t),this},setChildLocalAlpha:function(t,e){return X(t).alpha=e,this.updateChildAlpha(t),this},resetLocalAlphaState:function(){var t=X(this).parent;return t&&t.resetChildAlphaState(this),this}},ft={updateChildActive:function(t){var e=X(t),n=e.parent;return t.active=n.active&&e.active,this},syncActive:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState:function(t){return X(t).active=t.active,this},setChildActive:function(t,e){return t.active=e,this.resetChildActiveState(t),this},setChildLocalActive:function(t,e){return void 0===e&&(e=!0),X(t).active=e,this.updateChildActive(t),this},resetLocalActiveState:function(){var t=X(this).parent;return t&&t.resetChildActiveState(this),this}},gt={updateChildScrollFactor:function(t){var e=X(t).parent;return t.setScrollFactor(e.scrollFactorX,e.scrollFactorY),this},syncScrollFactor:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},yt=Phaser.Utils.Array,vt={getChildren:function(t){if(t)for(var e=0,n=this.children.length;e<n;e++)t.push(this.children[e]);else t=this.children;return t},getAllChildren:function(t){void 0===t&&(t=[]);for(var e,n=this.children,i=0,o=n.length;i<o;i++)e=n[i],t.push(e),e.hasOwnProperty("isRexContainerLite")&&t.push.apply(t,f(e.getAllChildren()));return t},getAllVisibleChildren:function(t){void 0===t&&(t=[]);for(var e,n=this.children,i=0,o=n.length;i<o;i++)(e=n[i]).visible&&(t.push(e),e.hasOwnProperty("isRexContainerLite")&&t.push.apply(t,f(e.getAllVisibleChildren())));return t},contains:function(t){var e=Y(t);return!!e&&(e===this||this.contains(e))},getByName:function(t,e){if(e){for(var n,i,o=[this];o.length;)for(var r=0,s=(n=o.shift()).children.length;r<s;r++){if((i=n.children[r]).name===t)return i;i.isRexContainerLite&&o.push(i)}return null}return yt.GetFirst(this.children,"name",t)},getRandom:function(t,e){return yt.GetRandom(this.children,t,e)},getFirst:function(t,e,n,i){return yt.GetFirstElement(this.children,t,e,n,i)},getAll:function(t,e,n,i){return yt.GetAll(this.children,t,e,n,i)},count:function(t,e,n,i){return yt.CountAllMatching(this.children,t,e,n,i)},swap:function(t,e){return yt.Swap(this.children,t,e),this},setAll:function(t,e,n,i){return yt.SetAll(this.children,t,e,n,i),this}},mt={tweenChild:function(t){var e=t.targets;J(e)||(e=[e]);for(var n,i,o=[],r=0,s=e.length;r<s;r++)(i=e[r]).hasOwnProperty("rexContainer")&&(n=i.scene,o.push(i.rexContainer));if(n){t.targets=o;var a=n.tweens.add(t);return a.on("update",(function(t,e,n){var i=n.parent,o=n.self;switch(e){case"x":case"y":i.updateChildPosition(o);break;case"angle":case"rotation":i.updateChildRotation(o);break;case"scaleX":case"scaleY":i.updateChildScale(o);break;case"alpha":i.updateChildAlpha(o)}})),a}},tween:function(t){var e=this.scene;return t.targets||(t.targets=this),e.tweens.add(t)}},bt={addToLayer:Q,addToContainer:Q},_t=Phaser.Math.RotateAround,Ct={changeOrigin:function(t,e){this.syncChildrenEnable=!1,function(t,e,n){void 0===n&&(n=e);var i={x:(e-t.originX)*t.displayWidth,y:(n-t.originY)*t.displayHeight};_t(i,0,0,t.rotation),t.setOrigin(e,n),t.setPosition(t.x+i.x,t.y+i.y)}(this,t,e),this.syncChildrenEnable=!0;for(var n=this.getAllChildren(),i=0,o=n.length;i<o;i++)this.resetChildPositionState(n[i]);return this}};Object.assign(Ct,tt,nt,rt,st,ct,ht,lt,ut,dt,pt,ft,gt,{updateChildMask:function(t){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this},syncMask:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}},{setDepth:function(t,e){if(this.depth=t,!e&&this.children)for(var n=this.getAllChildren(),i=0,o=n.length;i<o;i++)n[i].depth=t;return this},swapDepth:function(t){var e=this.depth,n=t.depth;return this.setDepth(n),t.setDepth(e),this},incDepth:function(t){if(this.depth+=t,this.children)for(var e=this.getAllChildren(),n=0,i=e.length;n<i;n++)e[n].depth+=t;return this}},vt,mt,bt);var wt=function(){o(n,U);var t=h(n);function n(i,o,r,s,a,c){var h;return e(this,n),(h=t.call(this,i,o,r,s,a)).type="rexContainerLite",h.isRexContainerLite=!0,h.syncChildrenEnable=!0,h._active=!0,h._mask=null,h._scrollFactorX=1,h._scrollFactorY=1,c&&h.add(c),h}return i(n,[{key:"destroy",value:function(t){this.scene&&(this.syncChildrenEnable=!1,u(r(n.prototype),"destroy",this).call(this,t))}},{key:"resize",value:function(t,e){return this.setSize(t,e),this}},{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.syncPosition())}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.syncPosition())}},{key:"rotation",get:function(){return u(r(n.prototype),"rotation",this)},set:function(t){this.rotation!==t&&(p(r(n.prototype),"rotation",t,this,!0),this.syncPosition())}},{key:"scaleX",get:function(){return u(r(n.prototype),"scaleX",this)},set:function(t){this.scaleX!==t&&(p(r(n.prototype),"scaleX",t,this,!0),this.syncPosition())}},{key:"scaleY",get:function(){return u(r(n.prototype),"scaleY",this)},set:function(t){this.scaleY!==t&&(p(r(n.prototype),"scaleY",t,this,!0),this.syncPosition())}},{key:"flipX",get:function(){return u(r(n.prototype),"flipX",this)},set:function(t){u(r(n.prototype),"flipX",this)!==t&&(p(r(n.prototype),"flipX",t,this,!0),this.syncPosition())}},{key:"flipY",get:function(){return u(r(n.prototype),"flipY",this)},set:function(t){u(r(n.prototype),"flipY",this)!==t&&(p(r(n.prototype),"flipY",t,this,!0),this.syncPosition())}},{key:"visible",get:function(){return u(r(n.prototype),"visible",this)},set:function(t){u(r(n.prototype),"visible",this)!==t&&(p(r(n.prototype),"visible",t,this,!0),this.syncVisible())}},{key:"alpha",get:function(){return u(r(n.prototype),"alpha",this)},set:function(t){u(r(n.prototype),"alpha",this)!==t&&(p(r(n.prototype),"alpha",t,this,!0),this.syncAlpha())}},{key:"active",get:function(){return this._active},set:function(t){this._active!==t&&(this._active=t,this.syncActive())}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask!==t&&(this._mask=t,this.syncMask())}},{key:"scrollFactorX",get:function(){return this._scrollFactorX},set:function(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}},{key:"scrollFactorY",get:function(){return this._scrollFactorY},set:function(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}},{key:"list",get:function(){return this.children}}]),n}();function kt(t,e,n,i){if(J(t))for(var o=0,r=t.length;o<r;o++){var s=t[o];if((!i||s)&&(n?e.call(n,s,o,t):e(s,o,t)))return}else for(var a in t)if(s=t[a],(!i||s)&&(n?e.call(n,s,a,t):e(s,a,t)))return}function St(t,e){var n;return void 0===e&&(e=Rt),xt(e)?(e.hasOwnProperty("type")||(e.hasOwnProperty("key")?e.type="image":e.hasOwnProperty("width")&&(e.type="rendertexture")),n=new Mt[e.type](t,e),t.add.existing(n)):n=e,n}function Et(t,e,n){var i;if(void 0===n){var o;i=[];for(var r=0,s=e.length;r<s;r++)a=(o=e[r])?St(t,o):null,i.push(a)}else{var a,c;for(i={},r=0,s=n.length;r<s;r++)c=n[r],a=e.hasOwnProperty(c)?St(t,e[c]):null,i[c]=a}return i}function Ot(t){return t instanceof Lt}Object.assign(wt.prototype,Ct);var Pt=Phaser.Math.RadToDeg,Tt=Phaser.Math.DegToRad,At=function(){o(n,wt);var t=h(n);function n(i,o,r,s,a,h){var l;return e(this,n),(l=t.call(this,i,o,r,s,a)).faces=h,kt(h,(function(t){t.setPosition(o,r),this.add(t)}),c(l),!0),l}return i(n,[{key:"rotationX",get:function(){return 0},set:function(){}},{key:"angleX",get:function(){return Pt(this.rotationX)},set:function(t){this.rotationX=Tt(t)}},{key:"rotationY",get:function(){return 0},set:function(){}},{key:"angleY",get:function(){return Pt(this.rotationY)},set:function(t){this.rotationY=Tt(t)}},{key:"rotationZ",get:function(){return 0},set:function(){}},{key:"angleZ",get:function(){return Pt(this.rotationZ)},set:function(t){this.rotationZ=Tt(t)}},{key:"setDebug",value:function(t,e){return kt(this.faces,(function(n){n.setDebug(t,e)}),null,!0),this}},{key:"panX",value:function(t){return kt(this.faces,(function(e){e.panX(t)}),null,!0),this}},{key:"panY",value:function(t){return kt(this.faces,(function(e){e.panY(t)}),null,!0),this}},{key:"panZ",value:function(t){return kt(this.faces,(function(e){e.panZ(t)}),null,!0),this}},{key:"transformVerts",value:function(t,e,n,i,o,r){return kt(this.faces,(function(s){s.transformVerts(t,e,n,i,o,r)}),null,!0),this}},{key:"forEachFace",value:function(t,e,n){return kt(this.faces,t,e,n),this}}]),n}(),xt=Phaser.Utils.Objects.IsPlainObject,Rt={key:"__WHITE"},Mt={image:T,rendertexture:N},Dt=(0,Phaser.Math.DegToRad)(180),It={setEventEmitter:function(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter:function(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},Lt=Phaser.Scene,Nt=Phaser.Utils.Objects.GetValue,Bt=function(){function n(i,o){var r;e(this,n),this.parent=i,this.scene=null==(r=i)||"object"!==t(r)?null:Ot(r)?r:r.scene&&Ot(r.scene)?r.scene:r.parent&&r.parent.scene&&Ot(r.parent.scene)?r.parent.scene:void 0,this.isShutdown=!1,this.setEventEmitter(Nt(o,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}return i(n,[{key:"shutdown",value:function(){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}},{key:"destroy",value:function(t){this.shutdown(t)}},{key:"onSceneDestroy",value:function(){this.destroy(!0)}},{key:"onParentDestroy",value:function(t,e){this.destroy(e)}}]),n}();Object.assign(Bt.prototype,It);var jt=function(){o(n,Bt);var t=h(n);function n(i,o){return e(this,n),void 0===o&&(o={}),o.hasOwnProperty("eventEmitter")||(o.eventEmitter=!1),t.call(this,i,o)}return i(n,[{key:"shutdown",value:function(t){this.isShutdown||(this.stop(),u(r(n.prototype),"shutdown",this).call(this,t))}},{key:"start",value:function(t){return this.isRunning||(this.tween=this.scene.tweens.add(t).on("complete",this.complete,this),!1===this.getEventEmitter()&&this.setEventEmitter(this.tween)),this}},{key:"restart",value:function(t){return this.stop().start(t),this}},{key:"stop",value:function(){return this.tween&&(this.getEventEmitter()===this.tween&&this.setEventEmitter(!1),this.tween.remove(),this.tween=void 0),this}},{key:"pause",value:function(){return this.tween&&this.tween.pause(),this}},{key:"resume",value:function(){return this.tween&&this.tween.resume(),this}},{key:"complete",value:function(){return this.stop(),this.getEventEmitter()&&this.emit("complete"),this}},{key:"isRunning",get:function(){return!!this.tween}}]),n}(),Gt=Phaser.Utils.Objects.GetValue,Ht=Phaser.Utils.Objects.GetAdvancedValue,Ft=function(){o(n,jt);var t=h(n);function n(i,o){var r;return e(this,n),(r=t.call(this,i,{eventEmitter:!0})).resetFromJSON(o),r}return i(n,[{key:"resetFromJSON",value:function(t){return this.setDelay(Ht(t,"delay",0)),this.setDuration(Ht(t,"duration",1e3)),this.setEase(Gt(t,"ease","Cubic")),this.setFrontToBackDirection(Gt(t,"frontToBack",0)),this.setBackToFrontDirection(Gt(t,"backToFront",1)),this}},{key:"setDelay",value:function(t){return this.delay=t,this}},{key:"setDuration",value:function(t){return this.duration=t,this}},{key:"setEase",value:function(t){return void 0===t&&(t="Linear"),this.ease=t,this}},{key:"setFrontToBackDirection",value:function(t){return"string"==typeof t&&(t=Vt[t]),this.endAngleFB=0===t?180:-180,this}},{key:"setBackToFrontDirection",value:function(t){return"string"==typeof t&&(t=Vt[t]),this.endAngleBF=0===t?-180:180,this}},{key:"start",value:function(){if(this.isRunning)return this;var t={targets:this.parent,delay:this.delay,duration:this.duration,ease:this.ease,repeat:0},e=0===this.parent.orientation?"angleY":"angleX",i=0===this.parent.face;return t[e]={start:i?0:this.endAngleBF,to:i?this.endAngleFB:0},u(r(n.prototype),"start",this).call(this,t),this}},{key:"flip",value:function(t){if(this.isRunning)return this;void 0!==t&&this.setDuration(t),this.start();var e=this.parent.currentFaceIndex;return this.parent.currentFaceIndex=0===e?1:0,this}},{key:"flipRight",value:function(t){return 0===this.parent.currentFaceIndex?this.setFrontToBackDirection(0):this.setBackToFrontDirection(0),this.flip(t),this}},{key:"flipLeft",value:function(t){return 0===this.parent.currentFaceIndex?this.setFrontToBackDirection(1):this.setBackToFrontDirection(1),this.flip(t),this}}]),n}(),Vt={right:0,"left-to-right":0,left:1,"right-to-left":1},zt=Phaser.Utils.Objects.IsPlainObject,Ut=Phaser.Utils.Objects.GetValue,Wt=["back","front"],Yt=function(){o(n,At);var t=h(n);function n(i,o,r,s){var a;e(this,n),zt(o)&&(o=Ut(s=o,"x",0),r=Ut(s,"y",0));var h=Et(i,s,Wt),l=h.back,u=h.front,d=Ut(s,"width"),p=Ut(s,"height");if(void 0===d||void 0===p){if(void 0===d){var f=u?u.width:0,g=l?l.width:0;d=Math.max(f,g)}if(void 0===p){var y=u?u.height:0,v=l?l.height:0;p=Math.max(y,v)}}(a=t.call(this,i,o,r,d,p,h)).type="rexPerspectiveCard",a.frontFaceRotationX=void 0,a.frontFaceRotationY=void 0,a.frontFaceRotationZ=void 0,kt(h,(function(t,e){this["".concat(e,"Face")]=t}),c(a));var m,b,_=Ut(s,"flip",void 0);return!1!==_&&(a.flip=new Ft(c(a),_)),a.setOrientation(Ut(s,"orientation",0)),m=c(a),(b=h.back)&&(0===m.orientation?b.transformVerts(0,0,0,0,Dt,0):b.transformVerts(0,0,0,Dt,0,0)),a.setFace(Ut(s,"face",0)),a}return i(n,[{key:"rotationX",get:function(){return this.frontFaceRotationX},set:function(t){this.frontFaceRotationX!==t&&(this.frontFaceRotationX=t,kt(this.faces,(function(e){e.rotationX=t}),null,!0))}},{key:"rotationY",get:function(){return this.frontFaceRotationY},set:function(t){this.frontFaceRotationY!==t&&(this.frontFaceRotationY=t,kt(this.faces,(function(e){e.rotationY=t}),null,!0))}},{key:"rotationZ",get:function(){return this.frontFaceRotationZ},set:function(t){this.frontFaceRotationZ!==t&&(this.frontFaceRotationZ=t,kt(this.faces,(function(e){e.rotationZ=t}),null,!0))}},{key:"setOrientation",value:function(t){return"string"==typeof t&&(t=Xt[t]),this.orientation=t,this}},{key:"face",get:function(){return this.currentFaceIndex},set:function(t){"string"==typeof t&&(t=qt[t]);var e=1===(this.currentFaceIndex=t)?180:0;0===this.orientation?this.angleY=e:this.angleX=e}},{key:"setFace",value:function(t){return this.face=t,this}},{key:"toggleFace",value:function(){var t=0===this.face?1:0;return this.setFace(t),this}}]),n}(),Xt={x:0,horizontal:0,h:0,y:1,vertical:1,v:1},qt={front:0,back:1};function Kt(t,e,n){var i=new Yt(this.scene,t,e,n);return this.scene.add.existing(i),i}var Zt=Phaser.GameObjects.BuildGameObject;function Jt(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=new Yt(this.scene,0,0,t);return Zt(this.scene,n,t),n}function $t(t,e){for(var n=0,i=t.length;n<i;n++)if(face&&face.name===e)return n;return-1}var Qt=Phaser.Utils.Objects.GetValue,te=Phaser.Utils.Objects.GetAdvancedValue,ee=Phaser.Math.RadToDeg,ne=Phaser.Math.DegToRad,ie=Phaser.Math.Angle.WrapDegrees,oe=Phaser.Math.Angle.ShortestBetween,re=Phaser.Math.Wrap,se=function(){o(n,jt);var t=h(n);function n(i,o){var r;return e(this,n),(r=t.call(this,i,{eventEmitter:!0})).resetFromJSON(o),r}return i(n,[{key:"resetFromJSON",value:function(t){return this.setDelay(te(t,"delay",0)),this.setDuration(te(t,"duration",1e3)),this.setEase(Qt(t,"ease","Cubic")),this}},{key:"setDelay",value:function(t){return this.delay=t,this}},{key:"setDuration",value:function(t){return this.duration=t,this}},{key:"setEase",value:function(t){return void 0===t&&(t="Linear"),this.ease=t,this}},{key:"start",value:function(t){if(this.isRunning)return this;var e={targets:this.parent,rotationY:"+=".concat(t),delay:this.delay,duration:this.duration,ease:this.ease,repeat:0};return u(r(n.prototype),"start",this).call(this,e),this}},{key:"to",value:function(t,e){if(this.isRunning)return this;var n=this.parent;"string"==typeof t&&-1===(t=$t(n.faces,t))&&(t=0),t=re(t,0,n.faces.length),void 0!==e&&this.setDuration(e);var i=ie(ee(n.rotationY)),o=ie(ee((n.rtl?1:-1)*n.faceAngle*t)),r=oe(i,o);return this.start(ne(r)),n.currentFaceIndex=t,this}},{key:"toNext",value:function(t){var e=this.parent.currentFaceIndex+1;return this.to(e,t),this}},{key:"toPrevious",value:function(t){var e=this.parent.currentFaceIndex-1;return this.to(e,t),this}},{key:"toRight",value:function(t){return this.parent.rtl?this.toPrevious(t):this.toNext(t),this}},{key:"toLeft",value:function(t){return this.parent.rtl?this.toNext(t):this.toPrevious(t),this}}]),n}(),ae=Phaser.Utils.Objects.IsPlainObject,ce=Phaser.Utils.Objects.GetValue,he=Phaser.Math.DegToRad,le=Phaser.Math.RadToDeg,ue=Phaser.Math.Angle.WrapDegrees,de=Phaser.Math.Linear,pe=Phaser.Math.Wrap,fe=function(){o(n,At);var t=h(n);function n(i,o,r,s){var a;e(this,n),ae(o)&&(o=ce(s=o,"x",0),r=ce(s,"y",0));var h=ce(s,"faces",void 0),l=Et(i,h=h||[]),u=function(t){for(var e,n=0,i=t.length;n<i&&!(e=t[n]);n++);return e}(l),d=ce(s,"width"),p=ce(s,"height");void 0===d&&(d=u?u.width:0),void 0===p&&(p=u?u.height:0),(a=t.call(this,i,o,r,d,p,l)).type="rexPerspectiveCarousel",a.face0RotationY=void 0;var f=l.length;a.faceAngle=0<f?he(360/l.length):0;var g=ce(s,"faceWidth",void 0);if(void 0===g){var y=ce(s,"faceSpace",0);g=u?u.width+y:0}a.faceWidth=g,a.faceRadius=2<f?g/2/Math.tan(a.faceAngle/2):g/2,function(t,e){if(0!==t.faceWidth){var n=t.faceRadius;kt(e,(function(t){var e=n/t.height;t.transformVerts(0,0,e).panZ(e)}),null,!0)}}(c(a),l);var v=ce(s,"roll",void 0);if(!1!==v){var m=ce(s,"rollClass",se);a.roll=new m(c(a),v)}return a.rtl=ce(s,"rtl",!1),a.zStart=ce(s,"z",1),a.zEnd=ce(s,"zEnd",a.zStart-1),a.setFace(ce(s,"face",0)),a}return i(n,[{key:"rotationY",get:function(){return this.face0RotationY},set:function(t){if(this.face0RotationY!==t){this.face0RotationY=t;var e=this.faceAngle,n=this.zStart,i=this.zEnd,o=this.rtl?-1:1;kt(this.faces,(function(r,s){var a=t+o*e*s;r.rotationY=a;var c=Math.abs(ue(le(a))),h=de(n,i,c/180);r.setDepth(h)}),null,!0)}}},{key:"face",get:function(){return this.currentFaceIndex},set:function(t){"string"==typeof t&&-1===(t=$t(this.faces,t))&&(t=0),t=pe(t,0,this.faces.length),this.currentFaceIndex=t,this.rotationY=(this.rtl?1:-1)*this.faceAngle*t}},{key:"setFace",value:function(t){return this.face=t,this}}]),n}();function ge(t,e,n){var i=new fe(this.scene,t,e,n);return this.scene.add.existing(i),i}var ye=Phaser.GameObjects.BuildGameObject;function ve(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=new fe(this.scene,0,0,t);return ye(this.scene,n,t),n}var me=function(){o(n,se);var t=h(n);function n(){return e(this,n),t.apply(this,arguments)}return i(n,[{key:"toNext",value:function(t){var e=this.parent;return!e.repeat&&e.isLastImage||this.isRunning||(e.setImageIndex(e.currentImageIndex+1),u(r(n.prototype),"toNext",this).call(this,t).once("complete",e.updateTexture,e)),this}},{key:"toPrevious",value:function(t){var e=this.parent;return!e.repeat&&e.isFirstImage||this.isRunning||(e.setImageIndex(e.currentImageIndex-1),u(r(n.prototype),"toPrevious",this).call(this,t).once("complete",e.updateTexture,e)),this}}]),n}(),be={},_e=Phaser.Utils.Objects.IsPlainObject,Ce=Phaser.Utils.Objects.GetValue,we=Phaser.Math.Wrap,ke=function(){o(n,fe);var t=h(n);function n(i,o,r,s){var a,c,h;e(this,n),_e(o)&&(o=Ce(s=o,"x",0),r=Ce(s,"y",0)),void 0===s&&(s={});var l=Ce(s,"images"),u=function(t,e){if(!e)return null;if(Array.isArray(e)){var n=e[0],i=t.textures.getFrame(n.key,n.frame);be.width=i.cutWidth,be.height=i.cutHeight}else be.width=e.width,be.height=e.height;return be}(i,l);h=u?(c=u.width,u.height):(c=Ce(s,"width"),Ce(s,"height"));for(var d,p=Ce(s,"faceCount",4),f=[],g=0;g<p;g++)d=new N(i,0,0,c,h,s),i.add.existing(d),f.push(d);return s.faces=f,s.rollClass=me,(a=t.call(this,i,o,r,s)).type="rexPerspectiveImageCarousel",a.images=l,a.indexOffsetMap=function(t){for(var e=[0],n=1,i=Math.floor((t-1)/2);n<=i;n++)e.push(n),e.push(-n);return e}(p),a.repeat=Ce(s,"repeat",!0),a.setImageIndex(Ce(s,"index",0)).updateTexture(),a}return i(n,[{key:"setImageIndex",value:function(t){return this.currentImageIndex=we(t,0,this.images.length),this}},{key:"isFirstImage",get:function(){return 0===this.images.length||0===this.currentImageIndex}},{key:"isLastImage",get:function(){return 0===this.images.length||this.currentImageIndex===this.images.length-1}},{key:"updateTexture",value:function(){var t=this.images.length,e=this.faces.length;return this.indexOffsetMap.forEach((function(n){var i=we(this.currentImageIndex+n,0,t),o=we(this.currentFaceIndex+n,0,e),r=this.images[i];this.faces[o].rt.drawFrame(r.key,r.frame)}),this),this}}]),n}();function Se(t,e,n){var i=new ke(this.scene,t,e,n);return this.scene.add.existing(i),i}var Ee=Phaser.GameObjects.BuildGameObject;function Oe(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=new ke(this.scene,t);return Ee(this.scene,n,t),n}function Pe(t){var e=t.gameObjects,n=t.renderTexture;if(0===e.length)return n&&n.setSize(1,1).clear(),n;var i,o,r=Ie(t,"x",void 0),s=Ie(t,"y",void 0),a=Ie(t,"width",void 0),c=Ie(t,"height",void 0),h=Ie(t,"originX",0),l=Ie(t,"originY",0);if(void 0===a||void 0===c||void 0===r||void 0===s){var u=function(t,e){var n;void 0===e?e=new Me:!0===e&&(void 0===Re&&(Re=new Me),e=Re);for(var i=!0,o=0,r=t.length;o<r;o++)(n=t[o]).getBounds&&(xe=n.getBounds(xe),i?(e.setTo(xe.x,xe.y,xe.width,xe.height),i=!1):De(xe,e,e));return e}(e,!0);l=h=void 0!==r&&void 0!==s?(a=2*Math.max(r-u.left,u.right-r),c=2*Math.max(s-u.top,u.bottom-s),.5):(r=u.x,s=u.y,a=u.width,c=u.height,0),i=u.x,o=u.y}else i=r+(0-h)*a,o=s+(0-l)*c;return n?(n.setPosition(r,s),n.width===a&&n.height===c||n.setSize(a,c)):n=e[0].scene.add.renderTexture(r,s,a,c),n.setOrigin(h,l),n.camera.setScroll(i,o),e=$(function(t,e){var n=Array.isArray(t);if(void 0===e?e=n?[]:{}:function(t){if(Array.isArray(t))t.length=0;else for(var e in t)delete t[e]}(e),n){e.length=t.length;for(var i=0,o=t.length;i<o;i++)e[i]=t[i]}else for(var r in t)e[r]=t[r];return e}(e)),n.draw(e),n}function Te(t){return null==t||""===t||0===t.length}function Ae(e,n,i){if("object"===t(e)){if(Te(n)){if(null==i)return;"object"===t(i)&&(e=i)}else{"string"==typeof n&&(n=n.split("."));var o=n.pop();(function(e,n,i){var o=e;if(!Te(n)){var r;"string"==typeof n&&(n=n.split("."));for(var s=0,a=n.length;s<a;s++){var c;null!=o[r=n[s]]&&"object"===t(o[r])||(c={},o[r]=c),o=o[r]}}return o}(e,n))[o]=i}return e}}var xe,Re,Me=Phaser.Geom.Rectangle,De=Phaser.Geom.Rectangle.Union,Ie=Phaser.Utils.Objects.GetValue,Le=wt.prototype.add,Ne=Phaser.Utils.Objects.GetValue,Be=function(){o(n,N);var t=h(n);function n(i,o){var r;e(this,n);var s=i.scene;return r=t.call(this,s,i.x,i.y,1,1,o),s.add.existing(c(r)),r.setVisible(!1),Le.call(i,c(r)),r.visibleSibling=[],r.perspectiveState=!1,r.useParentBounds=Ne(o,"useParentBounds",!1),r.boot(),r}return i(n,[{key:"boot",value:function(){this.rexContainer.parent.once("destroy",this.onParentDestroy,this)}},{key:"destroy",value:function(t){this.scene&&(this.exit(),this.rexContainer.parent.off("destroy",this.onParentDestroy,this),u(r(n.prototype),"destroy",this).call(this,t))}},{key:"onParentDestroy",value:function(t,e){this.destroy(e)}},{key:"enter",value:function(){this.exit();var t=this.rexContainer.parent;return Pe({gameObjects:t.getAllVisibleChildren(),renderTexture:this.rt,x:this.x,y:this.y,width:this.useParentBounds?t.displayWidth:void 0,height:this.useParentBounds?t.displayHeighth:void 0,originX:this.useParentBounds?t.originX:void 0,originY:this.useParentBounds?t.originY:void 0}),this.syncSize(),t.setChildVisible(this,!0),t.children.forEach((function(e){e!==this&&(t.setChildVisible(e,!1),this.visibleSibling.push(e))}),this),this.perspectiveState=!0,this}},{key:"exit",value:function(){var t=this.rexContainer.parent;return this.visibleSibling.forEach((function(e){t.setChildVisible(e,!0)}),this),this.visibleSibling.length=0,t.setChildVisible(this,!1),this.perspectiveState=!1,this}}]),n}(),je=function(){o(n,Phaser.Plugins.BasePlugin);var t=h(n);function n(i){var o;return e(this,n),o=t.call(this,i),i.registerGameObject("rexPerspectiveImage",A,M),i.registerGameObject("rexPerspectiveRenderTexture",B,H),i.registerGameObject("rexPerspectiveCard",Kt,Jt),i.registerGameObject("rexPerspectiveCarousel",ge,ve),i.registerGameObject("rexPerspectiveImageCarousel",Se,Oe),o}return i(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"addContainerPerspective",value:function(t,e){return new Be(t,e)}}]),n}();return Ae(window,"RexPlugins.GameObjects.PerspectiveImage",T),Ae(window,"RexPlugins.GameObjects.PerspectiveRenderTexture",N),Ae(window,"RexPlugins.GameObjects.PerspectiveCard",Yt),Ae(window,"RexPlugins.GameObjects.PerspectiveCarousel",fe),Ae(window,"RexPlugins.GameObjects.PerspectiveImageCarousel",ke),Ae(window,"RexPlugins.GameObjects.ContainerPerspective",Be),je},"object"==s(e)?t.exports=r():void 0===(o="function"==typeof(i=r)?i.call(e,n,e,t):i)||(t.exports=o)},9206:function(t,e,n){var i,o,r;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}r=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e){return!e||"object"!=s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return c(this,n)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t,e,n){return void 0===n&&(n="image"),t[e]||(t[e]=t.scene.make[n]({add:!1,origin:{x:0,y:0}}),t.on("destroy",(function(){t[e]&&(t[e].destroy(),t[e]=void 0)}))),t[e]}function d(t,e,n){return"__BASE"===n?"".concat(t,",").concat(e):"".concat(n,"_").concat(t,",").concat(e)}var p=Phaser.Utils.Objects.IsPlainObject,f=Phaser.Utils.Objects.GetValue,g=function(t){return"string"==typeof t&&(t=y[t]),t},y={scale:0,repeat:1},v={setTexture:function(t,e,n,i){Array.isArray(e)&&(i=n,n=e,e=void 0),void 0===e&&(e="__BASE"),this.textureKey=t,this.baseFrameName=e,this.columns.data=n,this.columns.count=n?n.length:0,this.columns.stretch=0,this.columns.minWidth=0,this.rows.data=i,this.rows.count=i?i.length:0,this.rows.stretch=0,this.rows.minHeight=0;var o=this.scene.textures.get(t);if(!o)return this.clear(),this;if(!n||!i)return this.clear(),this;for(var r=o.frames[e],s=r.width,a=0,c=0,h=n.length;c<h;c++)void 0===n[c]?a++:"number"==typeof n[c]?s-=n[c]:s-=n[c].width;var l=s/a,u=r.height,d=0;for(c=0,h=i.length;c<h;c++)void 0===i[c]?d++:"number"==typeof i[c]?u-=i[c]:u-=i[c].width;for(var p,f,g,y,v,m=u/d,b=0,_=0,C=0,w=i.length;C<w;C++){void 0===i[C]&&(i[C]=m),"number"==typeof i[C]&&(i[C]={height:i[C],stretch:C%2}),g=(p=i[C]).height,this.rows.stretch+=0|p.stretch,this.rows.minHeight+=0<p.stretch?0:g,c=b=0;for(var k=n.length;c<k;c++)void 0===n[c]&&(n[c]=l),"number"==typeof n[c]&&(n[c]={width:n[c],stretch:c%2}),y=(f=n[c]).width,0===C&&(this.columns.stretch+=0|f.stretch,this.columns.minWidth+=0<f.stretch?0:y),1<=y&&1<=g?(v=this.getFrameNameCallback(c,C,e))&&o.add(v,0,b+r.cutX,_+r.cutY,y,g):console.warn("Size of Grid(".concat(c,",").concat(C,") = ").concat(y,"x").concat(g,", which is invalid")),b+=y;_+=g}return this.updateTexture(),this},updateTexture:function(){if(this.clear(),void 0===this.textureKey)return this;var t=this.scene.textures.get(this.textureKey);if(!t)return this;var e,n,i=this.width-this.columns.minWidth;n=0<=i?(e=0<this.columns.stretch?i/this.columns.stretch:0,1):(e=0,this.width/this.columns.minWidth);var o,r,s,a,c,h,l,d=this.height-this.rows.minHeight;r=0<=d?(o=0<this.rows.stretch?d/this.rows.stretch:0,1):(o=0,this.height/this.rows.minHeight);for(var p,f=0,g=0,y=0,v=this.rows.count;y<v;y++){l=0===(c=this.rows.data[y]).stretch?c.height*r:o*c.stretch;for(var m=f=0,b=this.columns.count;m<b;m++)h=0===(a=this.columns.data[m]).stretch?a.width*n:e*a.stretch,(s=this.getFrameNameCallback(m,y,this.baseFrameName))&&0<h&&0<l&&t.has(s)&&(0==(0===c.stretch&&0===a.stretch||0===this.getStretchMode(m,y)?0:1)?(p=u(this,"_image","image")).setTexture(this.textureKey,s).setDisplaySize(h,l):(p=u(this,"_tileSprite","tileSprite")).setTexture(this.textureKey,s).setSize(h,l)),p&&(this.draw(p,f,g),p=void 0),f+=h;g+=l}},setStretchMode:function(t){return p(t)?(this.stretchMode.edge=g(f(t,"edge",0)),this.stretchMode.internal=g(f(t,"internal",0))):(t=g(t),this.stretchMode.edge=t,this.stretchMode.internal=t),this},getStretchMode:function(t,e){return function(t,e){return 0===t||t===this.columns.count-1||0===e||e===this.rows.count-1}.call(this,t,e)?this.stretchMode.edge:this.stretchMode.internal}},m=Phaser.GameObjects.RenderTexture,b=Phaser.Utils.Objects.IsPlainObject,_=Phaser.Utils.Objects.GetValue,C=function(){o(n,m);var t=h(n);function n(i,o,r,s,a,c,h,l,u,d){var p;return e(this,n),b(o)?(o=_(d=o,"x",0),r=_(d,"y",0),s=_(d,"width",1),a=_(d,"height",1),c=_(d,"key",void 0),h=_(d,"baseFrame",void 0),l=_(d,"columns",void 0),u=_(d,"rows",void 0)):b(s)?(s=_(d=s,"width",1),a=_(d,"height",1),c=_(d,"key",void 0),h=_(d,"baseFrame",void 0),l=_(d,"columns",void 0),u=_(d,"rows",void 0)):b(c)?(c=_(d=c,"key",void 0),h=_(d,"baseFrame",void 0),l=_(d,"columns",void 0),u=_(d,"rows",void 0)):b(h)?(h=_(d=h,"baseFrame",void 0),l=_(d,"columns",void 0),u=_(d,"rows",void 0)):Array.isArray(h)?(d=u,u=l,l=h,h=_(d,"baseFrame",void 0)):b(l)&&(l=_(d=l,"columns",void 0),u=_(d,"rows",void 0)),(p=t.call(this,i,o,r,s,a)).columns={},p.rows={},p.stretchMode={},p._tileSprite=void 0,p._image=void 0,p.setOrigin(.5,.5),p.setGetFrameNameCallback(_(d,"getFrameNameCallback",void 0)),p.setStretchMode(_(d,"stretchMode",0)),p.setTexture(c,h,l,u),p}return i(n,[{key:"setGetFrameNameCallback",value:function(t){return void 0===t&&(t=d),this.getFrameNameCallback=t,this}},{key:"minWidth",get:function(){return this.columns.minWidth}},{key:"minHeight",get:function(){return this.rows.minHeight}},{key:"resize",value:function(t,e){return this.width===t&&this.height===e||(l(r(n.prototype),"resize",this).call(this,t,e),this.updateTexture()),this}}]),n}();function w(t,e,n,i,o,r,s,a,c){var h=new C(this.scene,t,e,n,i,o,r,s,a,c);return this.scene.add.existing(h),h}Object.assign(C.prototype,v);var k=Phaser.GameObjects.BuildGameObject;function S(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=new C(this.scene,t);return k(this.scene,n,t),n}function E(t){return null==t||""===t||0===t.length}var O=function(){o(n,Phaser.Plugins.BasePlugin);var t=h(n);function n(i){var o;return e(this,n),o=t.call(this,i),i.registerGameObject("rexNinePatch",w,S),o}return i(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}}]),n}();return function(e,n,i){if("object"===t(e))if(E(n)){if(null==i)return;"object"===t(i)&&(e=i)}else{"string"==typeof n&&(n=n.split("."));var o=n.pop();(function(e,n,i){var o=e;if(!E(n)){var r;"string"==typeof n&&(n=n.split("."));for(var s=0,a=n.length;s<a;s++){var c;null!=o[r=n[s]]&&"object"===t(o[r])||(c={},o[r]=c),o=o[r]}}return o}(e,n))[o]=i}}(window,"RexPlugins.GameObjects.NinePatch",C),O},"object"==s(e)?t.exports=r():void 0===(o="function"==typeof(i=r)?i.call(e,n,e,t):i)||(t.exports=o)},6650:function(t,e){!function(t){"use strict";var e=function(t){return function(e){var n=t(e);return e.add(n),n}},n=function(t){return function(e,n){return t.set(e,n),n}},i=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,r=2*o,s=function(t,e){return function(n){var s=e.get(n),a=void 0===s?n.size:s<r?s+1:0;if(!n.has(a))return t(n,a);if(n.size<o){for(;n.has(a);)a=Math.floor(Math.random()*r);return t(n,a)}if(n.size>i)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(a);)a=Math.floor(Math.random()*i);return t(n,a)}},a=new WeakMap,c=n(a),h=s(c,a),l=e(h);t.addUniqueNumber=l,t.generateUniqueNumber=h,Object.defineProperty(t,"__esModule",{value:!0})}(e)},3505:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.initGame=void 0;var r=n(490),s=n(9206),a=n(1673),c=n(5080);n(6563),n(7771);var h=n(3355),l=Phaser.Core.Events.PAUSE,u=Phaser.Core.Events.RESUME,d={type:Phaser.WEBGL,parent:"game-player-wrap",canvas:document.getElementById("game-player-canvas"),disableContextMenu:!0,render:{clearBeforeRender:!0},scale:{width:1800,height:900,mode:Phaser.Scale.ScaleModes.WIDTH_CONTROLS_HEIGHT},plugins:{scene:[{key:"DragonBones",plugin:dragonBones.phaser.plugin.DragonBonesScenePlugin,mapping:"dragonbone"},{key:"AssetsLoader",plugin:c.AssetsLoader,mapping:"loader"}],global:[{key:"rexninepatchplugin",plugin:s,start:!0},{key:"rexButton",plugin:a,start:!0}]}},p=null;function f(){null!==p&&p.scale.updateBounds()}function g(){window.removeEventListener("react-scrolling",f),window.removeEventListener("destroyEngine",g),p&&(p.destroy(!1,!1),Phaser.Plugins.PluginCache.remove("DragonBones"),Phaser.Plugins.PluginCache.remove("SpinePlugin"),Phaser.Plugins.PluginCache.remove("AssetsLoader"),p=null)}function y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Phaser.Utils.Objects.IsPlainObject;return t.reduce((function(t,e){return Object.keys(e).forEach((function(i){var o=t[i],r=e[i];Array.isArray(o)&&Array.isArray(r)?t[i]=o.concat.apply(o,r):n(o)&&n(r)?t[i]=y(o,r):t[i]=r})),t}),{})}e.initGame=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:return[4,r.Utils.checkSupportedWebP()];case 1:return i.sent(),e=y(d,t||{}),p=new Phaser.Game(e),function(){if(null!==p){p.input.mouse.preventDefaultWheel=!1;var t=0;p.events.on(l,(function(){p&&(p.loop.resume(),t=h.setInterval((function(){p&&p.loop.step()}),1e3/60))})),p.events.on(u,(function(){p&&h.clearInterval(t)})),window.addEventListener("react-scrolling",f),window.addEventListener("destroyEngine",g)}}(),n.g.game=p,[2,p]}}))}))}},6871:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoMenu=e.DIRECTION=e.THEME_EVENT=e.BOARD_STYLES=e.MODE_STYLES=void 0;var r,s,a,c,h=Phaser.Input.Events.POINTER_DOWN,l=n(5080),u=n(8356),d=n(2804);!function(t){t[t.LIGHT=0]="LIGHT",t[t.DARK=1]="DARK"}(r=e.MODE_STYLES||(e.MODE_STYLES={})),function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE"}(s=e.BOARD_STYLES||(e.BOARD_STYLES={})),function(t){t.MODE="changeMode",t.SOUND="changeSound",t.MUSIC="changeMusic"}(a=e.THEME_EVENT||(e.THEME_EVENT={})),function(t){t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL"}(c=e.DIRECTION||(e.DIRECTION={}));var p="core/menu-click",f=function(t){function e(e,n){void 0===n&&(n=u.Config.MENU);var i=t.call(this,e)||this;return i._atlasMisc=i.scene.textures.get("core/AtlasMisc"),i.background=i.scene.add.rexNinePatch(0,0,2,2),i.toggleMode=null,i.sound=null,i.soundMusic=null,i.modeStyle=r.LIGHT,i.direction=c.VERTICAL,i.boardStyle=s.ZERO,i.isSoundOn=!0,i.isSoundMusicOn=!0,i._listButton=[],i._listLines=[],i.background.setOrigin(0,0),i.add(i.background),n.toggleMode&&(i.toggleMode=new d.ToggleMode(i.scene),i.toggleMode.on(d.EventToggleMode.CHANGE_MODE,i.onChangeTheme,i),i.add(i.toggleMode),i._listButton.push(i.toggleMode)),n.sound&&(i.sound=i.scene.add.image(0,0,i._atlasMisc,"unmute"),i.add(i.sound),i.sound.setInteractive({useHandCursor:!0}),i.sound.on(h,i.onChangeSound,i),i.sound.setScrollFactor(0),i._listButton.push(i.sound)),n.music&&(i.soundMusic=i.scene.add.image(0,0,i._atlasMisc,"unmute_music"),i.add(i.soundMusic),i.soundMusic.setInteractive({useHandCursor:!0}),i.soundMusic.on(h,i.onChangeSoundMusic,i),i.soundMusic.setScrollFactor(0),i._listButton.push(i.soundMusic)),i.changeBoardStyle(i.boardStyle),i.sortAll(),i.onChangeMode(i.scene.game.device.os.desktop),i}return o(e,t),e.prototype.changeDirection=function(t){this.direction=t,this.sortAll()},e.prototype.interactiveMode=function(t){null!==this.toggleMode&&this.toggleMode.interactiveMode(t)},e.prototype.changeBoardStyle=function(t){this.boardStyle=t,this.boardStyle===s.ZERO?this.background.setTexture("core/AtlasNinePatch","board-0",[13*l.DPR,void 0,13*l.DPR],[13*l.DPR,void 0,13*l.DPR]):this.background.setTexture("core/AtlasNinePatch","board-1",[28*l.DPR,void 0,28*l.DPR],[19*l.DPR,void 0,19*l.DPR])},e.prototype.setTheme=function(t){this.modeStyle=t,null!==this.toggleMode&&(this.modeStyle===r.LIGHT?this.toggleMode.setLightMode():this.toggleMode.setDarkMode()),this.emit(a.MODE,this.modeStyle)},e.prototype._playSoundClick=function(){if(this.scene.game.cache.audio.get(p)){var t=this.scene.sound.get(p);null===t&&(t=this.scene.sound.add(p)),t.play()}},e.prototype.onChangeMode=function(t){null!==this.background&&this.background.setVisible(t);for(var e=0;e<this._listLines.length;e++)this._listLines[e].setVisible(t)},e.prototype.onChangeTheme=function(){this._playSoundClick(),this.modeStyle=this.modeStyle===r.LIGHT?r.DARK:r.LIGHT,this.emit(a.MODE,this.modeStyle)},e.prototype.sortAll=function(){var t={width:0,height:0};this.scene.game.device.os.desktop?this.sortButtonsDesktop(t):this.sortButtons(t),this.sortLines(t),this.background.resize(t.width,t.height)},e.prototype.sortButtons=function(t){for(var e=20*l.DPR,n=0;n<this._listButton.length;n++){var i=this._listButton[n];this.direction===c.VERTICAL?(i.setPosition(0,e+40*n*l.DPR),t.width=Math.max(i.displayWidth,t.width),t.height=i.y+e):(i.setPosition(e+40*n*l.DPR,0),t.width=i.x+e,t.height=Math.max(i.displayHeight+e,t.height))}this.direction===c.VERTICAL?this.background.setOrigin(.5,0):this.background.setOrigin(0,.5)},e.prototype.sortButtonsDesktop=function(t){for(var e=0;e<this._listButton.length;e++){var n=this._listButton[e];this.direction===c.VERTICAL?(n.setPosition(0,25+50*e),t.width=Math.max(n.displayWidth+15,t.width),t.height=Math.max(n.y+25,t.height)):(n.setPosition(25+50*e,0),t.width=Math.max(n.x+25,t.width),t.height=Math.max(n.displayHeight+15,t.height))}this.direction===c.VERTICAL?this.background.setOrigin(.5,0):this.background.setOrigin(0,.5)},e.prototype.sortLines=function(t){for(var e=0;e<this._listButton.length-1;e++){var n=this._listButton[e],i=this._listButton[e+1],o=this._listLines[e];void 0===o&&(o=this.scene.add.image(0,0,this._atlasMisc,"line-mode"),this.add(o),this._listLines.push(o)),this.direction===c.VERTICAL?(o.setPosition(0,(n.y+i.y)/2),o.setAngle(0),t.width=Math.max(o.width+15,t.width)):(o.setPosition((n.x+i.x)/2,0),o.setAngle(90),t.height=Math.max(o.height,t.height))}},e.prototype.onChangeSound=function(){this._playSoundClick(),this.isSoundOn=!this.isSoundOn,null!==this.sound&&(this.isSoundOn?(this.scene.sound.mute=!1,this.sound.setFrame("unmute",!0,!1)):(this.scene.sound.mute=!0,this.sound.setFrame("mute",!0,!1))),this.emit(a.SOUND,this.isSoundOn)},e.prototype.onChangeSoundMusic=function(){this._playSoundClick(),this.isSoundMusicOn=!this.isSoundMusicOn,null!==this.soundMusic&&(this.isSoundMusicOn?this.soundMusic.setFrame("unmute_music",!0,!1):this.soundMusic.setFrame("mute_music",!0,!1)),this.emit(a.MUSIC,this.isSoundMusicOn)},e}(Phaser.GameObjects.Container);e.CompoMenu=f},2804:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ToggleMode=e.EventToggleMode=void 0;var r,s=Phaser.GameObjects.Container,a=Phaser.Input.Events.POINTER_DOWN,c=Phaser.Input.Events.POINTER_OVER,h=Phaser.Input.Events.POINTER_OUT,l=n(6871),u=n(5080);!function(t){t.CHANGE_MODE="change-mode"}(r=e.EventToggleMode||(e.EventToggleMode={}));var d=function(t){function e(e){var n=t.call(this,e)||this;return n._atlasMisc=n.scene.textures.get("core/AtlasMisc"),n.background=n.scene.add.image(0,0,n._atlasMisc,"bg-toggle"),n.foam=n.scene.add.image(0,0,n._atlasMisc,"foam"),n.light=n.scene.add.image(0,0,n._atlasMisc,"light"),n.dark=n.scene.add.image(0,0,n._atlasMisc,"dark"),n.containerFoam=n.scene.add.container(0,0,[n.foam,n.light,n.dark]),n.tooltip=n.scene.add.text(0,0,"",{fontFamily:"Montserrat-SemiBold",fontSize:n.scene.game.device.os.desktop?"20px":10*u.DPR+"px",color:"#cc2b2b",stroke:"#fff",strokeThickness:2}),n._mode=l.MODE_STYLES.LIGHT,n.isInteractive=!0,n.background.setInteractive({useHandCursor:!0}),n.background.on(a,n.onClickBackground,n),n.background.on(c,n.onOverBackground,n),n.background.on(h,n.onOutBackground,n),n.background.setScrollFactor(0),n.foam.setScrollFactor(0),n.light.setScrollFactor(0),n.dark.setScrollFactor(0),n.width=n.background.width,n.height=n.background.height,n.dark.alpha=0,n.tooltip.setVisible(!1),n.tooltip.setOrigin(0,.5),n.tooltip.x=n.background.width/2+10,n.add([n.background,n.containerFoam,n.tooltip]),n.setLightMode(),n}return o(e,t),e.prototype.interactiveMode=function(t){this.isInteractive=t,this.background.setInteractive({useHandCursor:t}),this._setColorBackground()},e.prototype.onOverBackground=function(){this.isInteractive||(this.tooltip.setText("Mode can't be changed while round is in play"),this.tooltip.setVisible(!0),this._mode===l.MODE_STYLES.LIGHT?(this.tooltip.setColor("#cc2b2b"),this.tooltip.setStroke("#fff",1)):(this.tooltip.setColor("#fff"),this.tooltip.setStroke("#cc2b2b",1)))},e.prototype.onOutBackground=function(){this.isInteractive||this.tooltip.setVisible(!1)},e.prototype.onClickBackground=function(){this.isInteractive&&(this.emit(r.CHANGE_MODE),this.animatedToggle())},e.prototype.animatedToggle=function(){(this._mode===l.MODE_STYLES.LIGHT?l.MODE_STYLES.DARK:l.MODE_STYLES.LIGHT)===l.MODE_STYLES.LIGHT?this.setLightMode():this.setDarkMode()},e.prototype.setLightMode=function(){this._mode=l.MODE_STYLES.LIGHT,this._tweenAlpha(this.light,1),this._tweenAlpha(this.dark,0),this._tweenPosition(this.background.width/2-this.light.width/2-10),this._setColorBackground()},e.prototype.setDarkMode=function(){this._mode=l.MODE_STYLES.DARK,this._tweenAlpha(this.light,0),this._tweenAlpha(this.dark,1),this._tweenPosition(-this.background.width/2+this.dark.width/2+10),this._setColorBackground()},e.prototype._setColorBackground=function(){this.isInteractive?this._mode===l.MODE_STYLES.LIGHT?this.background.setTint(16777215):this.background.setTint(993091):this.background.setTint(13380395)},e.prototype._tweenPosition=function(t){this.scene.tweens.killTweensOf(this.containerFoam),this.scene.tweens.add({targets:this.containerFoam,x:t,duration:300})},e.prototype._tweenAlpha=function(t,e){this.scene.tweens.killTweensOf(t),this.scene.tweens.add({targets:t,alpha:e,duration:300})},e}(s);e.ToggleMode=d},8356:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0,e.Config={BASE_URL:"/assets/games/",WIDTH_DESIGN:1508,HEIGHT_DESIGN:787,MAX_WIDTH_QUERY:600,MENU:{toggleMode:!0,sound:!0,music:!0}}},6285:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EVENT_CORE=void 0,function(t){t.SWITCH_SCREEN_MODE="switch-screen-mode",t.DEVICE_DESKTOP="device-desktop",t.DEVICE_MOBILE="device-mobile",t.LOAD_FILE="load",t.LOADING_PROGRESS="progress",t.LOAD_COMPLETED="load-completed",t.CONNECTED_SERVER="connected-server"}(e.EVENT_CORE||(e.EVENT_CORE={}))},7771:()=>{"use strict";var t=Phaser.GameObjects.GameObject,e=Phaser.Geom.Point;t.prototype.getGlobalPosition=function(t){return this.parentContainer?this.parentContainer.toGlobal(this.x,this.y,t):this.toGlobal(this.x,this.y,t)},t.prototype.toGlobal=function(t,n,i){void 0===i&&(i=new e(t,n));var o=this.getWorldTransformMatrix();if(o){var r=o.getX(t,n),s=o.getY(t,n);i.setTo(r,s)}return i},t.prototype.toLocal=function(t,e,n,i){var o=n.toGlobal(t,e,i),r=new Phaser.Math.Vector2(o.x,o.y),s=this.getWorldTransformMatrix();return s&&s.applyInverse(o.x,o.y,r),r},t.prototype.getParentScale=function(){for(var t=1,e=this.parentContainer;e;)t*=e.scale,e=e.parentContainer;return t},t.prototype.getGlobalScale=function(){return this.getParentScale()*this.scale}},9173:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,i){var o=Math.min(1,e||.7),r=(1-o)/2,s=r+o,a=t+(.5-t)*(o<1?n||0===n?n:.7:0);return t<r?i?1-(t=1-t/r)*t:a-(t=1-t/r)*t*t*t*a:t>s?i?1===t?0:1-(t=(t-s)/r)*t:a+(t-a)*(t=(t-s)/r)*t*t*t:i?1:a}},5080:function(t,e,n){"use strict";var i,o=n(5933),r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AssetsLoader=e.DPR=void 0;var s=Phaser.Loader.Events.COMPLETE,a=Phaser.Loader.Events.FILE_LOAD,c=n(490),h=Phaser.Loader.Events.PROGRESS,l=n(6285);e.DPR=Math.min(Math.round(window.devicePixelRatio),2);var u=function(t){function n(e,n){var i=t.call(this,e,n,"AssetsLoader")||this;return i.fonts={},i.i18n=null,i.assets={},i.spines=[],i.loaders={},i.postfix="",i.os="",i}return r(n,t),n.prototype.start=function(t){this.fonts=t.fonts||{},this.i18n=t.i18n||null,this.spines=t.spines||[],this.assets={images:t.images||[],sprites:t.sprites||[],audio:t.audio||[],bitmapFonts:t.bitmapFonts||[],jsons:t.jsons||[],animations:t.animations||[],meshes:t.meshes||[]},this.loaders={images:this._loadImage,sprites:this._loadSprite,audio:this._loadAudio,bitmapFonts:this._loadBitmapFont,jsons:this._loadJson,animations:this._loadAnimations,meshes:this._loadObj},this.game.device.os.desktop?(e.DPR=1,this.os="desktop/"):(this.os="mobile/",this.postfix="@"+e.DPR+"x")},n.prototype.load=function(){var t=this;return this._loadSpines().then((function(){return Promise.all([t._loadAssets(),t._loadFonts(),t._loadLanguage()])})).catch((function(){return Promise.resolve([])}))},n.prototype._emitLoad=function(t){this.game.events.emit(l.EVENT_CORE.LOAD_FILE,t)},n.prototype._emitProgress=function(t){this.game.events.emit(l.EVENT_CORE.LOADING_PROGRESS,t)},n.prototype._loadAssets=function(){var t=this;return new Promise((function(e){Object.keys(t.assets).forEach((function(e){t.assets[e].forEach((function(n){var i=n.split(".");t.loaders[e].call(t,i[0],i[1])}))})),t.scene.load.on(a,t._emitLoad,t),t.scene.load.on(h,t._emitProgress,t),t.scene.load.once(s,(function(){t.scene.load.off(a,t._emitLoad,t),t.scene.load.off(h,t._emitProgress,t),t.game.events.emit(l.EVENT_CORE.LOAD_COMPLETED),e()})),t.scene.load.start()}))},n.prototype._loadFonts=function(){var t=this;return 0===Object.keys(this.fonts).length?Promise.resolve():new Promise((function(e){o.load(Object.assign({},t.fonts,{active:function(){t.systems.events.emit("load"),e()}}))}))},n.prototype._loadImage=function(t){var e=this.getInfoExtra(t),n=e.subPathOs+"images/",i="".concat(n).concat(e.fileName).concat(this.postfix,".").concat(e.extension);this.scene.load.image(t,i)},n.prototype._loadSprite=function(t){var e=this.getInfoExtra(t),n=e.subPathOs+"sprites/",i="".concat(n).concat(e.fileName).concat(this.postfix,".").concat(e.extension),o="".concat(n).concat(e.fileName).concat(this.postfix,".json");this.scene.load.atlas(t,i,o)},n.prototype._loadAudio=function(t,e){var n=this.getInfoExtra(t),i=n.subPath+"audio/",o="".concat(i).concat(n.fileName,".").concat(e);this.scene.load.audio(t,o)},n.prototype._loadBitmapFont=function(t){var e=this.getInfoExtra(t),n=e.subPathOs+"bitmap/",i="".concat(n).concat(t).concat(this.postfix,".").concat(e.extension),o="".concat(n).concat(t).concat(this.postfix,".xml");this.scene.load.bitmapFont(t,i,o)},n.prototype._loadJson=function(t,e){var n="".concat("jsons/").concat(t,".").concat(e);this.scene.load.json(t,n)},n.prototype._loadObj=function(t){var e="".concat("meshes/").concat(t,".obj");this.scene.load.obj(t,e)},n.prototype._loadAnimations=function(t){var e=this.getInfoExtra(t),n=e.subPathOs+"animations/";this.scene.load.dragonbone(t,"".concat(n).concat(e.fileName,"_tex").concat(this.postfix,".").concat(e.extension),"".concat(n).concat(e.fileName,"_tex").concat(this.postfix,".json"),"".concat(n).concat(e.fileName,"_ske").concat(this.postfix,".dbbin"),void 0,void 0,{responseType:"arraybuffer"})},n.prototype._loadSpines=function(){var t=this;return new Promise((function(e){if(0===t.spines.length)return e();var n=t.scene.load.baseURL,i=t.scene.load.path;t.scene.load.setBaseURL(""),t.scene.load.setPath(n+i),t.scene.load.on(a,t._emitLoad,t),t.scene.load.once(s,(function(){t.scene.load.setBaseURL(n),t.scene.load.setPath(i),t.scene.load.off(a,t._emitLoad,t),e()})),t.spines.forEach((function(e){var n=e,i=/\(([^)]+)\)/.exec(e);null!==i&&(n=e.substring(0,i.index));var o=t.getInfoExtra(n),r=o.subPathOs+"spines/",s=[];if(null!==i)for(var a=Number(i[1]),c=1;c<=a;c++)s.push("".concat(r).concat(o.fileName,"-").concat(c).concat(t.postfix,".atlas"));else s.push("".concat(r).concat(o.fileName).concat(t.postfix,".atlas"));t.scene.load.spine(n,"".concat(r).concat(o.fileName).concat(t.postfix,".json"),s,!0)})),t.scene.load.start()}))},n.prototype._loadLanguage=function(){if(this.i18n){var t="assets/games/".concat(this.i18n.baseUrl,"/");return this.scene.i18n.initialize({backend:{loadPath:"".concat(t,"{{lng}}/{{ns}}.json")},ns:this.i18n.ns,defaultNS:this.i18n.ns[0],lng:this.i18n.lng,fallbackLng:"en"})}return Promise.resolve()},n.prototype.getInfoExtra=function(t){var e=c.Utils.isSupportedWebP?"webp":"png";if(t.indexOf("core")>-1){var n=t.split("/");return{fileName:n[n.length-1],extension:e,subPath:"../../core/",subPathOs:"../../core/"+this.os+e+"/",subPathFormat:"../../core/"}}return{fileName:t,extension:e,subPath:"",subPathOs:this.os+e+"/",subPathFormat:""}},n}(Phaser.Plugins.ScenePlugin);e.AssetsLoader=u},6517:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SoundManager=e.SOUND_NAME=void 0;var n=Phaser.Core.Events.PAUSE,i=Phaser.Core.Events.RESUME;!function(t){t.CLICK="core/menu-click"}(e.SOUND_NAME||(e.SOUND_NAME={}));var o=function(){function t(t){this.scene=t}return t.prototype.init=function(){var t=this;this.scene.game.events.on(n,(function(){t.scene.sound.mute=!0})),this.scene.game.events.on(i,(function(){t.scene.sound.mute=!1}))},t.prototype.play=function(t,e){var n=this.getSound(t,e);return n.play(),n},t.prototype.stop=function(t){var e=this.scene.sound.get(t);null!==e&&e.stop()},t.prototype.mute=function(t,e){var n=this.scene.sound.get(t);null!==n&&n.setMute(e)},t.prototype.seek=function(t,e){var n=this.scene.sound.get(t);null!==n&&n.setSeek(e)},t.prototype.getSound=function(t,e){if(null==e?void 0:e.multiInstance){for(var n=this.scene.sound.getAll(t),i=0,o=n.length;i<o;i++)if(!n[i].isPlaying)return n[i]}else{var r=this.scene.sound.get(t);if(null!==r)return r}return this.scene.sound.add(t,e)},t}();e.SoundManager=o},6071:function(t,e){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.GlowFilterPipeline=void 0;var o=Phaser.Renderer.WebGL.Pipelines.SinglePipeline,r=function(t){function e(e){var n=t.call(this,{game:e,fragShader:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n// Scene buffer\nuniform sampler2D uMainSampler; \nvarying vec2 outTexCoord;\n// Effect parameters\nuniform float intensity;\nvoid main() {\n  vec4 front = texture2D(uMainSampler, outTexCoord);\n  vec4 sum = vec4(0);\n  for(int xx = -4; xx <= 4; xx++) {\n    for(int yy = -3; yy <= 3; yy++) {\n      float dist = sqrt(float(xx*xx) + float(yy*yy));\n      float factor = 0.0;\n      if (dist == 0.0) {\n        factor = 2.0;\n      } else {\n        factor = 2.0/abs(float(dist));\n      }\n      sum += texture2D(uMainSampler, outTexCoord + vec2(xx, yy) * 0.002) * factor;\n    }\n  }\n  \n  gl_FragColor = mix(front, sum, intensity);\n}\n",renderTarget:!0})||this;return n._intensity=.01,n}return i(e,t),e.prototype.onPreRender=function(){t.prototype.onPreRender.call(this),this.set1f("intensity",this._intensity)},Object.defineProperty(e.prototype,"intensity",{get:function(){return this._intensity},set:function(t){this._intensity=Phaser.Math.Clamp(t,0,1)},enumerable:!1,configurable:!0}),e}(o);e.GlowFilterPipeline=r},6853:function(t,e){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.GlowOuterPostFx=void 0;var o=Phaser.Renderer.WebGL.Pipelines.PostFXPipeline,r=Phaser.Display.Color,s=function(t){function e(e){var n=t.call(this,{game:e,fragShader:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n\nvarying vec2 outTexCoord;\nuniform sampler2D uMainSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec2 filterArea;\nuniform bool knockout;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = outTexCoord + direction * (curDistance + 1.0);\n\n           curColor = texture2D(uMainSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uMainSampler, outTexCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;\n    \n    if (knockout) {\n      float resultAlpha = outerGlowAlpha + innerGlowAlpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,"".concat(1..toFixed(7))).replace(/__DIST__/gi,"".concat(10..toFixed(0),".0")),renderTarget:!0})||this;return n._outerStrength=4,n._innerStrength=0,n._color=new r(255,255,255),n._knockout=!1,n}return i(e,t),e.prototype.onPreRender=function(){t.prototype.onPreRender.call(this),this.set1f("outerStrength",this._outerStrength),this.set1f("innerStrength",this._innerStrength),this.set4f("glowColor",this._color.redGL,this._color.greenGL,this._color.blueGL,this._color.alphaGL),this.set2f("filterArea",this.renderer.width,this.renderer.height);var e=this._knockout?1:0;this.set1i("knockout",e)},Object.defineProperty(e.prototype,"color",{get:function(){return this._color.color},set:function(t){this._color.setFromRGB(r.IntegerToRGB(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outerStrength",{get:function(){return this._outerStrength},set:function(t){this._outerStrength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerStrength",{get:function(){return this._innerStrength},set:function(t){this._innerStrength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"knockout",{get:function(){return this._knockout},set:function(t){this._knockout=t},enumerable:!1,configurable:!0}),e}(o);e.GlowOuterPostFx=s},8416:function(t,e){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.GrayPipeline=void 0;var o=function(t){function e(e){var n=t.call(this,{game:e,fragShader:"\nprecision mediump float;\nuniform sampler2D uMainSampler[%count%];\nuniform float gray;\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying vec4 outTint;\nvarying vec2 fragCoord;\nvoid main()\n{\n    vec4 texture;\n    %forloop%\n    gl_FragColor = texture;\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126 * gl_FragColor.r + 0.7152 * gl_FragColor.g + 0.0722 * gl_FragColor.b), gray);\n}\n"})||this;return n._gray=1,n}return i(e,t),e.prototype.onPreRender=function(){this.set1f("gray",this._gray)},Object.defineProperty(e.prototype,"gray",{get:function(){return this._gray},set:function(t){this._gray=t},enumerable:!1,configurable:!0}),e}(Phaser.Renderer.WebGL.Pipelines.MultiPipeline);e.GrayPipeline=o},2149:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GeneralScene=void 0;var r=n(8356),s=Phaser.Scale.Events.RESIZE,a=n(5080),c=n(6285),h=function(t){function e(e){var n=t.call(this,Phaser.Utils.Objects.Extend(!0,{loader:{baseURL:r.Config.BASE_URL}},e))||this;return n.rootContainer=null,n.gameScale=1,n.isDesktopMode=!0,n._resizeListenerBind=n.forceResize.bind(n),n._isFirstChangeMode=!1,n}return o(e,t),e.prototype.init=function(){var t=this.scale.gameSize.width,e=this.scale.gameSize.height;this.rootContainer=this.add.container();var n=this.add.zone(0,0,2,2);n.setOrigin(.5),this.rootContainer.add(n),this.zone=this.add.zone(0,0,t,e),this.zone.setOrigin(0),this.sizer=this.add.zone(0,0,t*a.DPR,e*a.DPR),this.sizer.setOrigin(0),this.isMobile||this.sizer.setSize(t,e),this.events.on(Phaser.Scenes.Events.DESTROY,this.destroy,this),this.scale.on(s,this.onResize,this),this.isMobile&&(this.scale.scaleMode=Phaser.Scale.ScaleModes.NONE,window.addEventListener("resize",this._resizeListenerBind,!1))},Object.defineProperty(e.prototype,"isMobile",{get:function(){var t=this.game.device.os;return t.android||t.iPhone||t.windowsPhone},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAndroid",{get:function(){return this.game.device.os.android},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isIOS",{get:function(){return this.game.device.os.iOS},enumerable:!1,configurable:!0}),e.prototype.loadAssets=function(t){var e=this;this.loader.start(t),this.loader.load().then((function(){return e.initGame()}))},e.prototype.onResize=function(t,e,n,i,o){},e.prototype.destroy=function(){window.removeEventListener("resize",this._resizeListenerBind)},e.prototype.forceResize=function(){var t=a.DPR,e=Math.min(window.innerWidth,window.screen.width,this.scale.parent.clientWidth),n=Math.min(window.innerHeight,window.screen.height,this.scale.parent.clientHeight);e*=t,n*=t,null!==this.zone&&this.zone.setSize(e,n);var i=!this.isMobile;this.changeScaleRoot(e/t,n/t,i),this.changeSizer(e,n,i),this.changeStyleCanvas(e/t,n/t,i),this.scale.resize(e,n),this.raiseChangeMode(e,n,i)},e.prototype.raiseChangeMode=function(t,e,n){if(!this._isFirstChangeMode)return this._isFirstChangeMode=!0,void this._raiseChangeMode(n);n?this.isDesktopMode||this._raiseChangeMode(n):this.isDesktopMode&&this._raiseChangeMode(n)},e.prototype._raiseChangeMode=function(t){this.isDesktopMode=t,this.sys.events.emit(c.EVENT_CORE.SWITCH_SCREEN_MODE,this.isDesktopMode)},e.prototype.changeSizer=function(t,e,n){n?this.sizer.setSize(this.zone.width,this.zone.height):this.sizer.setSize(t,e)},e.prototype.changeScaleRoot=function(t,n,i){if(null!==this.rootContainer){var o=t/r.Config.WIDTH_DESIGN,s=n/r.Config.HEIGHT_DESIGN;e.rootScale=Math.min(Math.max(o,s),1),this.rootContainer.setScale(e.rootScale),this.gameScale=i?e.rootScale:1}},e.prototype.changeStyleCanvas=function(t,e,n){var i=t,o=e;this.scale.canvas.style.width=i+"px",this.scale.canvas.style.height=o+"px"},e.prototype.runOnDevice=function(){this.isMobile?this.events.emit(c.EVENT_CORE.DEVICE_MOBILE):this.events.emit(c.EVENT_CORE.DEVICE_DESKTOP)},e.rootScale=1,e}(Phaser.Scene);e.GeneralScene=h},6935:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetsManifest=void 0,e.AssetsManifest={images:["core/loading-logo"]}},3975:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.LoadingScene=void 0;var r=n(2149),s=n(6935),a=n(6285),c=n(5080),h=function(t){function e(){var n=t.call(this,{key:e.SCENE_NAME})||this;return n.logo=null,n.backgroundScene=null,n.background=null,n.backgroundCircle=null,n.loadingBar=null,n.txtConnecting=null,n.maskCircle=null,n.objectTemp={current:0,end:0},n._tDrawMask=null,n._tLogo=null,n.radiusCircle=0,n.radiusProgress=0,n}return o(e,t),e.prototype.preload=function(){this.load.setPath("core/"),this.loadAssets(s.AssetsManifest)},e.prototype.initGame=function(){this.isMobile&&this.forceResize(),this.events.once(a.EVENT_CORE.DEVICE_DESKTOP,this.runOnDesktop,this),this.events.once(a.EVENT_CORE.DEVICE_MOBILE,this.runOnMobile,this),this.runOnDevice(),this.backgroundScene=this.add.graphics(),this.backgroundScene.fillStyle(993091),this.backgroundScene.fillRect(0,0,this.sizer.width,this.sizer.height),this.background=this.add.graphics(),this.background.fillStyle(1849700),this.background.fillCircle(this.sizer.width/2,this.sizer.height/2,this.radiusProgress),this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(16777215),this.loadingBar.fillCircle(0,0,this.radiusProgress),this.loadingBar.setPosition(this.sizer.width/2,this.sizer.height/2),this.maskCircle=this.make.graphics({},!1),this.maskCircle.rotation=-Math.PI/2,this.loadingBar.setMask(this.maskCircle.createGeometryMask()),this.maskCircle.setPosition(this.loadingBar.x,this.loadingBar.y),this.backgroundCircle=this.add.graphics(),this.backgroundCircle.fillStyle(993091),this.backgroundCircle.fillCircle(this.sizer.width/2,this.sizer.height/2,this.radiusCircle),this.logo=this.add.image(this.sizer.width/2,this.sizer.height/2,"core/loading-logo"),this.game.events.on(a.EVENT_CORE.LOADING_PROGRESS,this.updateProgress,this),this.game.events.on(a.EVENT_CORE.LOAD_COMPLETED,this.startNextScene,this),this.tweenRotation(),this.loadNextScene()},e.prototype.updateProgress=function(t){var e=this;null!==this._tDrawMask&&this._tDrawMask.stop(),this.objectTemp.current=this.objectTemp.end;var n=t*Math.PI*2;this._tDrawMask=this.tweens.add({targets:this.objectTemp,end:n,duration:300,onUpdate:function(){null!==e.maskCircle&&e.maskCircle.slice(0,0,e.radiusProgress,e.objectTemp.current,e.objectTemp.end).fillPath()}})},e.prototype.tweenRotation=function(){null!==this.logo&&(this._tLogo=this.tweens.add({targets:this.logo,duration:3e3,rotation:2*Math.PI,repeat:-1}))},e.prototype.loadNextScene=function(){var t=this.game.scene,e=t.getAt(1);e&&(t.start(e),t.bringToTop(this))},e.prototype.startNextScene=function(){this.destroyObjects();var t=this.sizer.width/2,e=this.sizer.height/2;null!==this.logo&&(t=this.logo.x,e=this.logo.y+this.logo.height/2+30),this.txtConnecting=this.add.text(t,e,"Connecting to server...",{fontSize:this.isMobile?16*c.DPR+"px":"24px",fontFamily:"Montserrat-SemiBold",color:"#fff",fontStyle:"italic",stroke:"#000",strokeThickness:2}),this.txtConnecting.setOrigin(.5),this.game.events.once(a.EVENT_CORE.CONNECTED_SERVER,this.onConnectedServer,this)},e.prototype.onConnectedServer=function(){null!==this._tLogo&&(this._tLogo.stop(),this._tLogo=null),null!==this.logo&&(this.logo.destroy(!0),this.logo=null),null!==this.txtConnecting&&(this.txtConnecting.destroy(!0),this.txtConnecting=null),this.destroy(),this.game.scene.stop(this),this.game.scene.remove(e.SCENE_NAME)},e.prototype.destroyObjects=function(){null!==this._tDrawMask&&(this._tDrawMask.stop(),this._tDrawMask=null),null!==this.backgroundScene&&(this.backgroundScene.destroy(!0),this.backgroundScene=null),null!==this.background&&(this.background.destroy(!0),this.background=null),null!==this.backgroundCircle&&(this.backgroundCircle.destroy(!0),this.backgroundCircle=null),null!==this.maskCircle&&(this.maskCircle.destroy(!0),this.maskCircle=null)},e.prototype.runOnDesktop=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.radiusCircle=160,this.radiusProgress=197},e.prototype.runOnMobile=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.radiusCircle=70*c.DPR,this.radiusProgress=90*c.DPR},e.SCENE_NAME="sceneLoading",e}(r.GeneralScene);e.LoadingScene=h},423:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbsSocketController=e.EVENT_NAME=void 0,function(t){t.OPEN="SOCKET_OPEN",t.ERROR="SOCKET_ERROR",t.CLOSE="SOCKET_CLOSE"}(e.EVENT_NAME||(e.EVENT_NAME={}));var n=function(){function t(){this.listSocket=[],this.eventsObservable=new Phaser.Events.EventEmitter}return t.prototype.getSocket=function(t){if(t)for(var e=0,n=this.listSocket.length;e<n;e++){var i=this.listSocket[e];if(i.key===t)return i.socket}return null},t.prototype.addSocket=function(t,e){for(var n=0,i=this.listSocket.length;n<i;n++){var o=this.listSocket[n];if(o.key===t)return void(o.socket=e)}this.listSocket.push({key:t,socket:e})},t.prototype.removeSocket=function(t){for(var e=0,n=this.listSocket.length;e<n;e++)if(this.listSocket[e].key===t){Phaser.Utils.Array.SpliceOne(this.listSocket,e);break}},t.prototype.closeSocket=function(t){console.error("close socket "+t);var e=this.getSocket(t);if(e)try{e.close(),this.removeSocket(t)}catch(t){console.error(t)}return e},t.prototype.isConnected=function(t){return!1},t.prototype.initSocket=function(t,e){void 0===e&&(e="")},t.prototype.sendMessage=function(t,e){},t}();e.AbsSocketController=n},9284:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractReceiveController=void 0;var i=n(9323),o=n(490),r=function(){function t(t){this.scene=t,this.socket=null}return t.prototype.onClosed=function(){},t.prototype.onError=function(){},t.prototype.destroy=function(){},t.prototype.onConnected=function(){var t=this;console.log("onConnected",this.socket),null!==this.socket&&this.socket.on(i.EVENT_SOCKET_CORE.ERROR_REQUEST,(function(e){console.error(e),o.Utils.dispatchCustomEvent("socket-response-error",{detail:{message:e}}),t.onResponseError(e)}))},t.prototype.updateSocket=function(t){this.socket=t},t.prototype.onResponseError=function(t){},t}();e.AbstractReceiveController=r},9323:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SocketController=e.EVENT_SOCKET_CORE=void 0;var i=n(7304),o=n(423);!function(t){t.ERROR_REQUEST="socket-error"}(e.EVENT_SOCKET_CORE||(e.EVENT_SOCKET_CORE={}));var r=function(){function t(t,e,n){this.receiveController=t,this.webSocketController=null,this.listSocket=[],e&&this.initSocket(e,n)}return t.prototype.hasSocket=function(t){for(var e=0,n=this.listSocket.length;e<n;e++){if(this.listSocket[e]===t)return!0}return!1},t.prototype.isConnected=function(t){return null!==this.webSocketController&&this.webSocketController.isConnected(t)},t.prototype.initSocket=function(t,e){void 0===e&&(e=""),this.initWebSocket(t,e),this.addSocket(t)},t.prototype.addSocket=function(t){this.hasSocket(t)||this.listSocket.push(t)},t.prototype.removeSocket=function(t){for(var e=0,n=this.listSocket.length;e<n;e++)if(this.listSocket[e]===t){Phaser.Utils.Array.SpliceOne(this.listSocket,e);break}},t.prototype.initWebSocket=function(t,e){void 0===e&&(e=""),null===this.webSocketController&&(this.webSocketController=new i.WebSocketController,this.webSocketController.eventsObservable.on(o.EVENT_NAME.OPEN,this.receiveController.onConnected,this.receiveController),this.webSocketController.eventsObservable.on(o.EVENT_NAME.CLOSE,this.receiveController.onClosed,this.receiveController),this.webSocketController.eventsObservable.on(o.EVENT_NAME.ERROR,this.receiveController.onError,this.receiveController));var n=this.webSocketController.initSocket(t,e);this.receiveController.updateSocket(n)},t.prototype.closeSocket=function(t){null!==this.webSocketController&&this.webSocketController.closeSocket(t),this.removeSocket(t)},t.prototype.closeAllSocket=function(){for(;this.listSocket.length>0;){var t=this.listSocket[0];this.closeSocket(t)}},t.prototype.sendMessage=function(t,e){null!==this.webSocketController&&this.webSocketController.sendMessage(t,e)},t}();e.SocketController=r},7304:function(t,e,n){"use strict";var i,o=n(9998),r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WebSocketController=void 0;var s=n(423),a=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.initSocket=function(t,e){var n=o(t,{reconnectionDelayMax:1e4,auth:{token:"Bearer ".concat(e)}});return n.on("connect",this._onSocketOpen.bind(this)),n.on("disconnect",this._onSocketClose.bind(this)),n.on("error",this._onSocketError.bind(this)),this.addSocket(t,n),n},e.prototype.sendMessage=function(t,e){var n=this.getSocket(e);null!==n&&n.connected&&n.send(t.buffer)},e.prototype._onSocketOpen=function(){this.eventsObservable.emit(s.EVENT_NAME.OPEN)},e.prototype._onSocketClose=function(){this.eventsObservable.emit(s.EVENT_NAME.CLOSE)},e.prototype._onSocketError=function(){this.eventsObservable.emit(s.EVENT_NAME.ERROR)},e.prototype.isConnected=function(t){var e=this.getSocket(t);return null!==e&&e.connected},e}(s.AbsSocketController);e.WebSocketController=a},1221:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UIWidget=e.VERTICAL_MODE=e.HORIZONTAL_MODE=void 0;var i,o,r=Phaser.Scale.Events.RESIZE,s=n(7101),a=n(9627),c=n(490);!function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.CENTER=2]="CENTER",t[t.RIGHT=3]="RIGHT",t[t.STRETCH=4]="STRETCH",t[t.TEST=5]="TEST"}(i=e.HORIZONTAL_MODE||(e.HORIZONTAL_MODE={})),function(t){t[t.NONE=0]="NONE",t[t.TOP=1]="TOP",t[t.CENTER=2]="CENTER",t[t.BOTTOM=3]="BOTTOM",t[t.STRETCH=4]="STRETCH",t[t.TEST=5]="TEST"}(o=e.VERTICAL_MODE||(e.VERTICAL_MODE={}));var h=function(){function t(t,e,n,a,c,h,l){void 0===n&&(n=i.NONE),void 0===a&&(a=0),void 0===c&&(c=o.NONE),void 0===h&&(h=0),void 0===l&&(l=!0),this.object=t,this.modeMap=new Map([["LeftTop",s.ALIGN_CONST.LEFT_TOP],["LeftCenter",s.ALIGN_CONST.LEFT_CENTER],["LeftBottom",s.ALIGN_CONST.LEFT_BOTTOM],["CenterTop",s.ALIGN_CONST.TOP_CENTER],["CenterCenter",s.ALIGN_CONST.CENTER],["CenterBottom",s.ALIGN_CONST.BOTTOM_CENTER],["RightTop",s.ALIGN_CONST.RIGHT_TOP],["RightCenter",s.ALIGN_CONST.RIGHT_CENTER],["RightBottom",s.ALIGN_CONST.RIGHT_BOTTOM]]),this.target=null,this._horizontalAlignment={mode:i.NONE,left:0,right:0},this._verticalAlignment={mode:o.NONE,top:0,bottom:0},this._isGlobal=!0,this._isEnableWidget=!0,t.uiWidget=this,e&&(this.target=e),this._isGlobal=l,this._horizontalAlignment.mode=n,this._setHorizontalOffset(a),this._verticalAlignment.mode=c,this._setVerticalOffset(h),this.object.scene.scale.on(r,this.onResize,this),this.updateAlignPosition()}return t.prototype._setHorizontalOffset=function(t){Array.isArray(t)?(this._horizontalAlignment.left=t[0],this._horizontalAlignment.right=t[1]):this._horizontalAlignment.left=t},t.prototype._setVerticalOffset=function(t){Array.isArray(t)?(this._verticalAlignment.top=t[0],this._verticalAlignment.bottom=t[1]):this._verticalAlignment.top=t},t.prototype.setHorizontal=function(t,e){this._horizontalAlignment.mode=t,this._setHorizontalOffset(e),this.updateAlignPosition()},t.prototype.setVertical=function(t,e){this._verticalAlignment.mode=t,this._setVerticalOffset(e),this.updateAlignPosition()},t.prototype.setTarget=function(t){this.target=t,this.updateAlignPosition()},t.prototype.enableWidget=function(t){void 0===t&&(t=!0),this._isEnableWidget!==t&&(this._isEnableWidget=t,t?(this.object.scene.scale.on(r,this.onResize,this),this.updateAlignPosition()):this.object.scene.scale.off(r,this.onResize,this))},t.prototype.onResize=function(){this.updateAlignPosition()},t.prototype.updateAlignPosition=function(){if(this._isEnableWidget){var t=this.target||this.object.parentContainer,e=this.getFunction(this._horizontalAlignment.mode,this._verticalAlignment.mode);if(e){var n=this._horizontalAlignment.left,r=this._horizontalAlignment.right,c=this._verticalAlignment.top,h=this._verticalAlignment.bottom,l=new Phaser.Geom.Rectangle;t&&"function"==typeof t.getBounds&&t.getBounds(l),n=this.convertPercent(n,l.width),r=this.convertPercent(r,l.width),c=this.convertPercent(c,l.height),h=this.convertPercent(h,l.height);var u=0,d=0;this._horizontalAlignment.mode===i.STRETCH&&(u=l.width-(n+r),this.object instanceof RexPlugins.GameObjects.NinePatch?this.object.resize(u,this.object.height):this.object.displayWidth=u),this._verticalAlignment.mode===o.STRETCH&&(d=l.height-(c+h),this.object instanceof RexPlugins.GameObjects.NinePatch?this.object.resize(this.object.width,d):this.object.displayHeight=d),(0,s.QuickSet)(this.object,t,e,n,c,this._isGlobal)}else{n=this._horizontalAlignment.left,c=this._verticalAlignment.top;(0,a.TopLeft)(this.object,t,n,c,this._isGlobal)}}},t.prototype.getFunction=function(t,e){var n="";switch(t){case i.LEFT:case i.STRETCH:n="Left";break;case i.CENTER:n="Center";break;case i.RIGHT:n="Right"}var r="";switch(e){case o.TOP:case o.STRETCH:r="Top";break;case o.CENTER:r="Center";break;case o.BOTTOM:r="Bottom"}var s=n+r;return this.modeMap.get(s)},t.prototype.convertPercent=function(t,e){return"string"==typeof t?c.Utils.convertStringPercent(t,e):t},t}();e.UIWidget=h},6563:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1221);Phaser.GameObjects.GameObject.prototype.addUIWidget=function(t,e,n,o,r,s){return void 0===e&&(e=i.HORIZONTAL_MODE.NONE),void 0===n&&(n=0),void 0===o&&(o=i.VERTICAL_MODE.NONE),void 0===r&&(r=0),void 0===s&&(s=!0),new i.UIWidget(this,t,e,n,o,r,s)}},9834:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetBounds=e.GetCenterY=e.GetCenterX=e.GetBottom=e.GetTop=e.GetRight=e.GetLeft=e.SetCenterY=e.SetCenterX=e.SetCenter=e.SetBottom=e.SetTop=e.SetRight=e.SetLeft=void 0;var n=Phaser.Geom.Rectangle,i=Phaser.GameObjects.Container,o=new n(0,0,0,0);function r(t,e){var n=a(t),i=c(t),o=l(t);return t.x=(e+n.width*(i-.5))/o,t}function s(t,e){var n=a(t),i=h(t),o=l(t);return t.y=(e+n.height*(i-.5))/o,t}function a(t,e){if(void 0===e&&(e=!0),"function"==typeof t.getBounds)t.getBounds(o);else{var n=l(t);o.setTo(0,0,t.width*n,t.height*n)}if(!e){var i=c(t),r=h(t);o.x=t.x-o.width*(1-i),o.y=t.y-o.height*(1-r)}return o}function c(t){var e=t.originX;if(t instanceof i){var n=t.getAt(0);n&&(e=n.originX)}return e}function h(t){var e=t.originY;if(t instanceof i){var n=t.getAt(0);n&&(e=n.originY)}return e}function l(t){return null===t.parentContainer?1:t.getGlobalScale()}e.SetLeft=function(t,e){var n=a(t),i=c(t),o=l(t);return t.x=(e+n.width*i)/o,t},e.SetRight=function(t,e){var n=a(t),i=c(t),o=l(t);return t.x=(e-n.width*(1-i))/o,t},e.SetTop=function(t,e){var n=a(t),i=h(t),o=l(t);return t.y=(e+n.height*i)/o,t},e.SetBottom=function(t,e){var n=a(t),i=h(t),o=l(t);return t.y=(e-n.height*(1-i))/o,t},e.SetCenter=function(t,e,n){return r(t,e),s(t,n),t},e.SetCenterX=r,e.SetCenterY=s,e.GetLeft=function(t,e){return a(t,e).left},e.GetRight=function(t,e){return a(t,e).right},e.GetTop=function(t,e){return a(t,e).top},e.GetBottom=function(t,e){return a(t,e).bottom},e.GetCenterX=function(t,e){return a(t,e).centerX},e.GetCenterY=function(t,e){return a(t,e).centerY},e.GetBounds=a},7101:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuickSet=e.ALIGN_CONST=void 0;var i,o=n(9627);!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_CENTER=1]="TOP_CENTER",t[t.TOP_RIGHT=2]="TOP_RIGHT",t[t.LEFT_TOP=3]="LEFT_TOP",t[t.LEFT_CENTER=4]="LEFT_CENTER",t[t.LEFT_BOTTOM=5]="LEFT_BOTTOM",t[t.CENTER=6]="CENTER",t[t.RIGHT_TOP=7]="RIGHT_TOP",t[t.RIGHT_CENTER=8]="RIGHT_CENTER",t[t.RIGHT_BOTTOM=9]="RIGHT_BOTTOM",t[t.BOTTOM_LEFT=10]="BOTTOM_LEFT",t[t.BOTTOM_CENTER=11]="BOTTOM_CENTER",t[t.BOTTOM_RIGHT=12]="BOTTOM_RIGHT"}(i=e.ALIGN_CONST||(e.ALIGN_CONST={}));var r=[];r[i.BOTTOM_CENTER]=o.BottomCenter,r[i.BOTTOM_LEFT]=o.BottomLeft,r[i.BOTTOM_RIGHT]=o.BottomRight,r[i.CENTER]=o.Center,r[i.LEFT_CENTER]=o.LeftCenter,r[i.RIGHT_CENTER]=o.RightCenter,r[i.TOP_CENTER]=o.TopCenter,r[i.TOP_LEFT]=o.TopLeft,r[i.TOP_RIGHT]=o.TopRight,r[i.LEFT_BOTTOM]=r[i.BOTTOM_LEFT],r[i.LEFT_TOP]=r[i.TOP_LEFT],r[i.RIGHT_BOTTOM]=r[i.BOTTOM_RIGHT],r[i.RIGHT_TOP]=r[i.TOP_RIGHT],e.QuickSet=function(t,e,n,i,o,s){return r[n](t,e,i,o,s)}},9627:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopRight=e.TopLeft=e.TopCenter=e.RightCenter=e.LeftCenter=e.Center=e.BottomRight=e.BottomCenter=e.BottomLeft=void 0;var i=n(9834);e.BottomLeft=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetLeft)(t,(0,i.GetLeft)(e,r)+n),(0,i.SetBottom)(t,(0,i.GetBottom)(e,r)-o),t},e.BottomCenter=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetCenterX)(t,(0,i.GetCenterX)(e,r)+n),(0,i.SetBottom)(t,(0,i.GetBottom)(e,r)-o),t},e.BottomRight=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetRight)(t,(0,i.GetRight)(e,r)-n),(0,i.SetBottom)(t,(0,i.GetBottom)(e,r)-o),t},e.Center=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetCenter)(t,(0,i.GetCenterX)(e,r)+n,(0,i.GetCenterY)(e,r)+o),t},e.LeftCenter=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetLeft)(t,(0,i.GetLeft)(e,r)+n),(0,i.SetCenterY)(t,(0,i.GetCenterY)(e,r)+o),t},e.RightCenter=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetRight)(t,(0,i.GetRight)(e,r)-n),(0,i.SetCenterY)(t,(0,i.GetCenterY)(e,r)+o),t},e.TopCenter=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetCenterX)(t,(0,i.GetCenterX)(e,r)+n),(0,i.SetTop)(t,(0,i.GetTop)(e,r)+o),t},e.TopLeft=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetLeft)(t,(0,i.GetLeft)(e,r)+n),(0,i.SetTop)(t,(0,i.GetTop)(e,r)+o),t},e.TopRight=function(t,e,n,o,r){return void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=!0),(0,i.SetRight)(t,(0,i.GetRight)(e,r)-n),(0,i.SetTop)(t,(0,i.GetTop)(e,r)+o),t}},490:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0;var o=function(){function t(){}return t.dispatchCustomEvent=function(t,e){window.dispatchEvent(new CustomEvent(t,e))},t.convertStringPercent=function(t,e){return parseInt(t.replace("%",""))/100*e},t.randomColor=function(){return Number("0x"+Math.floor(16777215*Math.random()).toString(16))},t.checkSupportedWebP=function(){return n(this,void 0,void 0,(function(){var e,n;return i(this,(function(i){switch(i.label){case 0:if(!window.createImageBitmap)return t.isSupportedWebP=!1,[2];e="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEAAQAcJaQAA3AA/v3AgAA=",i.label=1;case 1:return i.trys.push([1,5,,6]),[4,fetch(e)];case 2:return[4,i.sent().blob()];case 3:return n=i.sent(),[4,createImageBitmap(n)];case 4:return i.sent(),t.isSupportedWebP=!0,[3,6];case 5:return i.sent(),t.isSupportedWebP=!1,[3,6];case 6:return[2]}}))}))},t.isSupportedWebP=!0,t}();e.Utils=o},6405:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetsManifest=e.SoundName=e.AtlasName=void 0;var i,o=n(9241);!function(t){!function(t){t.name="AtlasHiloMisc",function(t){t["arrow-high"]="arrow-high",t["arrow-low"]="arrow-low",t.change="change",t.decor="decor",t.high="high",t.light="light",t.low="low"}(t.Frame||(t.Frame={}))}(t.AtlasHiloMisc||(t.AtlasHiloMisc={})),function(t){t.name="AtlasHiloCard",function(t){t["bg-card"]="bg-card",t["black-0"]="black-0",t["black-1"]="black-1",t["black-10"]="black-10",t["black-11"]="black-11",t["black-12"]="black-12",t["black-2"]="black-2",t["black-3"]="black-3",t["black-4"]="black-4",t["black-5"]="black-5",t["black-6"]="black-6",t["black-7"]="black-7",t["black-8"]="black-8",t["black-9"]="black-9",t["card-up"]="card-up",t["clubs-s"]="clubs-s",t.clubs="clubs",t["diamonds-s"]="diamonds-s",t.diamonds="diamonds",t["hearts-s"]="hearts-s",t.hearts="hearts",t.jack="jack",t.king="king",t.queen="queen",t["red-0"]="red-0",t["red-1"]="red-1",t["red-10"]="red-10",t["red-11"]="red-11",t["red-12"]="red-12",t["red-2"]="red-2",t["red-3"]="red-3",t["red-4"]="red-4",t["red-5"]="red-5",t["red-6"]="red-6",t["red-7"]="red-7",t["red-8"]="red-8",t["red-9"]="red-9",t["spades-s"]="spades-s",t.spades="spades"}(t.Frame||(t.Frame={}))}(t.AtlasHiloCard||(t.AtlasHiloCard={})),function(t){t.name="AtlasHiloNinePatch",function(t){t["bg-high"]="bg-high",t["bg-low"]="bg-low",t["bg-ratio"]="bg-ratio",t["bg-table"]="bg-table"}(t.Frame||(t.Frame={}))}(t.AtlasHiloNinePatch||(t.AtlasHiloNinePatch={}))}(i=e.AtlasName||(e.AtlasName={})),function(t){t.background1="background-1",t.background2="background-2",t.chooseClick="choose-click",t.clap="clap",t.coin="coin",t.dealingCard="dealing-card",t.flipCard="flip-card",t.winRound="win-round"}(e.SoundName||(e.SoundName={})),e.AssetsManifest={images:[],sprites:[i.AtlasHiloMisc.name,i.AtlasHiloCard.name,i.AtlasHiloNinePatch.name,"core/AtlasCoinsAnimate","core/AtlasMisc","core/AtlasNinePatch"],fonts:{custom:{families:["Montserrat-Bold","Montserrat-SemiBold"],urls:[o.Config.BASE_URL+o.Config.PATH_ASSETS+"fonts/fonts.css"]}},animations:["char"],audio:["background-1.mp3","background-2.mp3","choose-click.mp3","clap.mp3","coin.mp3","dealing-card.mp3","flip-card.mp3","win-round.mp3","core/menu-click.mp3"]}},8996:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(3505),s=n(5802),a=n(6853),c=n(3975),h=n(2440);window.addEventListener("init-hilo",(function(t){return i(void 0,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,(0,r.initGame)({title:"HILO 1.0",render:{roundPixels:!1},plugins:{global:[{key:"rexPerspectiveImagePlugin",plugin:h,start:!0}]},scene:[c.LoadingScene,s.HiloScene]})];case 1:return t.sent().renderer.pipelines.addPostPipeline("GlowOuter",a.GlowOuterPostFx),[2]}}))}))}))},6438:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CardRecently=void 0;var r=Phaser.GameObjects.Layer,s=Phaser.Geom.Rectangle,a=n(5080),c=n(7683),h=function(t){function e(e){var n=t.call(this,e)||this;return n.hiloScene=e,n.maxCards=4,n._scaleCard=.6,n._eachHeight=15*a.DPR,n._gap=10,n._limitBounds=new s,n.hiloScene.isMobile||(n._gap=20,n._eachHeight=58*a.DPR*n._scaleCard),n}return o(e,t),e.prototype.setLimitBounds=function(t){s.CopyFrom(t,this._limitBounds)},e.prototype.calculateMaxCards=function(t){this.hiloScene.isMobile?this.maxCards=e.MAX_CARDS_MOBILE:this.maxCards=e.MAX_CARDS_DESKTOP},e.prototype.addMultiCard=function(t){for(var e=0,n=t.length-1;e<n;e++){var i=c.CardManager.getCard(t[e].card);null!==i&&(this.hiloScene.add.existing(i),this.addToRecent(i,!1))}},e.prototype.addToRecent=function(t,e){void 0===e&&(e=!0),t.parentContainer&&t.parentContainer.remove(t),this.add(t,!0);var n,i,o=t.getCardSize();this.calculateMaxCards(o),this.tweenCards(e),this.hiloScene.isMobile?(n=this.hiloScene.sizer.width-this._gap-o.width/2*this._scaleCard,i=this._gap+this._eachHeight*(this.length-1)+o.height/2*this._scaleCard):(n=this._gap+o.width/2*this._scaleCard,i=this.hiloScene.sizer.height-this._gap-o.height/2*this._scaleCard),e?this.hiloScene.tweens.add({targets:t,x:n,y:i,scaleX:this._scaleCard,scaleY:this._scaleCard,duration:500}):(t.setPosition(n,i),t.setScale(this._scaleCard))},e.prototype.tweenCards=function(t){void 0===t&&(t=!0),this.hiloScene.isMobile?this.length>this.maxCards&&(this._scrollingItems(t),this._removeFirst()):(this._scrollingItems(t),this.length>this.maxCards&&this._removeFirst())},e.prototype._scrollingItems=function(t){if(void 0===t&&(t=!0),t)this.hiloScene.tweens.add({targets:this.getChildren(),y:"-="+this._eachHeight,duration:500});else for(var e=this.getChildren(),n=0,i=e.length;n<i;n++)e[n].y-=this._eachHeight},e.prototype._removeFirst=function(t){void 0===t&&(t=!0);var e=this.removeAt(0,!1);t?this.hiloScene.tweens.add({targets:e,duration:500,alpha:0,onComplete:function(t,n){return e.setVisible(!1)}}):(e.setAlpha(0),e.setVisible(!1))},e.prototype.reset=function(){for(var t=this.getChildren(),e=0,n=t.length;e<n;e++)t[e].setVisible(!1);this.removeAll(!0)},e.MAX_CARDS_DESKTOP=7,e.MAX_CARDS_MOBILE=6,e}(r);e.CardRecently=h},8744:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ChangeCard=void 0;var r=Phaser.GameObjects.Container,s=n(6405),a=n(5080),c=function(t){function e(e){var n=t.call(this,e)||this;n.hiloScene=e,n._tShow=null,n._tHide=null;var i=n.scene.add.image(0,0,s.AtlasName.AtlasHiloMisc.name,"change"),o=n.scene.make.text({text:"Change Card",style:{fontFamily:"Montserrat-SemiBold",fontSize:14*a.DPR+"px",color:"#fff"}});return n.hiloScene.isMobile||o.setFontSize(18),o.setOrigin(.5),n.add([i,o]),n}return o(e,t),e.prototype.show=function(){this.setVisible(!0),this.alpha=0,null===this._tShow?this._tShow=this.hiloScene.tweens.add({targets:this,alpha:1,delay:300,duration:300}):this._tShow.restart()},e.prototype.hide=function(){null===this._tHide?this._tHide=this.hiloScene.tweens.add({targets:this,alpha:0,delay:300,duration:300}):this._tHide.restart()},e}(r);e.ChangeCard=c},5945:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoBoard=void 0;var r=n(6405),s=n(9548),a=n(1221),c=n(1849),h=n(2386),l=n(8744),u=n(6871),d=n(6676),p=n(5080),f=Phaser.GameObjects.Container,g=r.AtlasName.AtlasHiloMisc,y=Phaser.Geom.Point,v=r.AtlasName.AtlasHiloNinePatch,m=n(8529),b=n(490),_=n(6071),C=function(t){function e(e){var n=t.call(this,e)||this;n.hiloScene=e,n._background=n.scene.make.rexNinePatch({x:0,y:0,width:n.hiloScene.sizer.width,height:n.hiloScene.sizer.height/2}),n.decor=n.scene.make.image({key:g.name,frame:g.Frame.decor}),n.changeCard=new l.ChangeCard(n.hiloScene),n.compoCharacter=new s.CompoCharacter(n.hiloScene),n.compoCard=null,n.compoChoose=null,n.iconLowHigh=null,n.effectCashOut=null,n.glowPipeline=n.hiloScene.renderer.pipelines.add("GlowFilterPipelineDecor",new _.GlowFilterPipeline(n.hiloScene.game)),n._background.setOrigin(0),n.add(n._background),n.compoCharacter.changeState(s.ANIMATION_NAME.IDLE),n.add(n.decor),n.compoCard=new c.CompoCard(n.hiloScene,n._background,n.compoCharacter),n.compoCard.on(c.EVENT_CARDS.ENABLE_CHOOSE,(function(t){null!==n.compoChoose&&n.compoChoose.enInteract(t)})),n.add(n.compoCard);var i=n.changeCard.getBounds();return n.changeCard.setInteractive({useHandCursor:!0,hitArea:new Phaser.Geom.Rectangle(-i.width/2,-i.height/2,i.width,i.height),hitAreaCallback:Phaser.Geom.Rectangle.Contains}),n.changeCard.on(Phaser.Input.Events.POINTER_DOWN,(function(){return n.onChangeCard()})),n.add(n.changeCard),n.changeCard.setVisible(!1),n.add(n.compoCharacter),n.playEffectDecor(),n}return o(e,t),e.prototype.changeMode=function(t,e){if(this._updateBackground(e),null!==this.compoCard){var n=void 0,i=void 0;if(null!==this.compoChoose&&this.compoChoose.visible&&(n=this.compoChoose.lower.getBoundsSize(),i=this.compoChoose.higher.getBoundsSize()),this.compoCard.changeMode(t,n,i),null!==this.iconLowHigh){var o=this.compoCard.getBoundsCardDisplay();this.iconLowHigh.setPosition(o.right+10*p.DPR,o.bottom)}}t===u.MODE_STYLES.LIGHT?null!==this.compoCharacter&&this.compoCharacter.setVisible(!0):null!==this.compoCharacter&&this.compoCharacter.setVisible(!1)},e.prototype.getBoundsBackground=function(){return this._background.getBounds()},e.prototype.onChangeCard=function(t){var e=this;b.Utils.dispatchCustomEvent("hilo-interactive-bet",{detail:!1}),this.hiloScene.input.enabled=!1,this.hiloScene.mode===u.MODE_STYLES.DARK?this.throwCard(t):null!==this.compoCharacter&&this.compoCharacter.changeCard((function(){e.throwCard(t)}))},e.prototype.throwCard=function(t){var e=this;void 0===t&&(t=Phaser.Math.RND.integerInRange(1,52)),null!==this.compoCard&&(m.HiloData.idCardChosen=t,this.compoCard.changeCard(t,(function(){null!==e.changeCard&&(e.changeCard.setVisible(!0),e.hiloScene.input.enabled=!0,b.Utils.dispatchCustomEvent("hilo-interactive-bet",{detail:!0})),m.HiloData.continueGame&&m.HiloData.dataBet&&e.hiloScene.onBetting(m.HiloData.dataBet)})))},e.prototype.onPlayerChooseCard=function(t,e,n){null!==this.compoChoose&&this.compoChoose.enInteract(!1),null!==this.compoCard&&this.compoCard.onPlayerChooseCard(t,e,n)},e.prototype.onPlayerBetting=function(t){if(this.compoChoose=this.getCompoChoose(),this.compoChoose.show(t),null!==this.changeCard&&this.changeCard.setVisible(!1),null!==this.compoCard){var e=this.compoChoose.lower.getBoundsSize(),n=this.compoChoose.higher.getBoundsSize();this.compoCard.onPlayerBetting(e.centerX,n.left,n.right)}},e.prototype.getCompoChoose=function(){var t=this;if(null===this.compoChoose){if(this.compoChoose=new h.CompoChoose(this.hiloScene,this._background),!this.hiloScene.isMobile){var e=this.compoChoose.getBounds();Phaser.Display.Align.In.BottomCenter(this.compoChoose,this._background,0,-e.height/2-25)}this.compoChoose.enInteract(!1),this.compoChoose.on(h.CompoChoose.EVENT_CLICK,(function(e,n){t.setIconLowHigh(e),null!==t.compoCard&&t.compoCard.onChosenItem(e)})),this.add(this.compoChoose)}return this.compoChoose},e.prototype.setIconLowHigh=function(t){if(null===this.iconLowHigh&&(this.iconLowHigh=this.scene.add.image(0,0,g.name,g.Frame.high),this.iconLowHigh.setOrigin(0,1),this.add(this.iconLowHigh)),this.iconLowHigh.setVisible(!0),this.iconLowHigh.setFrame(t?g.Frame.low:g.Frame.high),null!==this.compoCard){var e=this.compoCard.getBoundsCardDisplay();this.iconLowHigh.setPosition(e.right+10*p.DPR,e.bottom)}},e.prototype.playEffectCashOut=function(t,e){null===this.effectCashOut&&(this.effectCashOut=new d.EffectCashOut(this.hiloScene)),this.effectCashOut.start(t,e)},e.prototype.playEffectDecor=function(){var t,e=this;this.decor.setPipeline(this.glowPipeline);var n=function(){e.glowPipeline.intensity=0,void 0===t?t=e.hiloScene.tweens.add({targets:e.glowPipeline,intensity:.1,duration:200,repeat:3,yoyo:!0,completeDelay:3e3,onComplete:function(){t.remove(),n()}}):t.restart()};n()},e.prototype.getCardDisplay=function(){return null!==this.compoCard?this.compoCard.getCardDisplay():null},e.prototype.onConnected=function(t){var e=this;this.compoCharacter.hello((function(){if(e.hiloScene.onStart(),t&&!t.isEnded){var n=t.startCard;t.rounds.length>0&&(n=t.rounds[t.rounds.length-1].card),e.onChangeCard(n)}else e.onChangeCard()}))},e.prototype.onPlayerWin=function(){null!==this.compoCharacter&&this.compoCharacter.visible&&this.compoCharacter.clap(2),null!==this.compoChoose&&(this.compoChoose.reset(),this.compoChoose.startTweenLight(),this.compoChoose.updateWinText(),m.HiloData.dataBet&&this.compoChoose.updateWinMoney(m.HiloData.dataBet)),null!==this.iconLowHigh&&this.iconLowHigh.setVisible(!1),null!==this.compoCard&&this.compoCard.onPlayerWin()},e.prototype.onPlayerLose=function(){null!==this.compoCard&&this.compoCard.onPlayerLose()},e.prototype.onPlayerCashOut=function(t){var e=this;null!==this.compoCharacter&&this.compoCharacter.visible?this.compoCharacter.playerWin((function(n){e.playEffectCashOut(t,n)})):this.playEffectCashOut(t,new y(this._background.width/2,this._background.height/2))},e.prototype.reset=function(){null!==this.compoChoose&&this.compoChoose.hide(),null!==this.iconLowHigh&&this.iconLowHigh.setVisible(!1),null!==this.compoCard&&this.compoCard.reset(),null!==this.changeCard&&this.changeCard.show(),this.onChangeCard()},e.prototype.runOnDesktop=function(){this._background.setTexture(v.name,v.Frame["bg-table"],[42,void 0,42],[42,void 0,10]),this._updateBackgroundDesktop(),null!==this.compoCharacter&&Phaser.Display.Align.In.TopCenter(this.compoCharacter,this._background,0,-5),null!==this.decor&&Phaser.Display.Align.In.BottomRight(this.decor,this._background,-20,-40),null!==this.changeCard&&Phaser.Display.Align.In.BottomCenter(this.changeCard,this._background,0,-100),null!==this.compoCard&&this.compoCard.runOnDesktop()},e.prototype.runOnMobile=function(t){this._background.setTexture(v.name,v.Frame["bg-table"],[8,void 0,8],[8,void 0,8]),this._updateBackground(t),this._updateAlignment()},e.prototype._updateAlignment=function(){null!==this.compoCharacter&&Phaser.Display.Align.In.TopCenter(this.compoCharacter,this._background,0,-5),null!==this.decor&&this.decor.addUIWidget(this._background,a.HORIZONTAL_MODE.RIGHT,5*p.DPR,a.VERTICAL_MODE.BOTTOM,5*p.DPR),null!==this.changeCard&&this.changeCard.addUIWidget(this._background,a.HORIZONTAL_MODE.CENTER,0,a.VERTICAL_MODE.BOTTOM,10),null!==this.compoCard&&this.compoCard.runOnMobile()},e.prototype._updateBackground=function(t){if(this.hiloScene.isMobile)if(this.hiloScene.mode===u.MODE_STYLES.LIGHT){var e=158*t.scaleY*p.DPR;this._background.setPosition(0,e);var n=t.displayHeight-e;this._background.resize(this.hiloScene.gameWrap.width,Math.max(n,140*p.DPR))}else{this._background.setPosition(0);n=Math.max(t.displayHeight,297*p.DPR);this._background.resize(this.hiloScene.gameWrap.width,n)}else this._updateBackgroundDesktop()},e.prototype._updateBackgroundDesktop=function(){if(this.hiloScene.mode===u.MODE_STYLES.LIGHT){var t=this.hiloScene.sizer.height-540;this._background.resize(this.hiloScene.sizer.width,t+20),this._background.setPosition(0,540)}else this._background.setPosition(0,-50),this._background.resize(this.hiloScene.sizer.width,this.hiloScene.sizer.height+60)},e}(f);e.CompoBoard=C},6283:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Card=void 0;var r=Phaser.GameObjects.Container,s=n(6405),a=n(1221),c=s.AtlasName.AtlasHiloCard.Frame,h=Phaser.Structs.Size,l=n(5080),u=function(t){function e(e,n){var i=t.call(this,e)||this;i.id=n,i.AtlasHilo=s.AtlasName.AtlasHiloCard.name,i._sizeCard=new h,i.bgCard=i.scene.make.image({key:i.AtlasHilo,frame:c["bg-card"]});var o=i.bgCard;i.add(o),i._sizeCard.resize(o.width,o.height);var r=i.scene.add.image(0,0,i.AtlasHilo,i.getRank());r.addUIWidget(o,a.HORIZONTAL_MODE.LEFT,"10%",a.VERTICAL_MODE.TOP,"6%",!1),i.add(r);var u=i.scene.add.image(0,0,i.AtlasHilo,i.getSuit());u.addUIWidget(o,a.HORIZONTAL_MODE.RIGHT,0,a.VERTICAL_MODE.BOTTOM,0,!1),i.add(u);var d=i.scene.add.image(0,0,i.AtlasHilo,i.getSuitSmall());return d.setPosition(r.x,r.y+r.height/2+d.height/2+5*l.DPR),i.add(d),i}return o(e,t),e.prototype.getRank=function(){var t=this.id%13-1;-1===t&&(t=12);var e="";return e=this.id<=26?"red-":"black-",c[e+t]},e.prototype.getSuit=function(){var t="";return t=this._checkSpecialSuit()?this._getSpecialSuit():this._getSuit(),c[t]},e.prototype.getSuitSmall=function(){var t=this._getSuit();return c[t+="-s"]},e.prototype._getSuit=function(){var t="",e=Math.ceil(this.id/13);return 1===e?t="hearts":2===e?t="diamonds":3===e?t="clubs":4===e&&(t="spades"),t},e.prototype._getSpecialSuit=function(){var t="",e=this.id%13;return 0===e&&(e=13),11===e?t="jack":12===e?t="queen":13===e&&(t="king"),t},e.prototype._checkSpecialSuit=function(){var t=this.id%13;return 0===t&&(t=13),11===t||12===t||13===t},e.prototype.getCardSize=function(){return this._sizeCard},e}(r);e.Card=u},9601:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Card3D=void 0;var i=n(6405).AtlasName.AtlasHiloCard,o=n(5080),r=function(){function t(t){this.hiloScene=t,this.rt=this.hiloScene.make.renderTexture({width:this.hiloScene.sizer.width,height:this.hiloScene.sizer.height},!1),this.card=this.hiloScene.add.rexPerspectiveCard({back:{key:i.name,frame:i.Frame["card-up"]},front:{key:this.rt.texture.key},face:1,flip:{ease:"Power0"}})}return Object.defineProperty(t.prototype,"x",{get:function(){return this.card.x},set:function(t){this.card.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.card.y},set:function(t){this.card.y=t},enumerable:!1,configurable:!0}),t.prototype.setPosition=function(t,e,n){this.card.setPosition(t,e),this.card.setScale(n)},t.prototype.setVisible=function(t){this.card.setVisible(t)},t.prototype.setDepth=function(t){this.card.setDepth(t)},t.prototype.reset=function(){this.card.setFace(1)},t.prototype.drawFrontFace=function(t){this.rt.clear(),this.rt.draw(t)},t.prototype.startFlip=function(t,e,n){var i,r,s=this;e?null===(i=this.card.flip)||void 0===i||i.flipRight(t):null===(r=this.card.flip)||void 0===r||r.flipLeft(t),this.hiloScene.tweens.add({targets:this.card,y:this.card.y-5*o.DPR,scaleX:1.2*this.card.scaleX,scaleY:1.2*this.card.scaleY,duration:t/2,yoyo:!0,onComplete:function(){s.setVisible(!1),s.reset(),n()}})},t}();e.Card3D=r},7683:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CardManager=void 0;var i=n(6283),o=n(6405),r={},s=function(){function t(){}return t.getCard=function(t){if(t>52)return null;var e=r[t];return(void 0===e||e.visible)&&(e=new i.Card(this.hiloScene,t)),e.setVisible(!0),e.setScale(1),e.setAlpha(1),e.bgCard.clearTint(),r[t]=e,e},t.getCardUp=function(){return this.hiloScene.add.image(0,0,o.AtlasName.AtlasHiloCard.name,o.AtlasName.AtlasHiloCard.Frame["card-up"])},t.destroy=function(){r={}},t}();e.CardManager=s},1849:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoCard=e.EVENT_CARDS=void 0;var r=Phaser.GameObjects.Container,s=Phaser.Geom.Rectangle,a=Phaser.Math.Vector2,c=n(7683),h=n(4003),l=n(1211),u=n(6871),d=n(6405),p=n(5080),f=n(9601);e.EVENT_CARDS={ENABLE_CHOOSE:"enabledChoose"};var g=function(t){function n(e,n,i){var o=t.call(this,e)||this;return o.hiloScene=e,o.background=n,o.character=i,o.cardStock=null,o.cardAction=null,o._cardOverturn=null,o._cardDisplay=null,o._cardDisplay3D=new f.Card3D(o.hiloScene),o._cbCardDisplayCompleted=null,o._idOverTurn=-1,o._boundsCharacter=new s,o._boundsTemp=new s,o.isPlayerBetting=!1,c.CardManager.hiloScene=o.hiloScene,o._cardDisplay3D.setDepth(200),o._cardDisplay3D.setPosition(-9999,-9999,1),o.character.getBounds(o._boundsCharacter),o.cardStock=new h.CardStock(o.hiloScene),o.add(o.cardStock),o}return o(n,t),n.prototype.changeMode=function(t,e,n){if(this.character.getBounds(this._boundsCharacter),t===u.MODE_STYLES.LIGHT?(null!==this._cardDisplay&&(this.hiloScene.isMobile?this._cardDisplay.y=this._boundsCharacter.bottom+15*p.DPR:this._cardDisplay.y=this._boundsCharacter.bottom),null!==this.cardStock&&(this.hiloScene.isMobile?(Phaser.Display.Align.To.BottomRight(this.cardStock,this.character,50*p.DPR,0),this.cardStock.y=this._boundsCharacter.bottom+20*p.DPR):this.cardStock.y=this._boundsCharacter.bottom+10,this.cardStock.savePosition())):(null!==this._cardDisplay&&(this.hiloScene.isMobile?this._cardDisplay.y=.6*this.background.height:this._cardDisplay.y=this.hiloScene.sizer.height/2),null!==this.cardStock&&(this.hiloScene.isMobile?(Phaser.Display.Align.In.Center(this.cardStock,this.background,50*p.DPR,0),null!==this._cardDisplay&&(this.cardStock.y=this._cardDisplay.y+5*p.DPR)):(Phaser.Display.Align.In.Center(this.cardStock,this.hiloScene.sizer),this.cardStock.x+=this.getBoundsCardDisplay().width+20,this.cardStock.y+=5),this.cardStock.savePosition())),null!==this.cardStock){if(this.isPlayerBetting&&null!==this._cardDisplay&&e&&n){var i=e.centerX;this.hiloScene.isMobile&&(i=e.centerX-this._cardDisplay.getCardSize().width/2),this.cardStock.x=(i+this._cardDisplay.getCardSize().width/2+n.left)/2}if(null!==this.cardAction){var o=this.cardStock.getLastCard().getGlobalPosition();this.cardAction.setPosition(o.x,o.y)}}},n.prototype.runOnMobile=function(){null!==this.cardStock&&(Phaser.Display.Align.To.BottomRight(this.cardStock,this.character,50*p.DPR,-55*p.DPR),this.character.getBounds(this._boundsCharacter),this.cardStock.y=this._boundsCharacter.bottom+20*p.DPR,this.cardStock.savePosition())},n.prototype.runOnDesktop=function(){null!==this.cardStock&&(Phaser.Display.Align.To.BottomRight(this.cardStock,this.character,140,140),this.cardStock.savePosition())},n.prototype.getBoundsCardDisplay=function(){return this._cardDisplay&&this._cardDisplay.getBounds(this._boundsTemp),this._boundsTemp},n.prototype.getCardDisplay=function(){return this._cardDisplay},n.prototype.changeCard=function(t,e){if(this.hiloScene.soundManager.play(d.SoundName.dealingCard),this._idOverTurn=t,this._cbCardDisplayCompleted=e,null!==this._cardDisplay&&(this.remove(this._cardDisplay),this._cardDisplay.setVisible(!1)),this.cardStock){null!==this._cardOverturn&&(this.remove(this._cardOverturn),this.cardStock.pushCard(this._cardOverturn)),this._cardOverturn=this.cardStock.getCard(),this.add(this._cardOverturn);var n=this.cardStock.getGlobalPosition(),i=this.toLocal(n.x,n.y,this._cardOverturn);this._cardOverturn.setPosition(i.x,i.y),this._cardOverturn.setScale(this.cardStock.getLastCard().getGlobalScale()),this.moveOverTurnCard()}},n.prototype.moveOverTurnCard=function(){var t=this;if(null!==this._cardOverturn){this.character.getBounds(this._boundsCharacter);var e=void 0,n=void 0;this.hiloScene.isMobile?this.hiloScene.mode===u.MODE_STYLES.LIGHT?(e=this._boundsCharacter.centerX,n=this._boundsCharacter.bottom+15*p.DPR):(e=this.hiloScene.gameWrap.width/2,n=.6*this.background.height):this.hiloScene.mode===u.MODE_STYLES.LIGHT?(e=this._boundsCharacter.centerX,n=this._boundsCharacter.bottom):(e=this.hiloScene.sizer.width/2,n=this.hiloScene.sizer.height/2);var i=.8*this.hiloScene.gameScale;this.hiloScene.tweens.add({targets:this._cardOverturn,x:e,y:n,scaleX:i,scaleY:i,duration:300,onComplete:function(){return t._flipOver(i)}})}},n.prototype._flipOver=function(t){this._changeCard(t)},n.prototype._changeCard=function(t){var e=this;this._cardDisplay=c.CardManager.getCard(this._idOverTurn),null!==this._cardDisplay&&null!==this._cardOverturn&&(this._cardDisplay.setVisible(!0),this._cardDisplay.setPosition(this.hiloScene.sizer.width/2,this.hiloScene.sizer.height/2),this.add(this._cardDisplay),this._cardDisplay3D.setVisible(!0),this._cardDisplay3D.drawFrontFace(this._cardDisplay),this._cardDisplay3D.setPosition(this._cardOverturn.x,this._cardOverturn.y,t),this._cardDisplay3D.startFlip(500,!0,(function(){null!==e._cardDisplay&&e._cardDisplay.setVisible(!0),null!==e._cbCardDisplayCompleted&&e._cbCardDisplayCompleted()})),this._cardDisplay.setPosition(this._cardDisplay3D.x,this._cardDisplay3D.y),this._cardDisplay.setScale(t),this._cardDisplay.setVisible(!1),null!==this._cardOverturn&&null!==this.cardStock&&(this.remove(this._cardOverturn),this.cardStock.pushCard(this._cardOverturn)))},n.prototype.moveCardDisplayTo=function(t,n,i){var o=this;if(null!==this._cardDisplay){var r=t;this.hiloScene.isMobile&&(r=t-this._cardDisplay.getCardSize().width/2);var s=.9*this.hiloScene.gameScale;if((this.hiloScene.isMobile||this.hiloScene.mode===u.MODE_STYLES.DARK)&&(s=1*this.hiloScene.gameScale),this.hiloScene.tweens.add({targets:this._cardDisplay,x:r,scaleX:s,scaleY:s,duration:500,onComplete:function(){o.emit(e.EVENT_CARDS.ENABLE_CHOOSE,!0)}}),null!==this.cardStock){var a=(r+this._cardDisplay.getCardSize().width/2+n)/2;this.cardStock.moveToCharacter(a,(function(t){return o.dealCards(t,n,i)}))}}},n.prototype.dealCards=function(t,e,n){var i=this;null===this.cardAction&&(this.cardAction=new l.CardAction(this.hiloScene),this.add(this.cardAction)),this.cardAction.show();var o=t.getGlobalPosition();this.cardAction.setPosition(o.x,o.y);var r=0;null!==this._cardDisplay&&(r=this.getBoundsCardDisplay().bottom),this.cardAction.dealCards(e,n,r,(function(){null!==i.cardStock&&i.cardStock.hide()}))},n.prototype.onChosenItem=function(t){null!==this.cardAction&&this.cardAction.enabledInteract(!0,t)},n.prototype.onPlayerChooseCard=function(t,e,n){var i=this;if(null!==this.cardAction){var o=this.cardAction.getCardByPosition(e);if(null!==o){var r=c.CardManager.getCard(t);if(null!==r){r.setVisible(!0),r.setPosition(this.hiloScene.sizer.width/2,this.hiloScene.sizer.height/2);var s=o.getGlobalPosition(),a=this.pointToContainer(s);this._cardDisplay3D.setVisible(!0),this._cardDisplay3D.drawFrontFace(r),this._cardDisplay3D.setPosition(a.x,a.y,o.scale),this._cardDisplay3D.startFlip(600,!1,(function(){r.setVisible(!0),i.hiloScene.time.delayedCall(300,(function(){n?i.hiloScene.onLose():i.hiloScene.onWin()}))})),r.setPosition(o.x,o.y),r.setScale(o.scale),this.cardAction.addCardChosen(r),r.setVisible(!1),o.setVisible(!1)}}}},n.prototype.onPlayerBetting=function(t,e,n){this.isPlayerBetting=!0,this.moveCardDisplayTo(t,e,n)},n.prototype.onPlayerWin=function(){var t=this;if(null!==this._cardDisplay&&null!==this.cardAction){var n=new a(this._cardDisplay.x,this._cardDisplay.y);this.cardAction.moveCardChosen(this._cardDisplay.x,this._cardDisplay.y,this._cardDisplay.scale,(function(i){i.parentContainer&&i.parentContainer.remove(i),t.add(i),i.copyPosition(n),t._cardDisplay=i,t.emit(e.EVENT_CARDS.ENABLE_CHOOSE,!0)}))}},n.prototype.onPlayerLose=function(){this.isPlayerBetting=!1,null!==this.cardAction&&this.cardAction.onPlayerLose()},n.prototype.reset=function(){this.isPlayerBetting=!1,null!==this.cardAction&&this.cardAction.hide(),null!==this.cardStock&&this.cardStock.show(),null!==this._cardDisplay&&this._cardDisplay.setVisible(!1)},n}(r);e.CompoCard=g},1211:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CardAction=void 0;var r=Phaser.GameObjects.Container,s=Phaser.Math.Vector2,a=Phaser.Input.Events.POINTER_DOWN,c=Phaser.Structs.Size,h=Phaser.Geom.Rectangle,l=n(7683),u=n(6405),d=n(6853),p=function(t){function e(e){var n,i=t.call(this,e)||this;i.hiloScene=e,i.listCardsUp=[],i._cardChosen=null,i.tweenHighlight=null,i.arrayPipeline=[],i._boundsCardUp=new h,i._tempV=new s,i._scaleReset=.65,i._scaleFace=.75,i._isDealCardDone=!1,i._isEnabledInteract=!1,i.isLower=!1,i._scaleFace*=i.hiloScene.gameScale,i._scaleReset*=i.hiloScene.gameScale;for(var o=0;o<3;o++)(n=l.CardManager.getCardUp()).setScale(i._scaleReset),n.setInteractive({useHandCursor:!0}).on(a,i.onCardClick.bind(i,n),i),n.setData({index:2-o}),i.listCardsUp.push(n),i.add(n),i.sendToBack(n);return n&&n.getBounds(i._boundsCardUp),i.enabledInteract(!1),i}return o(e,t),e.prototype.getCardByPosition=function(t){for(var e=0;e<this.listCardsUp.length;e++){var n=this.listCardsUp[e];if(n.getData("index")===t)return n}return null},e.prototype.onCardClick=function(t){if(this._isDealCardDone){this.enabledInteract(!1),this.removeGlowing();var e=t.getData("index");this.hiloScene.requestNext(e)}},e.prototype.addCardChosen=function(t){this._cardChosen=t,this.add(t)},e.prototype.dealCards=function(t,e,n,i){var o=this;this.enabledInteract(!1),this.hiloScene.isMobile?this.getLocalPoint(e,n,this._tempV):this.getLocalPoint(t,n,this._tempV);var r=this.listCardsUp.length;this._isDealCardDone=!1,this.scene.tweens.add({targets:this.listCardsUp,duration:500,delay:this.scene.tweens.stagger(200,{}),props:{scaleX:this._scaleFace,scaleY:this._scaleFace,y:this._tempV.y-this.getSizeCardFace().height/2,x:function(t,e,n,i){return o.hiloScene.soundManager.play(u.SoundName.dealingCard,{multiInstance:!0}),o.hiloScene.isMobile?o._tempV.x-i*t.width-t.width*o._scaleFace:o._tempV.x+(r-1-i)*(t.width*o._scaleFace+20)+t.width/2*o._scaleFace}},onComplete:function(){o._isDealCardDone=!0;for(var t=0;t<r;t++){var e=o.listCardsUp[t];e.setData({xOri:e.x,yOri:e.y})}o.addGlowing(),i()}})},e.prototype.dealCardsAgain=function(){var t=this;this.resetCards(),this._isDealCardDone=!1,this.scene.tweens.add({targets:this.listCardsUp,duration:500,delay:this.scene.tweens.stagger(200,{}),props:{scaleX:this._scaleFace,scaleY:this._scaleFace,x:function(e){return t.hiloScene.soundManager.play(u.SoundName.dealingCard,{multiInstance:!0}),e.getData("xOri")},y:function(t){return t.getData("yOri")}},onComplete:function(){t._isDealCardDone=!0,t.addGlowing()}})},e.prototype.moveCardChosen=function(t,e,n,i){var o=this;if(null!==this._cardChosen){this.getLocalPoint(t,e,this._tempV),this.hiloScene.tweens.add({targets:this._cardChosen,duration:500,x:this._tempV.x,y:this._tempV.y,scaleX:n,scaleY:n,onComplete:function(){null!==o._cardChosen&&i(o._cardChosen),o.dealCardsAgain()}});for(var r=0;r<this.listCardsUp.length;r++){var s=this.listCardsUp[r];this.hiloScene.tweens.add({targets:s,scaleX:0,scaleY:0,duration:300})}}},e.prototype.enabledInteract=function(t,e){void 0===e&&(e=!1),this._isEnabledInteract=t,this.isLower=e;for(var n=0;n<this.listCardsUp.length;n++){var i=this.listCardsUp[n];t?i.setInteractive():i.disableInteractive()}t&&this.addGlowing()},e.prototype.getSizeCardFace=function(){var t=this._scaleFace/this._scaleReset;return new c(this._boundsCardUp.width*t,this._boundsCardUp.height*t)},e.prototype.addGlowing=function(){if(this._isEnabledInteract&&this._isDealCardDone){var t=this.isLower?254972:16750849;if(this.arrayPipeline.length>0)for(var e=0;e<this.arrayPipeline.length;e++){(n=this.arrayPipeline[e]).color=t}else{for(e=0;e<this.listCardsUp.length;e++){var n,i=this.listCardsUp[e];i.setPostPipeline(d.GlowOuterPostFx),(n=i.getPostPipeline(d.GlowOuterPostFx)).outerStrength=0,n.innerStrength=0,n.color=t,this.arrayPipeline.unshift(n)}this.tweenGlowing(this.arrayPipeline)}}},e.prototype.removeGlowing=function(){null!==this.tweenHighlight&&this.tweenHighlight.stop(),this.arrayPipeline.length=0;for(var t=0;t<this.listCardsUp.length;t++){this.listCardsUp[t].resetPostPipeline()}},e.prototype.tweenGlowing=function(t){var e=this;this.tweenHighlight=this.hiloScene.tweens.add({targets:t,outerStrength:3,innerStrength:1,duration:400,yoyo:!0,repeat:1,delay:this.hiloScene.tweens.stagger(100,{}),completeDelay:1e3,onComplete:function(t,n){t.remove(),e.tweenGlowing(n)}})},e.prototype.resetCards=function(){for(var t=0;t<this.listCardsUp.length;t++){var e=this.listCardsUp[t];e.setScale(this._scaleReset),e.setPosition(0),e.setVisible(!0)}},e.prototype.onPlayerLose=function(){null!==this._cardChosen&&this._cardChosen.bgCard.setTintFill(8026746)},e.prototype.show=function(){this.setVisible(!0)},e.prototype.hide=function(){this._isDealCardDone=!1,this._isEnabledInteract=!1,null!==this._cardChosen&&this._cardChosen.setVisible(!1),this.resetCards(),this.setVisible(!1)},e}(r);e.CardAction=p},4003:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CardStock=void 0;var r=Phaser.GameObjects.Container,s=n(7683),a=Phaser.Math.Vector2,c=function(t){function e(e){var n=t.call(this,e)||this;n.hiloScene=e,n.container=n.scene.add.container(),n.listCards=[],n.listCardsIdle=[],n.listPositionY=[],n._storePosition=new a,n.container.setScale(.65),n.hiloScene.isMobile||n.container.setScale(.65*n.hiloScene.gameScale),n.add(n.container);for(var i=0;i<5;i++){var o=n.createCard();o.y=-7*i,n.listCards.push(o),n.listPositionY.push(o.y),n.container.add(o)}return n}return o(e,t),e.prototype.getLastCard=function(){return this.container.last},e.prototype.getCard=function(){var t=Phaser.Utils.Array.SpliceOne(this.listCards,this.listCards.length-1);this.remove(t);var e=this.listCardsIdle.pop();return void 0===e&&(e=this.createCard()),this.listCards.unshift(e),e.setVisible(!0),this.container.add(e),this.container.sendToBack(e),this.tweenSort(),t},e.prototype.pushCard=function(t){t.setPosition(0,0),t.setScale(1),t.setVisible(!1),this.listCardsIdle.push(t)},e.prototype.createCard=function(){return s.CardManager.getCardUp()},e.prototype.tweenSort=function(){for(var t=1,e=this.listCards.length;t<e;t++){var n=this.listCards[t];this.scene.tweens.add({targets:n,y:this.listPositionY[t],duration:300})}},e.prototype.moveToCharacter=function(t,e){var n=this;this.savePosition(),this.scene.tweens.add({targets:this,x:t,duration:500,onComplete:function(){e(n.getLastCard())}})},e.prototype.savePosition=function(){this._storePosition.set(this.x,this.y)},e.prototype.show=function(){this.copyPosition(this._storePosition),this.setVisible(!0)},e.prototype.hide=function(){this.setVisible(!1)},e}(r);e.CardStock=c},9548:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoCharacter=e.ANIMATION_NAME=void 0;var r,s,a=Phaser.GameObjects.Container,c=Phaser.Geom.Point,h=n(6405);!function(t){t.HELLO="hello",t.IDLE="idle",t.WIN="win",t.CLAP="clap",t.CHANGE_CARD="change-card"}(r=e.ANIMATION_NAME||(e.ANIMATION_NAME={})),function(t){t.CHANGE_CARD="changeCard",t.THROW_COINS="throwCoins"}(s||(s={}));var l=function(t){function e(e){var n=t.call(this,e)||this;return n.hiloScene=e,n.character=null,n.callbackHello=null,n.callbackClap=null,n.callbackChangeCard=null,n.callbackThrowCoins=null,n}return o(e,t),e.prototype.setScaleCharacter=function(t){null!==this.character&&this.character.setScale(t)},e.prototype.changeState=function(t,e){var n=this;void 0===e&&(e=-1),null===this.character&&(this.character=this.scene.add.armature("mascot","char"),this.character.on(dragonBones.EventObject.COMPLETE,(function(t){t.animationState.name===r.CLAP?(n.changeState(r.IDLE),null!==n.callbackClap&&n.callbackClap()):t.animationState.name===r.WIN?n.clap(5):t.animationState.name===r.HELLO&&null!==n.callbackHello&&n.callbackHello()})),this.character.on(dragonBones.EventObject.FRAME_EVENT,(function(t){if(t.name===s.CHANGE_CARD)null!==n.callbackChangeCard&&n.callbackChangeCard();else if(t.name===s.THROW_COINS){var e=new c(n.hiloScene.sizer.width/2,n.hiloScene.sizer.height/2);t.bone&&(e.x=t.bone.global.x+n.x,e.y=t.bone.global.y+n.y),null!==n.callbackThrowCoins&&n.callbackThrowCoins(e)}})),this.character.on(dragonBones.EventObject.SOUND_EVENT,(function(t){"clap"===t.name&&n.hiloScene.soundManager.play(h.SoundName.clap,{multiInstance:!0,volume:.5})})),this.add(this.character)),this.character.animation.play(t,e)},e.prototype.hello=function(t){this.callbackHello=t,this.changeState(r.HELLO,1)},e.prototype.changeCard=function(t){this.callbackChangeCard=t,this.changeState(r.CHANGE_CARD)},e.prototype.clap=function(t){this.changeState(r.CLAP,t)},e.prototype.playerWin=function(t){this.callbackThrowCoins=t,this.changeState(r.WIN,1)},e}(a);e.CompoCharacter=l},2386:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoChoose=void 0;var r=Phaser.GameObjects.Container,s=Phaser.Input.Events.POINTER_DOWN,a=Phaser.Geom.Rectangle,c=n(9278),h=n(6405),l=n(6071),u=n(8416),d=n(5080),p=n(9241),f=n(8529),g=function(t){function e(e,n){var i=t.call(this,e)||this;if(i.hiloScene=e,i.background=n,i.lower=new c.ItemChoose(i.hiloScene),i.higher=new c.ItemChoose(i.hiloScene),i.itemSelected=null,i.glowPipeline=i.hiloScene.renderer.pipelines.add("GlowFilterPipeline",new l.GlowFilterPipeline(i.hiloScene.game)),i.grayPipeline=i.hiloScene.renderer.pipelines.add("GrayPipeline",new u.GrayPipeline(i.hiloScene.game)),i._boundTemp=new a,i.lower.textInfo.setText("Lower or same"),i.lower.changeBackground(h.AtlasName.AtlasHiloNinePatch.Frame["bg-low"]),i.lower.changeArrow(h.AtlasName.AtlasHiloMisc.Frame["arrow-low"]),i.add(i.lower),i.lower.setWinMoney(0),i.lower.setTintColor(228348),i.higher.textInfo.setText("Higher or same"),i.higher.changeBackground(h.AtlasName.AtlasHiloNinePatch.Frame["bg-high"]),i.higher.changeArrow(h.AtlasName.AtlasHiloMisc.Frame["arrow-high"]),i.add(i.higher),i.higher.setWinMoney(0),i.higher.setTintColor(16553987),i.hiloScene.isMobile){var o=i.background.width/2-10*d.DPR;i.lower.resizeBackground(o),i.higher.resizeBackground(o);var r=new a;i.lower.getBounds(r),Phaser.Display.Align.In.BottomLeft(i.lower,i.background,-r.width/2,r.height/2),i.higher.getBounds(r),Phaser.Display.Align.In.BottomRight(i.higher,i.background,-r.width/2,r.height/2)}else{i.lower.resizeBackground(290),i.higher.resizeBackground(290),null!==i.lower.background&&(i.lower.x=-(i.lower.background.width/2+10)),null!==i.higher.background&&(i.higher.x=i.higher.background.width/2+10)}return i.setInteract(i.lower,i.onLowerClick),i.setInteract(i.higher,i.onHigherClick),i.lower.addLight(),i.higher.addLight(),i}return o(e,t),e.prototype.enInteract=function(t){t?(this.lower.setInteractive(),this.higher.setInteractive()):(this.lower.disableInteractive(),this.higher.disableInteractive()),this.lower.multiplier>f.HiloData.setting.maxwin&&this.disabledItem(this.lower),this.higher.multiplier>f.HiloData.setting.maxwin&&this.disabledItem(this.higher)},e.prototype.setInteract=function(t,e){var n=t.getBounds(this._boundTemp);t.setInteractive({useHandCursor:!0,hitArea:new Phaser.Geom.Rectangle(-n.width/2,-n.height/2,n.width,n.height),hitAreaCallback:Phaser.Geom.Rectangle.Contains}),t.on(s,e,this)},e.prototype._onClick=function(t){this.hiloScene.soundManager.play(h.SoundName.chooseClick),this.stopTweenLight(),null!==this.itemSelected&&this.enabledItem(this.itemSelected),this.itemSelected=t,t.disableInteractive(),null!==t.background&&this.setPipelineItem(t);var n=t===this.lower;f.HiloData.isChosenLower=n,this.emit(e.EVENT_CLICK,n,t)},e.prototype.onLowerClick=function(){this._onClick(this.lower),this.higher.multiplier<=f.HiloData.setting.maxwin&&this.higher.addPipelineItem(this.grayPipeline)},e.prototype.onHigherClick=function(){this._onClick(this.higher),this.lower.multiplier<=f.HiloData.setting.maxwin&&this.lower.addPipelineItem(this.grayPipeline)},e.prototype.setPipelineItem=function(t){null!==this.glowPipeline&&(t.addPipelineItem(this.glowPipeline),this.glowPipeline.intensity=0,this.hiloScene.tweens.add({targets:this.glowPipeline,intensity:.02,duration:500,repeat:-1,yoyo:!0}))},e.prototype.resetPipelineItem=function(t){t.removePipelineItem(),null!==this.glowPipeline&&this.hiloScene.tweens.killTweensOf(this.glowPipeline)},e.prototype.resetAllPipeline=function(){this.resetPipelineItem(this.lower),this.resetPipelineItem(this.higher)},e.prototype.reset=function(){this.enInteract(!1),this.resetAllPipeline()},e.prototype.updateWinText=function(){var t=f.HiloData.idCardChosen%13;1===t?(this.lower.setTextInfo("Same"),this.higher.setTextInfo("Higher")):0===t?(this.lower.setTextInfo("Lower"),this.higher.setTextInfo("Same")):(this.lower.setTextInfo("Lower or same"),this.higher.setTextInfo("Higher or same"))},e.prototype.updateWinMoney=function(t){var e=this.calculateLowerMultiplier(f.HiloData.idCardChosen),n=this.calculateHigherMultiplier(f.HiloData.idCardChosen);this.lower.setWinMoney(e),this.higher.setWinMoney(n)},e.prototype.startTweenLight=function(){this.lower.startTweenLight(),this.higher.startTweenLight()},e.prototype.stopTweenLight=function(){this.lower.stopTweenLight(),this.higher.stopTweenLight()},e.prototype.show=function(t){this.updateWinText(),this.startTweenLight(),this.updateWinMoney(t),this.setVisible(!0),this.alpha=0,this.hiloScene.tweens.add({targets:this,alpha:1,duration:600})},e.prototype.hide=function(){var t=this;this.reset(),this.hiloScene.tweens.add({targets:this,alpha:0,duration:300,onComplete:function(){t.setVisible(!1)}})},e.prototype.disabledItem=function(t){this.resetPipelineItem(t),t.stopTweenLight(),t.disableInteractive(),t.setPipelineBackground(this.grayPipeline)},e.prototype.enabledItem=function(t){t.multiplier<=f.HiloData.setting.maxwin&&(this.resetPipelineItem(t),t.setInteractive())},e.prototype.calculatePointOfCard=function(t){var e=t%13;return 0===e?13:e},e.prototype.calculateHigherMultiplier=function(t){var e=this.calculatePointOfCard(t);1===e&&(e=2);var n=1/((14-e)/13);return n*=p.Config.FEE},e.prototype.calculateLowerMultiplier=function(t){var e=this.calculatePointOfCard(t);13===e&&(e=12);var n=1/(e/13);return n*=p.Config.FEE},e.EVENT_CLICK="ChosenItem",e}(r);e.CompoChoose=g},9278:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ItemChoose=void 0;var r=Phaser.GameObjects.Container,s=n(6405),a=n(5080),c=s.AtlasName.AtlasHiloMisc,h=s.AtlasName.AtlasHiloNinePatch,l=n(1221),u=n(8295),d=Phaser.Structs.Size,p=Phaser.Geom.Rectangle,f=n(8529),g=function(t){function e(e){var n=t.call(this,e)||this;return n.hiloScene=e,n.background=n.hiloScene.make.rexNinePatch({width:100,height:40*a.DPR,key:h.name,baseFrame:h.Frame["bg-high"]},!1),n.backgroundWin=null,n.arrow=null,n.textInfo=n.scene.make.text({style:{fontFamily:"Montserrat-SemiBold",fontSize:16*a.DPR+"px"}}),n.winContainer=n.scene.make.container({}),n.winMoney=n.scene.make.text({style:{fontFamily:"Montserrat-SemiBold",fontSize:16*a.DPR+"px"}}),n.multiplier=0,n.lightMask=null,n._tempBound=new p,n.add(n.winContainer),n.backgroundWin=n.scene.add.rexNinePatch(0,0,100,80*a.DPR,h.name,h.Frame["bg-ratio"],[10,void 0,10],[10,void 0,10]),n.winContainer.add(n.backgroundWin),n.winMoney.setOrigin(.5),n.winContainer.add(n.winMoney),n.background=n.scene.add.rexNinePatch(0,0,100,40*a.DPR,h.name,h.Frame["bg-high"]),n.background.y=(n.background.height-n.backgroundWin.height)/2,n.add(n.background),n.arrow=n.scene.add.image(0,0,c.name,c.Frame["arrow-high"]),n.arrow.setOrigin(0,.5),n.add(n.arrow),n.textInfo.setText("."),n.textInfo.setOrigin(.5),n.textInfo.x=n.background.x,n.textInfo.y=n.background.y,n.add(n.textInfo),n.winMoney.y=(n.backgroundWin.y+n.backgroundWin.height*n.backgroundWin.originY-(n.background.y+n.background.height*n.background.originY))/2,n}return o(e,t),e.prototype.getBoundsSize=function(){return null!==this.backgroundWin&&this.backgroundWin.getBounds(this._tempBound),this._tempBound},e.prototype.addLight=function(){if(null!==this.background&&null===this.lightMask){var t=this.background.getBounds(this._tempBound);this.lightMask=new u.LightMask(this.hiloScene,new d(t.width,t.height)),this.lightMask.setPosition(this.background.x,this.background.y),this.add(this.lightMask)}},e.prototype.startTweenLight=function(){null!==this.lightMask&&null!==this.background&&(this.lightMask.setVisible(!0),this.lightMask.startTweenLight(this.background.getGlobalPosition()))},e.prototype.stopTweenLight=function(){null!==this.lightMask&&(this.lightMask.stopTweenLight(),this.lightMask.setVisible(!1))},e.prototype.changeBackground=function(t){null!==this.background&&this.background.setTexture(h.name,t,[10,void 0,10],[10,void 0,10])},e.prototype.changeArrow=function(t){null!==this.arrow&&this.arrow.setFrame(t)},e.prototype.resizeBackground=function(t){this.background.resize(t,40*a.DPR),null!==this.backgroundWin&&this.backgroundWin.resize(t,80*a.DPR),null!==this.arrow&&(this.hiloScene.isMobile?this.arrow.addUIWidget(this.background,l.HORIZONTAL_MODE.RIGHT,10*a.DPR,l.VERTICAL_MODE.CENTER,0,!1):Phaser.Display.Align.In.RightCenter(this.arrow,this.background,-5)),null!==this.textInfo&&null!==this.arrow&&(this.textInfo.setFontSize(16*a.DPR),this.textInfo.x=(this.background.x-(this.background.width/2-this.arrow.x))/2),null!==this.winMoney&&null!==this.backgroundWin&&(this.winMoney.y=(this.backgroundWin.y+this.backgroundWin.height*this.backgroundWin.originY-(this.background.y+this.background.height*this.background.originY))/2)},e.prototype.setWinMoney=function(t){t=+(f.HiloData.payout*t).toFixed(2),this.multiplier=t,t<=f.HiloData.setting.maxwin?(this.winMoney.setText(t+" $"),null!==this.backgroundWin&&this.backgroundWin.clearTint()):(this.winMoney.setText("Exceeds Max Win"),null!==this.backgroundWin&&this.backgroundWin.setTintFill(49730))},e.prototype.setTextInfo=function(t){this.textInfo.setText(t)},e.prototype.setTintColor=function(t){null!==this.background&&this.background.setTint(t)},e.prototype.setPipelineBackground=function(t){null!==this.background&&this.background.setPipeline(t)},e.prototype.addPipelineItem=function(t){this.setPipelineBackground(t),null!==this.backgroundWin&&this.backgroundWin.setPipeline(t)},e.prototype.removePipelineItem=function(){null!==this.background&&this.background.resetPipeline(),null!==this.backgroundWin&&this.backgroundWin.resetPipeline()},e}(r);e.ItemChoose=g},8295:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.LightMask=void 0;var r=Phaser.GameObjects.Container,s=n(6405),a=n(9173),c=function(t){function e(e,n){var i=t.call(this,e)||this;return i.hiloScene=e,i.bounding=n,i.lightLeft=null,i.lightRight=null,i.lightMask=null,i.lightLeft=i.hiloScene.add.image(0,0,s.AtlasName.AtlasHiloMisc.name,s.AtlasName.AtlasHiloMisc.Frame.light),i.add(i.lightLeft),i.lightRight=i.hiloScene.add.image(0,0,s.AtlasName.AtlasHiloMisc.name,s.AtlasName.AtlasHiloMisc.Frame.light),i.add(i.lightRight),i.lightMask=i.hiloScene.make.graphics({}),i.lightMask.fillStyle(1048575,1),i.lightMask.beginPath(),i.lightMask.fillRoundedRect(0,0,n.width,n.height,8),i.setMask(i.lightMask.createGeometryMask()),i.resetLight(),i}return o(e,t),e.prototype.resetLight=function(){null!==this.lightLeft&&this.lightLeft.setPosition(-(this.bounding.width+this.lightLeft.width)/2,-this.bounding.height/2),null!==this.lightRight&&this.lightRight.setPosition((this.bounding.width+this.lightRight.width)/2,this.bounding.height/2)},e.prototype.startTweenLight=function(t){if(null!==this.lightMask&&null!==this.lightLeft&&null!==this.lightRight){this.lightMask.setPosition(t.x-this.bounding.width/2,t.y-this.bounding.height/2);var e={duration:2e3,repeat:-1,ease:a.default,easeParams:[.3,.5,!1]};this.hiloScene.tweens.add(Object.assign(e,{targets:this.lightLeft,x:(this.bounding.width+this.lightLeft.width)/2})),this.hiloScene.tweens.add(Object.assign(e,{targets:this.lightRight,x:-(this.bounding.width+this.lightRight.width)/2}))}},e.prototype.stopTweenLight=function(){null!==this.lightLeft&&this.hiloScene.tweens.killTweensOf(this.lightLeft),null!==this.lightRight&&this.hiloScene.tweens.killTweensOf(this.lightRight),this.resetLight()},e}(r);e.LightMask=c},2711:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CompoTest=void 0;var r=Phaser.GameObjects.Container,s=Phaser.Input.Events.POINTER_DOWN,a=n(5080),c=n(6405).AtlasName.AtlasHiloCard,h=function(t){function e(e){var n=t.call(this,e)||this;n.hiloScene=e,n._cashOut=0;var i=n.hiloScene.make.container({});n.add(i),n._addButton(i,"Bet",(function(){n.hiloScene.requestBet(5)}));var o=n.hiloScene.make.container({});return o.x=70*a.DPR,n.add(o),n._addButton(o,"Cash Out\n0$",(function(){n.hiloScene.requestCashOut()})),n._txtCashOut=o.getAt(1),n}return o(e,t),e.prototype.addCashOut=function(){this._cashOut+=2,this._txtCashOut&&this._txtCashOut.setText("Cash Out\n"+this._cashOut+"$")},e.prototype.reset=function(){this._cashOut=0,this._txtCashOut&&this._txtCashOut.setText("Cash Out\n"+this._cashOut+"$")},e.prototype._addButton=function(t,e,n){var i=this.scene.add.image(0,0,c.name,c.Frame["bg-card"]);i.setDisplaySize(60*a.DPR,40*a.DPR),i.setOrigin(.5),i.setInteractive({useHandCursor:!0}).on(s,n,this),t.add(i);var o=this.scene.make.text({style:{color:"#000000",fontFamily:"Montserrat-SemiBold",fontSize:12*a.DPR+"px",align:"center"}});o.setText(e),o.setOrigin(.5),t.add(o)},e}(r);e.CompoTest=h},9241:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var i=n(8356);e.Config=Object.assign(i.Config,{DEV:!1,PATH_ASSETS:"hilo/",BASE_API_URL:process.env.REACT_APP_HILO_GAME_ENDPOINT,FEE:.97})},8529:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HiloData=void 0,e.HiloData={token:"",setting:{maxwin:0,maxbet:0},continueGame:!1,gameId:"",idCardChosen:-1,dataBet:{},isChosenLower:!1,payout:0,walletId:""}},6676:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.EffectCashOut=void 0;var r,s=Phaser.GameObjects.Particles.Particle,a=Phaser.GameObjects.Particles.ParticleEmitter,c=n(6405),h=function(t){function e(e){var n=t.call(this,e)||this;return n.t=0,n.i=Phaser.Math.RND.integerInRange(0,5),n}return o(e,t),e.prototype.update=function(e,n,i){var o=t.prototype.update.call(this,e,n,i);return this.t+=e,this.t>=r.msPerFrame&&(this.i++,this.i>5&&(this.i=0),this.frame=r.frames[this.i].frame,this.t-=r.msPerFrame),o},e}(s),l=function(){function t(t){var e=this;this.hiloScene=t,this.maxParticle=1,this.particle=this.hiloScene.add.particles("core/AtlasCoinsAnimate"),this.particleEmitter=new a(this.particle,{gravityY:2500,scale:{start:.7,end:1},speedX:{min:-400,max:400},speedY:{min:-600,max:-1200},accelerationY:-1e3,lifespan:3e3,alpha:{onUpdate:function(t,e,n,i){return n<.01?0:1}},rotate:{min:0,max:360},particleBringToTop:!1,particleClass:h}),r=this.hiloScene.anims.create({key:"coin-animated",frames:this.hiloScene.anims.generateFrameNames("core/AtlasCoinsAnimate",{prefix:"coin-",end:5,zeroPad:0}),frameRate:15}),this.particle.addEmitter(this.particleEmitter),this.particle.setDepth(1e3),this.particleEmitter.onParticleEmit((function(){var t=e.particleEmitter.getAliveParticleCount();t%2==0&&e.hiloScene.soundManager.play(c.SoundName.coin,{multiInstance:!0,volume:.2}),t>=e.maxParticle&&e.stop()}))}return t.prototype.start=function(t,e){var n=Phaser.Math.Percent(t,.1,20);this.maxParticle=100*n,this.particle.setPosition(e.x,e.y);for(var i=0;i<this.particle.emitters.length;i++)this.particle.emitters.getAt(i).start()},t.prototype.stop=function(){for(var t=0;t<this.particle.emitters.length;t++)this.particle.emitters.getAt(t).stop()},t}();e.EffectCashOut=l},5802:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.HiloScene=void 0;var r=n(9241),s=n(6405),a=n(1221),c=n(5945),h=n(2149),l=n(2711),u=n(6285),d=n(6438),p=n(6871),f=n(6517),g=n(5080),y=n(8529),v=n(7683),m=n(103),b=n(490),_=function(t){function e(){var n=t.call(this,{key:e.SCENE_NAME})||this;return n.soundManager=new f.SoundManager(n),n._keySoundBackground="",n.background=null,n.compoMenu=null,n.compoBoard=null,n.cardRecently=null,n.socketController=null,n.receiveController=new m.ReceiveController(n),n.compoTest=null,n.mode=p.MODE_STYLES.LIGHT,n.hiloBetBinded=n._hiloBet.bind(n),n.hiloCashoutBinded=n._hiloCashOut.bind(n),n.joinBinded=n._onJoin.bind(n),n}return o(e,t),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.preload=function(){this.load.setPath(r.Config.PATH_ASSETS);var t="background.webp";this.isAndroid?t="background-android.webp":this.isIOS&&(t="background-ios.webp"),Array.prototype.push.call(s.AssetsManifest.images,t),this.loadAssets(s.AssetsManifest)},e.prototype.forceResize=function(){this.scale.scaleMode=Phaser.Scale.ScaleModes.WIDTH_CONTROLS_HEIGHT;var t=360*g.DPR,e=420*g.DPR;this.scale.setGameSize(t,e),this.sizer.setSize(t,e)},e.prototype.initGame=function(){var t=this,e="background";if(this.textures.exists("background-android")?e="background-android":this.textures.exists("background-ios")&&(e="background-ios"),this.textures.renameTexture(e,"background"),this.isMobile){this.forceResize();var n=this.add.graphics({});n.fillStyle(1059409),n.fillRect(0,0,this.sizer.width,this.sizer.height)}this.gameWrap=this.make.zone({x:0,y:0,width:this.sizer.width,height:this.sizer.height-90*g.DPR}),this.gameWrap.setOrigin(0),this.input.enabled=!1,this.playBackgroundSound(),this.background=this.add.image(0,0,"background"),this.background.setOrigin(0),this.compoBoard=new c.CompoBoard(this),this.add.existing(this.compoBoard),this.compoMenu=new p.CompoMenu(this),this.compoMenu.addUIWidget(this.gameWrap,a.HORIZONTAL_MODE.LEFT,0,a.VERTICAL_MODE.TOP,0),this.add.existing(this.compoMenu),this.compoMenu.on(p.THEME_EVENT.MODE,this.changeMode,this),this.compoMenu.on(p.THEME_EVENT.MUSIC,(function(e){e?t.playBackgroundSound():t.stopBackgroundSound()}),this),r.Config.DEV&&(this.compoTest=new l.CompoTest(this),this.compoTest.addUIWidget(this.sizer,a.HORIZONTAL_MODE.LEFT,"20%",a.VERTICAL_MODE.BOTTOM,0),this.add.existing(this.compoTest),y.HiloData.walletId="0fab2f8f-4fef-4c88-b2d5-6b3f8f300bed"),this.gameWrap.setSize(this.sizer.width,this.sizer.height-90*g.DPR),this.events.once(u.EVENT_CORE.DEVICE_DESKTOP,this.runOnDesktop,this),this.events.once(u.EVENT_CORE.DEVICE_MOBILE,this.runOnMobile,this),this.runOnDevice(),window.addEventListener("hilo-bet",this.hiloBetBinded),window.addEventListener("hilo-cashout",this.hiloCashoutBinded),window.addEventListener("hilo-join",this.joinBinded),y.HiloData.idCardChosen=Phaser.Math.RND.integerInRange(1,52),b.Utils.dispatchCustomEvent("ready-game",{detail:this})},e.prototype._hiloBet=function(t){y.HiloData.walletId=t.detail.walletId;var e=t.detail.betAmount;this.requestBet(e)},e.prototype._hiloCashOut=function(t){this.hiloCashout(t.detail)},e.prototype._onJoin=function(t){this.receiveController.updateSocket(window.customSocketHilo),this.onJoinedGame(t.detail)},e.prototype.connectToServer=function(t){null===this.socketController?this.socketController=new SocketController(this.receiveController):this.socketController.closeSocket(r.Config.BASE_API_URL),this.socketController.initSocket(r.Config.BASE_API_URL,t)},e.prototype.requestBet=function(t){var e=this;this.receiveController.bet(y.HiloData.idCardChosen,t,(function(t){e.hiloBet(t)}))},e.prototype.requestNext=function(t){var e=this;this.receiveController.next(y.HiloData.gameId,y.HiloData.isChosenLower,t,(function(n){e.soundManager.play(s.SoundName.flipCard);var i=n.cards[t];y.HiloData.dataBet=n.game,n.game.isEnded||(y.HiloData.idCardChosen=i,y.HiloData.payout=+y.HiloData.dataBet.payout),null!==e.compoBoard&&e.compoBoard.onPlayerChooseCard(i,t,n.game.isEnded)}))},e.prototype.requestCashOut=function(){var t=this;this.receiveController.cashOut(y.HiloData.gameId,(function(e){t.hiloCashout(e)}))},e.prototype.hiloBet=function(t){var e=t.game;y.HiloData.dataBet=e,y.HiloData.payout=+e.betAmount,y.HiloData.gameId=e.id,b.Utils.dispatchCustomEvent("hilo-game-id",{detail:y.HiloData.gameId}),this.onBetting(e)},e.prototype.hiloCashout=function(t){this.onCashOut()},e.prototype.onJoinedGame=function(t){if(this.game.events.emit(u.EVENT_CORE.CONNECTED_SERVER),y.HiloData.continueGame=Boolean(t.ongoingGame),y.HiloData.dataBet=t.ongoingGame,y.HiloData.setting=t.setting,y.HiloData.setting.maxwin=+y.HiloData.setting.maxwin,y.HiloData.setting.maxbet=+y.HiloData.setting.maxbet,y.HiloData.dataBet){if(y.HiloData.dataBet.rounds&&y.HiloData.dataBet.rounds.length>1)this.getCardRecently().addMultiCard(y.HiloData.dataBet.rounds);+y.HiloData.dataBet.payout>0?y.HiloData.payout=+y.HiloData.dataBet.payout:y.HiloData.payout=+y.HiloData.dataBet.betAmount}null!==this.compoBoard&&this.compoBoard.onConnected(y.HiloData.dataBet)},e.prototype.playBackgroundSound=function(){var t=[s.SoundName.background1,s.SoundName.background2];this._keySoundBackground=Phaser.Utils.Array.GetRandom(t),this.soundManager.play(this._keySoundBackground,{loop:!0,volume:.2})},e.prototype.stopBackgroundSound=function(){this.soundManager.stop(this._keySoundBackground)},e.prototype.changeMode=function(t){this.mode=t,null!==this.compoBoard&&null!==this.background&&(this.compoBoard.changeMode(t,this.background),null!==this.cardRecently&&this.cardRecently.setLimitBounds(this.compoBoard.getBoundsBackground())),t===p.MODE_STYLES.LIGHT?null!==this.background&&this.background.setVisible(!0):null!==this.background&&this.background.setVisible(!1)},e.prototype.getCardRecently=function(){return null===this.cardRecently&&(this.cardRecently=new d.CardRecently(this),null!==this.compoBoard&&this.cardRecently.setLimitBounds(this.compoBoard.getBoundsBackground())),this.cardRecently},e.prototype.onStart=function(){this.input.enabled=!0},e.prototype.onBetting=function(t){y.HiloData.gameId=t.id,null!==this.compoMenu&&this.compoMenu.interactiveMode(!1),null!==this.compoBoard&&this.compoBoard.onPlayerBetting(t)},e.prototype.onWin=function(){b.Utils.dispatchCustomEvent("hilo-payout",{detail:+y.HiloData.payout.toFixed(2)}),this.soundManager.play(s.SoundName.winRound);var t=this.getCardRecently();if(null!==this.compoBoard){this.compoBoard.onPlayerWin();var e=this.compoBoard.getCardDisplay();null!==e&&t.addToRecent(e)}null!==this.compoTest&&this.compoTest.addCashOut()},e.prototype.onLose=function(){b.Utils.dispatchCustomEvent("hilo-history",{detail:y.HiloData.dataBet}),b.Utils.dispatchCustomEvent("hilo-payout",{detail:0}),this.input.enabled=!1,null!==this.compoBoard&&this.compoBoard.onPlayerLose(),this.time.delayedCall(3e3,this.resetAll,[],this)},e.prototype.onCashOut=function(){b.Utils.dispatchCustomEvent("hilo-history",{detail:y.HiloData.dataBet}),this.input.enabled=!1,null!==this.compoBoard&&this.compoBoard.onPlayerCashOut(y.HiloData.payout),this.time.delayedCall(3e3,this.resetAll,[],this)},e.prototype.resetAll=function(){y.HiloData.payout=0,y.HiloData.continueGame=!1,null!==this.compoMenu&&this.compoMenu.interactiveMode(!0),null!==this.cardRecently&&this.cardRecently.reset(),null!==this.compoBoard&&this.compoBoard.reset(),null!==this.compoTest&&this.compoTest.reset(),this.onStart()},e.prototype.destroy=function(){t.prototype.destroy.call(this),window.removeEventListener("hilo-bet",this.hiloBetBinded),window.removeEventListener("hilo-cashout",this.hiloCashoutBinded),window.removeEventListener("hilo-join",this.joinBinded),v.CardManager.destroy()},e.prototype.runOnDesktop=function(){null!==this.compoBoard&&this.compoBoard.runOnDesktop(),null!==this.compoMenu&&this.compoMenu.uiWidget&&(this.compoMenu.uiWidget.setHorizontal(a.HORIZONTAL_MODE.LEFT,16),this.compoMenu.uiWidget.setVertical(a.VERTICAL_MODE.TOP,16))},e.prototype.runOnMobile=function(){if(null!==this.background){var t=this.gameWrap.width/this.background.width;this.background.setScale(t),null!==this.compoBoard&&this.compoBoard.runOnMobile(this.background)}},e.SCENE_NAME="sceneHilo",e}(h.GeneralScene);e.HiloScene=_},103:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ReceiveController=void 0;var r,s=n(8529),a=n(9284);!function(t){t.JOIN="join",t.BET="bet",t.NEXT="next",t.CASHED_OUT="cashout"}(r||(r={}));var c=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.onConnected=function(){var e=this;t.prototype.onConnected.call(this),null!==this.socket&&this.socket.emit(r.JOIN,(function(t){e.scene.onJoinedGame(t)}))},e.prototype.bet=function(t,e,n){null!==this.socket&&this.socket.emit(r.BET,t,e,s.HiloData.walletId,(function(t){n(t)}))},e.prototype.next=function(t,e,n,i){var o=e?"LowerEqual":"HigherEqual";null!==this.socket&&this.socket.emit(r.NEXT,t,o,n,(function(t){i(t)}))},e.prototype.cashOut=function(t,e){null!==this.socket&&this.socket.emit(r.CASHED_OUT,t,s.HiloData.walletId,(function(t){e(t)}))},e}(a.AbstractReceiveController);e.ReceiveController=c},5933:(t,e,n)=>{var i;!function(){function o(t,e,n){return t.call.apply(t.bind,arguments)}function r(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function s(t,e,n){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:r).apply(null,arguments)}var a=Date.now||function(){return+new Date};function c(t,e){this.a=t,this.o=e||t,this.c=this.o.document}var h=!!window.FontFace;function l(t,e,n,i){if(e=t.c.createElement(e),n)for(var o in n)n.hasOwnProperty(o)&&("style"==o?e.style.cssText=n[o]:e.setAttribute(o,n[o]));return i&&e.appendChild(t.c.createTextNode(i)),e}function u(t,e,n){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),o=0;o<e.length;o+=1){for(var r=!1,s=0;s<i.length;s+=1)if(e[o]===i[s]){r=!0;break}r||i.push(e[o])}for(e=[],o=0;o<i.length;o+=1){for(r=!1,s=0;s<n.length;s+=1)if(i[o]===n[s]){r=!0;break}r||e.push(i[o])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(t,e){for(var n=t.className.split(/\s+/),i=0,o=n.length;i<o;i++)if(n[i]==e)return!0;return!1}function g(t,e,n){function i(){a&&o&&r&&(a(s),a=null)}e=l(t,"link",{rel:"stylesheet",href:e,media:"all"});var o=!1,r=!0,s=null,a=n||null;h?(e.onload=function(){o=!0,i()},e.onerror=function(){o=!0,s=Error("Stylesheet failed to load"),i()}):setTimeout((function(){o=!0,i()}),0),u(t,"head",e)}function y(t,e,n,i){var o=t.c.getElementsByTagName("head")[0];if(o){var r=l(t,"script",{src:e}),s=!1;return r.onload=r.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),r.onload=r.onreadystatechange=null,"HEAD"==r.parentNode.tagName&&o.removeChild(r))},o.appendChild(r),setTimeout((function(){s||(s=!0,n&&n(Error("Script load timeout")))}),i||5e3),r}return null}function v(){this.a=0,this.c=null}function m(t){return t.a++,function(){t.a--,_(t)}}function b(t,e){t.c=e,_(t)}function _(t){0==t.a&&t.c&&(t.c(),t.c=null)}function C(t){this.a=t||"-"}function w(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function k(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function S(t){return t.a+t.f}function E(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function O(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function P(t,e){this.c=t,this.f=t.o.document.documentElement,this.h=e,this.a=new C("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function T(t){if(t.g){var e=f(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),p(t.f,n,i)}A(t,"inactive")}function A(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,S(n)):t.h[e]())}function x(){this.c={}}function R(t,e){this.c=t,this.f=e,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function M(t){u(t.c,"body",t.a)}function D(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+k(t.c)+";font-style:"+E(t)+";font-weight:"+t.f+"00;"}function I(t,e,n,i,o,r){this.g=t,this.j=e,this.a=i,this.c=n,this.f=o||3e3,this.h=r||void 0}function L(t,e,n,i,o,r,s){this.v=t,this.B=e,this.c=n,this.a=i,this.s=s||"BESbswy",this.f={},this.w=o||3e3,this.u=r||null,this.m=this.j=this.h=this.g=null,this.g=new R(this.c,this.s),this.h=new R(this.c,this.s),this.j=new R(this.c,this.s),this.m=new R(this.c,this.s),t=D(t=new w(this.a.c+",serif",S(this.a))),this.g.a.style.cssText=t,t=D(t=new w(this.a.c+",sans-serif",S(this.a))),this.h.a.style.cssText=t,t=D(t=new w("serif",S(this.a))),this.j.a.style.cssText=t,t=D(t=new w("sans-serif",S(this.a))),this.m.a.style.cssText=t,M(this.g),M(this.h),M(this.j),M(this.m)}C.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},I.prototype.start=function(){var t=this.c.o.document,e=this,n=a(),i=new Promise((function(i,o){!function r(){a()-n>=e.f?o():t.fonts.load(function(t){return E(t)+" "+t.f+"00 300px "+k(t.c)}(e.a),e.h).then((function(t){1<=t.length?i():setTimeout(r,25)}),(function(){o()}))}()})),o=null,r=new Promise((function(t,n){o=setTimeout(n,e.f)}));Promise.race([r,i]).then((function(){o&&(clearTimeout(o),o=null),e.g(e.a)}),(function(){e.j(e.a)}))};var N={D:"serif",C:"sans-serif"},B=null;function j(){if(null===B){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);B=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return B}function G(t,e,n){for(var i in N)if(N.hasOwnProperty(i)&&e===t.f[N[i]]&&n===t.f[N[i]])return!0;return!1}function H(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=n===t.f.serif&&i===t.f["sans-serif"])||(e=j()&&G(t,n,i)),e?a()-t.A>=t.w?j()&&G(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?F(t,t.v):F(t,t.B):function(t){setTimeout(s((function(){H(this)}),t),50)}(t):F(t,t.v)}function F(t,e){setTimeout(s((function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),e(this.a)}),t),0)}function V(t,e,n){this.c=t,this.a=e,this.f=0,this.m=this.j=!1,this.s=n}L.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=a(),H(this)};var z=null;function U(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&p(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),A(t,"active")):T(t.a))}function W(t){this.j=t,this.a=new x,this.h=0,this.f=this.g=!0}function Y(t,e,n,i,o){var r=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=o||null,a=i||{};if(0===n.length&&r)T(e.a);else{e.f+=n.length,r&&(e.j=r);var c,h=[];for(c=0;c<n.length;c++){var l=n[c],u=a[l.c],d=e.a,f=l;if(d.g&&p(d.f,[d.a.c("wf",f.c,S(f).toString(),"loading")]),A(d,"fontloading",f),d=null,null===z)if(window.FontFace){f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);z=f?42<parseInt(f[1],10):!g}else z=!1;d=z?new I(s(e.g,e),s(e.h,e),e.c,l,e.s,u):new L(s(e.g,e),s(e.h,e),e.c,l,e.s,t,u),h.push(d)}for(c=0;c<h.length;c++)h[c].start()}}),0)}function X(t,e){this.c=t,this.a=e}function q(t,e){this.c=t,this.a=e}function K(t,e){this.c=t||Z,this.a=[],this.f=[],this.g=e||""}V.prototype.g=function(t){var e=this.a;e.g&&p(e.f,[e.a.c("wf",t.c,S(t).toString(),"active")],[e.a.c("wf",t.c,S(t).toString(),"loading"),e.a.c("wf",t.c,S(t).toString(),"inactive")]),A(e,"fontactive",t),this.m=!0,U(this)},V.prototype.h=function(t){var e=this.a;if(e.g){var n=f(e.f,e.a.c("wf",t.c,S(t).toString(),"active")),i=[],o=[e.a.c("wf",t.c,S(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,S(t).toString(),"inactive")),p(e.f,i,o)}A(e,"fontinactive",t),U(this)},W.prototype.load=function(t){this.c=new c(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,n){var i=[],o=n.timeout;!function(t){t.g&&p(t.f,[t.a.c("wf","loading")]),A(t,"loading")}(e);i=function(t,e,n){var i,o=[];for(i in e)if(e.hasOwnProperty(i)){var r=t.c[i];r&&o.push(r(e[i],n))}return o}(t.a,n,t.c);var r=new V(t.c,e,o);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load((function(e,n,i){Y(t,r,e,n,i)}))}(this,new P(this.c,t),t)},X.prototype.load=function(t){function e(){if(r["__mti_fntLst"+i]){var n,o=r["__mti_fntLst"+i](),s=[];if(o)for(var a=0;a<o.length;a++){var c=o[a].fontfamily;null!=o[a].fontStyle&&null!=o[a].fontWeight?(n=o[a].fontStyle+o[a].fontWeight,s.push(new w(c,n))):s.push(new w(c))}t(s)}else setTimeout((function(){e()}),50)}var n=this,i=n.a.projectId,o=n.a.version;if(i){var r=n.c.o;y(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+i+".js"+(o?"?v="+o:""),(function(o){o?t([]):(r["__MonotypeConfiguration__"+i]=function(){return n.a},e())})).id="__MonotypeAPIScript__"+i}else t([])},q.prototype.load=function(t){var e,n,i=this.a.urls||[],o=this.a.families||[],r=this.a.testStrings||{},s=new v;for(e=0,n=i.length;e<n;e++)g(this.c,i[e],m(s));var a=[];for(e=0,n=o.length;e<n;e++)if((i=o[e].split(":"))[1])for(var c=i[1].split(","),h=0;h<c.length;h+=1)a.push(new w(i[0],c[h]));else a.push(new w(i[0]));b(s,(function(){t(a,r)}))};var Z="https://fonts.googleapis.com/css";function J(t){this.f=t,this.a=[],this.c={}}var $={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},Q={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},et=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function nt(t,e){this.c=t,this.a=e}var it={Arimo:!0,Cousine:!0,Tinos:!0};function ot(t,e){this.c=t,this.a=e}function rt(t,e){this.c=t,this.f=e,this.a=[]}nt.prototype.load=function(t){var e=new v,n=this.c,i=new K(this.a.api,this.a.text),o=this.a.families;!function(t,e){for(var n=e.length,i=0;i<n;i++){var o=e[i].split(":");3==o.length&&t.f.push(o.pop());var r="";2==o.length&&""!=o[1]&&(r=":"),t.a.push(o.join(r))}}(i,o);var r=new J(o);!function(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),o=i[0].replace(/\+/g," "),r=["n4"];if(2<=i.length){var s;if(s=[],a=i[1])for(var a,c=(a=a.split(",")).length,h=0;h<c;h++){var l;if((l=a[h]).match(/^[\w-]+$/))if(null==(u=et.exec(l.toLowerCase())))l="";else{if(l=null==(l=u[2])||""==l?"n":tt[l],null==(u=u[1])||""==u)u="4";else var u=Q[u]||(isNaN(u)?"4":u.substr(0,1));l=[l,u].join("")}else l="";l&&s.push(l)}0<s.length&&(r=s),3==i.length&&(s=[],0<(i=(i=i[2])?i.split(","):s).length&&(i=$[i[0]])&&(t.c[o]=i))}for(t.c[o]||(i=$[o])&&(t.c[o]=i),i=0;i<r.length;i+=1)t.a.push(new w(o,r[i]))}}(r),g(n,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),m(e)),b(e,(function(){t(r.a,r.c,it)}))},ot.prototype.load=function(t){var e=this.a.id,n=this.c.o;e?y(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",(function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],o=0;o<e.length;o+=2)for(var r=e[o],s=e[o+1],a=0;a<s.length;a++)i.push(new w(r,s[a]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}}),2e3):t([])},rt.prototype.load=function(t){var e=this.f.id,n=this.c.o,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var o=0,r=n.fonts.length;o<r;++o){var s=n.fonts[o];i.a.push(new w(s.name,O("font-weight:"+s.weight+";font-style:"+s.style)))}t(i.a)},y(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",(function(e){e&&t([])}))):t([])};var st=new W(window);st.a.c.custom=function(t,e){return new q(e,t)},st.a.c.fontdeck=function(t,e){return new rt(e,t)},st.a.c.monotype=function(t,e){return new X(e,t)},st.a.c.typekit=function(t,e){return new ot(e,t)},st.a.c.google=function(t,e){return new nt(e,t)};var at={load:s(st.load,st)};void 0===(i=function(){return at}.call(e,n,e,t))||(t.exports=i)}()},3355:(t,e,n)=>{"use strict";n.r(e),n.d(e,{clearInterval:()=>s,clearTimeout:()=>a,setInterval:()=>c,setTimeout:()=>h});var i=n(6650);let o=null;const r=((t,e)=>()=>{if(null!==o)return o;const n=new Blob([e],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(n);return o=t(i),o.setTimeout((()=>URL.revokeObjectURL(i)),0),o})((t=>{const e=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),o=new Map,r=new Worker(t);r.addEventListener("message",(({data:t})=>{if(void 0!==(i=t).method&&"call"===i.method){const{params:{timerId:i,timerType:r}}=t;if("interval"===r){const t=e.get(i);if("number"==typeof t){const e=o.get(t);if(void 0===e||e.timerId!==i||e.timerType!==r)throw new Error("The timer is in an undefined state.")}else{if(void 0===t)throw new Error("The timer is in an undefined state.");t()}}else if("timeout"===r){const t=n.get(i);if("number"==typeof t){const e=o.get(t);if(void 0===e||e.timerId!==i||e.timerType!==r)throw new Error("The timer is in an undefined state.")}else{if(void 0===t)throw new Error("The timer is in an undefined state.");t(),n.delete(i)}}}else{if(!(t=>null===t.error&&"number"==typeof t.id)(t)){const{error:{message:e}}=t;throw new Error(e)}{const{id:i}=t,r=o.get(i);if(void 0===r)throw new Error("The timer is in an undefined state.");const{timerId:s,timerType:a}=r;o.delete(i),"interval"===a?e.delete(s):n.delete(s)}}var i}));return{clearInterval:t=>{const n=(0,i.generateUniqueNumber)(o);o.set(n,{timerId:t,timerType:"interval"}),e.set(t,n),r.postMessage({id:n,method:"clear",params:{timerId:t,timerType:"interval"}})},clearTimeout:t=>{const e=(0,i.generateUniqueNumber)(o);o.set(e,{timerId:t,timerType:"timeout"}),n.set(t,e),r.postMessage({id:e,method:"clear",params:{timerId:t,timerType:"timeout"}})},setInterval:(t,n)=>{const o=(0,i.generateUniqueNumber)(e);return e.set(o,(()=>{t(),"function"==typeof e.get(o)&&r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:o,timerType:"interval"}})})),r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:o,timerType:"interval"}}),o},setTimeout:(t,e)=>{const o=(0,i.generateUniqueNumber)(n);return n.set(o,t),r.postMessage({id:null,method:"set",params:{delay:e,now:performance.now(),timerId:o,timerType:"timeout"}}),o}}}),'(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error(\'The given type "\'.concat(i,\'" is not supported\'));(e=>{const r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error(\'The given method "\'.concat(s.method,\'" is not supported\'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error(\'The given type "\'.concat(d,\'" is not supported\'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();'),s=t=>r().clearInterval(t),a=t=>r().clearTimeout(t),c=(t,e)=>r().setInterval(t,e),h=(t,e)=>r().setTimeout(t,e)},9998:function(t){t.exports=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o.apply(this,arguments)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function u(t){var e=c();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return l(this,n)}}function d(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}function p(t,e,n){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=d(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},p(t,e,n||t)}function f(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=f(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}var v=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,m=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],b=function(t){var e=t,n=t.indexOf("["),i=t.indexOf("]");-1!=n&&-1!=i&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));for(var o=v.exec(t||""),r={},s=14;s--;)r[m[s]]=o[s]||"";return-1!=n&&-1!=i&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=_(r,r.path),r.queryKey=C(r,r.query),r};function _(t,e){var n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return"/"!=e.substr(0,1)&&0!==e.length||i.splice(0,1),"/"==e.substr(e.length-1,1)&&i.splice(i.length-1,1),i}function C(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,i){e&&(n[e]=i)})),n}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),i=b(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var o=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(n&&n.port===i.port?"":":"+i.port),i}var k={exports:{}};try{k.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){k.exports=!1}var S=k.exports,E="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function O(t){var e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||S))return new XMLHttpRequest}catch(t){}if(!e)try{return new(E[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function P(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.reduce((function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e}),{})}var T=setTimeout,A=clearTimeout;function x(t,e){e.useNativeTimers?(t.setTimeoutFn=T.bind(E),t.clearTimeoutFn=A.bind(E)):(t.setTimeoutFn=setTimeout.bind(E),t.clearTimeoutFn=clearTimeout.bind(E))}var R=M;function M(t){if(t)return D(t)}function D(t){for(var e in M.prototype)t[e]=M.prototype[e];return t}M.prototype.on=M.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},M.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},M.prototype.off=M.prototype.removeListener=M.prototype.removeAllListeners=M.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<i.length;o++)if((n=i[o])===e||n.fn===e){i.splice(o,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},M.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,e)}return this},M.prototype.emitReserved=M.prototype.emit,M.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},M.prototype.hasListeners=function(t){return!!this.listeners(t).length};var I=Object.create(null);I.open="0",I.close="1",I.ping="2",I.pong="3",I.message="4",I.upgrade="5",I.noop="6";var L=Object.create(null);Object.keys(I).forEach((function(t){L[I[t]]=t}));for(var N={type:"error",data:"parser error"},B="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),j="function"==typeof ArrayBuffer,G=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},H=function(t,e,n){var i=t.type,o=t.data;return B&&o instanceof Blob?e?n(o):F(o,n):j&&(o instanceof ArrayBuffer||G(o))?e?n(o):F(new Blob([o]),n):n(I[i]+(o||""))},F=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)},V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z="undefined"==typeof Uint8Array?[]:new Uint8Array(256),U=0;U<V.length;U++)z[V.charCodeAt(U)]=U;var W,Y=function(t){var e,n,i,o,r,s=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var h=new ArrayBuffer(s),l=new Uint8Array(h);for(e=0;e<a;e+=4)n=z[t.charCodeAt(e)],i=z[t.charCodeAt(e+1)],o=z[t.charCodeAt(e+2)],r=z[t.charCodeAt(e+3)],l[c++]=n<<2|i>>4,l[c++]=(15&i)<<4|o>>2,l[c++]=(3&o)<<6|63&r;return h},X="function"==typeof ArrayBuffer,q=function(t,e){if("string"!=typeof t)return{type:"message",data:Z(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:K(t.substring(1),e)}:L[n]?t.length>1?{type:L[n],data:t.substring(1)}:{type:L[n]}:N},K=function(t,e){if(X){var n=Y(t);return Z(n,e)}return{base64:!0,data:t}},Z=function(t,e){return"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t},J=String.fromCharCode(30),$=function(t,e){var n=t.length,i=new Array(n),o=0;t.forEach((function(t,r){H(t,!1,(function(t){i[r]=t,++o===n&&e(i.join(J))}))}))},Q=function(t,e){for(var n=t.split(J),i=[],o=0;o<n.length;o++){var r=q(n[o],e);if(i.push(r),"error"===r.type)break}return i},tt=4,et=function(t){r(o,t);var n=u(o);function o(t){var i;return e(this,o),(i=n.call(this)).writable=!1,x(h(i),t),i.opts=t,i.query=t.query,i.readyState="",i.socket=t.socket,i}return i(o,[{key:"onError",value:function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,p(s(o.prototype),"emit",this).call(this,"error",n),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState&&this.write(t)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,p(s(o.prototype),"emit",this).call(this,"open")}},{key:"onData",value:function(t){var e=q(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(t){p(s(o.prototype),"emit",this).call(this,"packet",t)}},{key:"onClose",value:function(){this.readyState="closed",p(s(o.prototype),"emit",this).call(this,"close")}}]),o}(R),nt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),it=64,ot={},rt=0,st=0;function at(t){var e="";do{e=nt[t%it]+e,t=Math.floor(t/it)}while(t>0);return e}function ct(t){var e=0;for(st=0;st<t.length;st++)e=e*it+ot[t.charAt(st)];return e}function ht(){var t=at(+new Date);return t!==W?(rt=0,W=t):t+"."+at(rt++)}for(;st<it;st++)ot[nt[st]]=st;ht.encode=at,ht.decode=ct;var lt=ht,ut={encode:function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},decode:function(t){for(var e={},n=t.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}},dt=function(t){r(o,t);var n=u(o);function o(){var t;return e(this,o),(t=n.apply(this,arguments)).polling=!1,t}return i(o,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(t){var e=this;this.readyState="pausing";var n=function(){e.readyState="paused",t()};if(this.polling||!this.writable){var i=0;this.polling&&(i++,this.once("pollComplete",(function(){--i||n()}))),this.writable||(i++,this.once("drain",(function(){--i||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(t){var e=this,n=function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)};Q(t,this.socket.binaryType).forEach(n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var t=this,e=function(){t.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}},{key:"write",value:function(t){var e=this;this.writable=!1,$(t,(function(t){e.doWrite(t,(function(){e.writable=!0,e.emit("drain")}))}))}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=lt()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var i=ut.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}}]),o}(et);function pt(){}var ft=null!=new O({xdomain:!1}).responseType,gt=function(t){r(s,t);var n=u(s);function s(t){var i;if(e(this,s),i=n.call(this,t),"undefined"!=typeof location){var o="https:"===location.protocol,r=location.port;r||(r=o?"443":"80"),i.xd="undefined"!=typeof location&&t.hostname!==location.hostname||r!==t.port,i.xs=t.secure!==o}var a=t&&t.forceBase64;return i.supportsBinary=ft&&!a,i}return i(s,[{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(t,{xd:this.xd,xs:this.xs},this.opts),new yt(this.uri(),t)}},{key:"doWrite",value:function(t,e){var n=this,i=this.request({method:"POST",data:t});i.on("success",e),i.on("error",(function(t){n.onError("xhr post error",t)}))}},{key:"doPoll",value:function(){var t=this,e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}}]),s}(dt),yt=function(t){r(o,t);var n=u(o);function o(t,i){var r;return e(this,o),x(h(r=n.call(this)),i),r.opts=i,r.method=i.method||"GET",r.uri=t,r.async=!1!==i.async,r.data=void 0!==i.data?i.data:null,r.create(),r}return i(o,[{key:"create",value:function(){var t=this,e=P(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;var n=this.xhr=new O(e);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}catch(t){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{n.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||1223===n.status?t.onLoad():t.setTimeoutFn((function(){t.onError("number"==typeof n.status?n.status:0)}),0))},n.send(this.data)}catch(e){return void this.setTimeoutFn((function(){t.onError(e)}),0)}"undefined"!=typeof document&&(this.index=o.requestsCount++,o.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(t){this.emit("data",t),this.onSuccess()}},{key:"onError",value:function(t){this.emit("error",t),this.cleanup(!0)}},{key:"cleanup",value:function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=pt,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete o.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var t=this.xhr.responseText;null!==t&&this.onData(t)}},{key:"abort",value:function(){this.cleanup()}}]),o}(R);function vt(){for(var t in yt.requests)yt.requests.hasOwnProperty(t)&&yt.requests[t].abort()}yt.requestsCount=0,yt.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",vt):"function"==typeof addEventListener&&addEventListener("onpagehide"in E?"pagehide":"unload",vt,!1));var mt="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,e){return e(t,0)},bt=E.WebSocket||E.MozWebSocket,_t=!0,Ct="arraybuffer",wt="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),kt=function(t){r(o,t);var n=u(o);function o(t){var i;return e(this,o),(i=n.call(this,t)).supportsBinary=!t.forceBase64,i}return i(o,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),e=this.opts.protocols,n=wt?{}:P(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=_t&&!wt?e?new bt(t,e):new bt(t):new bt(t,e,n)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||Ct,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(n){var i=t[n],o=n===t.length-1;H(i,e.supportsBinary,(function(t){try{_t&&e.ws.send(t)}catch(t){}o&&mt((function(){e.writable=!0,e.emit("drain")}),e.setTimeoutFn)}))},i=0;i<t.length;i++)n(i)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=lt()),this.supportsBinary||(t.b64=1);var i=ut.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(i.length?"?"+i:"")}},{key:"check",value:function(){return!(!bt||"__initialize"in bt&&this.name===o.prototype.name)}}]),o}(et),St={websocket:kt,polling:gt},Et=function(n){r(a,n);var s=u(a);function a(n){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,a),i=s.call(this),n&&"object"===t(n)&&(r=n,n=null),n?(n=b(n),r.hostname=n.host,r.secure="https"===n.protocol||"wss"===n.protocol,r.port=n.port,n.query&&(r.query=n.query)):r.host&&(r.hostname=b(r.host).host),x(h(i),r),i.secure=null!=r.secure?r.secure:"undefined"!=typeof location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=i.secure?"443":"80"),i.hostname=r.hostname||("undefined"!=typeof location?location.hostname:"localhost"),i.port=r.port||("undefined"!=typeof location&&location.port?location.port:i.secure?"443":"80"),i.transports=r.transports||["polling","websocket"],i.readyState="",i.writeBuffer=[],i.prevBufferLen=0,i.opts=o({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),i.opts.path=i.opts.path.replace(/\/$/,"")+"/","string"==typeof i.opts.query&&(i.opts.query=ut.decode(i.opts.query)),i.id=null,i.upgrades=null,i.pingInterval=null,i.pingTimeout=null,i.pingTimeoutTimer=null,"function"==typeof addEventListener&&(i.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){i.transport&&(i.transport.removeAllListeners(),i.transport.close())}),!1),"localhost"!==i.hostname&&(i.offlineEventListener=function(){i.onClose("transport close")},addEventListener("offline",i.offlineEventListener,!1))),i.open(),i}return i(a,[{key:"createTransport",value:function(t){var e=Ot(this.opts.query);e.EIO=tt,e.transport=t,this.id&&(e.sid=this.id);var n=o({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new St[t](n)}},{key:"open",value:function(){var t,e=this;if(this.opts.rememberUpgrade&&a.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){e.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(){e.onClose("transport close")}))}},{key:"probe",value:function(t){var e=this,n=this.createTransport(t),i=!1;a.priorWebsocketSuccess=!1;var o=function(){i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",(function(t){if(!i)if("pong"===t.type&&"probe"===t.data){if(e.upgrading=!0,e.emitReserved("upgrading",n),!n)return;a.priorWebsocketSuccess="websocket"===n.name,e.transport.pause((function(){i||"closed"!==e.readyState&&(u(),e.setTransport(n),n.send([{type:"upgrade"}]),e.emitReserved("upgrade",n),n=null,e.upgrading=!1,e.flush())}))}else{var o=new Error("probe error");o.transport=n.name,e.emitReserved("upgradeError",o)}})))};function r(){i||(i=!0,u(),n.close(),n=null)}var s=function(t){var i=new Error("probe error: "+t);i.transport=n.name,r(),e.emitReserved("upgradeError",i)};function c(){s("transport closed")}function h(){s("socket closed")}function l(t){n&&t.name!==n.name&&r()}var u=function(){n.removeListener("open",o),n.removeListener("error",s),n.removeListener("close",c),e.off("close",h),e.off("upgrading",l)};n.once("open",o),n.once("error",s),n.once("close",c),this.once("close",h),this.once("upgrading",l),n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",a.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){t.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}},{key:"write",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"send",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"sendPacket",value:function(t,e,n,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}}},{key:"close",value:function(){var t=this,e=function(){t.onClose("forced close"),t.transport.close()},n=function n(){t.off("upgrade",n),t.off("upgradeError",n),e()},i=function(){t.once("upgrade",n),t.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){t.upgrading?i():e()})):this.upgrading?i():e()),this}},{key:"onError",value:function(t){a.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}]),a}(R);function Ot(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}Et.protocol=tt;var Pt="function"==typeof ArrayBuffer,Tt=function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer},At=Object.prototype.toString,xt="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===At.call(Blob),Rt="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===At.call(File);function Mt(t){return Pt&&(t instanceof ArrayBuffer||Tt(t))||xt&&t instanceof Blob||Rt&&t instanceof File}function Dt(e,n){if(!e||"object"!==t(e))return!1;if(Array.isArray(e)){for(var i=0,o=e.length;i<o;i++)if(Dt(e[i]))return!0;return!1}if(Mt(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Dt(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Dt(e[r]))return!0;return!1}function It(t){var e=[],n=t.data,i=t;return i.data=Lt(n,e),i.attachments=e.length,{packet:i,buffers:e}}function Lt(e,n){if(!e)return e;if(Mt(e)){var i={_placeholder:!0,num:n.length};return n.push(e),i}if(Array.isArray(e)){for(var o=new Array(e.length),r=0;r<e.length;r++)o[r]=Lt(e[r],n);return o}if("object"===t(e)&&!(e instanceof Date)){var s={};for(var a in e)e.hasOwnProperty(a)&&(s[a]=Lt(e[a],n));return s}return e}function Nt(t,e){return t.data=Bt(t.data,e),t.attachments=void 0,t}function Bt(e,n){if(!e)return e;if(e&&e._placeholder)return n[e.num];if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]=Bt(e[i],n);else if("object"===t(e))for(var o in e)e.hasOwnProperty(o)&&(e[o]=Bt(e[o],n));return e}var jt,Gt=5;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(jt||(jt={}));var Ht=function(){function t(){e(this,t)}return i(t,[{key:"encode",value:function(t){return t.type!==jt.EVENT&&t.type!==jt.ACK||!Dt(t)?[this.encodeAsString(t)]:(t.type=t.type===jt.EVENT?jt.BINARY_EVENT:jt.BINARY_ACK,this.encodeAsBinary(t))}},{key:"encodeAsString",value:function(t){var e=""+t.type;return t.type!==jt.BINARY_EVENT&&t.type!==jt.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),e}},{key:"encodeAsBinary",value:function(t){var e=It(t),n=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(n),i}}]),t}(),Ft=function(n){r(a,n);var o=u(a);function a(){return e(this,a),o.call(this)}return i(a,[{key:"add",value:function(t){var e;if("string"==typeof t)(e=this.decodeString(t)).type===jt.BINARY_EVENT||e.type===jt.BINARY_ACK?(this.reconstructor=new zt(e),0===e.attachments&&p(s(a.prototype),"emitReserved",this).call(this,"decoded",e)):p(s(a.prototype),"emitReserved",this).call(this,"decoded",e);else{if(!Mt(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,p(s(a.prototype),"emitReserved",this).call(this,"decoded",e))}}},{key:"decodeString",value:function(t){var e=0,n={type:Number(t.charAt(0))};if(void 0===jt[n.type])throw new Error("unknown packet type "+n.type);if(n.type===jt.BINARY_EVENT||n.type===jt.BINARY_ACK){for(var i=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var o=t.substring(i,e);if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===t.charAt(e+1)){for(var r=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);n.nsp=t.substring(r,e)}else n.nsp="/";var s=t.charAt(e+1);if(""!==s&&Number(s)==s){for(var c=e+1;++e;){var h=t.charAt(e);if(null==h||Number(h)!=h){--e;break}if(e===t.length)break}n.id=Number(t.substring(c,e+1))}if(t.charAt(++e)){var l=Vt(t.substr(e));if(!a.isPayloadValid(n.type,l))throw new Error("invalid payload");n.data=l}return n}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,n){switch(e){case jt.CONNECT:return"object"===t(n);case jt.DISCONNECT:return void 0===n;case jt.CONNECT_ERROR:return"string"==typeof n||"object"===t(n);case jt.EVENT:case jt.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case jt.ACK:case jt.BINARY_ACK:return Array.isArray(n)}}}]),a}(R);function Vt(t){try{return JSON.parse(t)}catch(t){return!1}}var zt=function(){function t(n){e(this,t),this.packet=n,this.buffers=[],this.reconPack=n}return i(t,[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=Nt(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),t}(),Ut=Object.freeze({__proto__:null,protocol:Gt,get PacketType(){return jt},Encoder:Ht,Decoder:Ft});function Wt(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var Yt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Xt=function(t){r(o,t);var n=u(o);function o(t,i,r){var s;return e(this,o),(s=n.call(this)).connected=!1,s.disconnected=!0,s.receiveBuffer=[],s.sendBuffer=[],s.ids=0,s.acks={},s.flags={},s.io=t,s.nsp=i,r&&r.auth&&(s.auth=r.auth),s.io._autoConnect&&s.open(),s}return i(o,[{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[Wt(t,"open",this.onopen.bind(this)),Wt(t,"packet",this.onpacket.bind(this)),Wt(t,"error",this.onerror.bind(this)),Wt(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(Yt.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.unshift(t);var o={type:jt.EVENT,data:n,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var r=this.ids++,s=n.pop();this._registerAckCallback(r,s),o.id=r}var a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!a||!this.connected)||(this.connected?this.packet(o):this.sendBuffer.push(o)),this.flags={},this}},{key:"_registerAckCallback",value:function(t,e){var n=this,i=this.flags.timeout;if(void 0!==i){var o=this.io.setTimeoutFn((function(){delete n.acks[t];for(var i=0;i<n.sendBuffer.length;i++)n.sendBuffer[i].id===t&&n.sendBuffer.splice(i,1);e.call(n,new Error("operation has timed out"))}),i);this.acks[t]=function(){n.io.clearTimeoutFn(o);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];e.apply(n,[null].concat(i))}}else this.acks[t]=e}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;"function"==typeof this.auth?this.auth((function(e){t.packet({type:jt.CONNECT,data:e})})):this.packet({type:jt.CONNECT,data:this.auth})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case jt.CONNECT:if(t.data&&t.data.sid){var e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case jt.EVENT:case jt.BINARY_EVENT:this.onevent(t);break;case jt.ACK:case jt.BINARY_ACK:this.onack(t);break;case jt.DISCONNECT:this.ondisconnect();break;case jt.CONNECT_ERROR:this.destroy();var n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var e,n=y(this._anyListeners.slice());try{for(n.s();!(e=n.n()).done;)e.value.apply(this,t)}catch(t){n.e(t)}finally{n.f()}}p(s(o.prototype),"emit",this).apply(this,t)}},{key:"ack",value:function(t){var e=this,n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];e.packet({type:jt.ACK,id:t,data:o})}}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach((function(e){return t.emitEvent(e)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(e){return t.packet(e)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(t){return t()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:jt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),o}(R),qt=Kt;function Kt(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Kt.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},Kt.prototype.reset=function(){this.attempts=0},Kt.prototype.setMin=function(t){this.ms=t},Kt.prototype.setMax=function(t){this.max=t},Kt.prototype.setJitter=function(t){this.jitter=t};var Zt=function(n){r(s,n);var o=u(s);function s(n,i){var r,a;e(this,s),(r=o.call(this)).nsps={},r.subs=[],n&&"object"===t(n)&&(i=n,n=void 0),(i=i||{}).path=i.path||"/socket.io",r.opts=i,x(h(r),i),r.reconnection(!1!==i.reconnection),r.reconnectionAttempts(i.reconnectionAttempts||1/0),r.reconnectionDelay(i.reconnectionDelay||1e3),r.reconnectionDelayMax(i.reconnectionDelayMax||5e3),r.randomizationFactor(null!==(a=i.randomizationFactor)&&void 0!==a?a:.5),r.backoff=new qt({min:r.reconnectionDelay(),max:r.reconnectionDelayMax(),jitter:r.randomizationFactor()}),r.timeout(null==i.timeout?2e4:i.timeout),r._readyState="closed",r.uri=n;var c=i.parser||Ut;return r.encoder=new c.Encoder,r.decoder=new c.Decoder,r._autoConnect=!1!==i.autoConnect,r._autoConnect&&r.open(),r}return i(s,[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Et(this.uri,this.opts);var n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;var o=Wt(n,"open",(function(){i.onopen(),t&&t()})),r=Wt(n,"error",(function(n){i.cleanup(),i._readyState="closed",e.emitReserved("error",n),t?t(n):i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;0===s&&o();var a=this.setTimeoutFn((function(){o(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&a.unref(),this.subs.push((function(){clearTimeout(a)}))}return this.subs.push(o),this.subs.push(r),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(Wt(t,"ping",this.onping.bind(this)),Wt(t,"data",this.ondata.bind(this)),Wt(t,"error",this.onerror.bind(this)),Wt(t,"close",this.onclose.bind(this)),Wt(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){this.decoder.add(t)}},{key:"ondecoded",value:function(t){this.emitReserved("packet",t)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n||(n=new Xt(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var i=n[e];if(this.nsps[i].active)return}this._close()}},{key:"_packet",value:function(t){for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(t){return t()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var i=this.setTimeoutFn((function(){e.skipReconnect||(t.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((function(n){n?(e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):e.onreconnect()})))}),n);this.opts.autoUnref&&i.unref(),this.subs.push((function(){clearTimeout(i)}))}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}]),s}(R),Jt={};function $t(e,n){"object"===t(e)&&(n=e,e=void 0);var i,o=w(e,(n=n||{}).path||"/socket.io"),r=o.source,s=o.id,a=o.path,c=Jt[s]&&a in Jt[s].nsps;return n.forceNew||n["force new connection"]||!1===n.multiplex||c?i=new Zt(r,n):(Jt[s]||(Jt[s]=new Zt(r,n)),i=Jt[s]),o.query&&!n.query&&(n.query=o.queryKey),i.socket(o.path,n)}return o($t,{Manager:Zt,Socket:Xt,io:$t,connect:$t}),$t}()}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};n(8996)})();